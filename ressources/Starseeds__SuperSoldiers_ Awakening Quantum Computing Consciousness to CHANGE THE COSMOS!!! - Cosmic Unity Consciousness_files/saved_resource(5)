/* >>> file start: js/jquery/jquery.lj.inlineCalendar.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t,e){e=e||!1;var a=t.getDate().toString();1===a.length&&(a="0"+a),e&&(a="");var n=t.getMonth().toString();return 1===n.length&&(n="0"+n),parseInt(t.getFullYear().toString()+n+a,10)}function a(t,a){return e(a,!0)>=e(t[0],!0)&&e(a,!0)<=e(t[1],!0)}function n(a,n,i){this.initialize=function(t){this.tbody=this.catchTableStructure(t)},this.modelChanged=function(e,n,s){var o=i.longMonth?i.ml.monthNamesLong:i.ml.monthNamesShort;this.tbody.detach(),this.fillDates(e,n);for(var r in s)s.hasOwnProperty(r)&&a[r][s[r]?"removeClass":"addClass"](this.disabledStyle(r));var l=i.monthRef?t("<a>",{href:LJ.Util.Date.format(e,i.monthRef),text:o[e.getMonth()]+(i.monthWithYear?" "+e.getFullYear():"")}):o[e.getMonth()],h=i.yearRef?t("<a>",{href:LJ.Util.Date.format(e,i.yearRef),text:e.getFullYear()}):e.getFullYear();a.monthLabel.empty().append(l),a.yearLabel.empty().append(h),this.tbody.appendTo(a.table)},this.catchTableStructure=function(e){var n=a.tbody[0];a.daysCells=[],a.daysSpans=[];for(var i,s,o,r=n.rows.length,l=6-r,h="<tr>",d=0;7>d;++d)h+="<td><span></span></td>";for(h+="</tr>";l-- >0;)t(h).hide().appendTo(a.tbody);for(r=6,a.lastRow=jQuery(n.rows[n.rows.length-1]),e=new Date(e),i=0;r>i;++i)for(s=0,o=n.rows[i].cells.length;o>s;++s){var c=jQuery(n.rows[i].cells[s]),p=c.children(),u=p.text().trim();u&&(e.setDate(u),c.data("isActive",!0),c.data("day",e)),a.daysCells.push(c),a.daysSpans.push(p)}return jQuery(n)},this.fillDates=function(t,e){function n(t){var a=t.getFullYear(),n=t.getMonth(),i=t.getDate();return e&&e[a]&&e[a][n]&&e[a][n][i]}var s=new Date(t);s.setDate(1);var o;o=i.startAtSunday?s.getDay():0===s.getDay()?6:s.getDay()-1,s.setDate(1-o);for(var r=0,l=a.daysCells.length;l>r;++r){var h=a.daysCells[r],d=a.daysSpans[r];this.formDayString(s,h,d,n(s),this.isActiveDate(s,t)),s.setDate(s.getDate()+1)}s.setDate(s.getDate()-1),s.getDate()<7?a.lastRow.css("display",""):a.lastRow.css("display","none")},this.isActiveDate=function(t,a){var n=!0;return n=a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth(),n&&(i.activeFrom||i.activeUntil)&&(n=i.activeFrom&&e(i.activeFrom)<=e(t)||i.activeUntil&&e(i.activeUntil)>=e(t)),n},this.formDayString=function(a,s,o,r,l){a=new Date(a);var h=e(a)===e(i.currentDate);if(s.data("day",a),s.data("isActive",l),s.data("hasEvents",r),s[h?"addClass":"removeClass"](n.current),s.removeClass(n.cellHover),l)if(r||i.allRefs){var d=!0;i.allRefs&&"object"===_typeof(i.allRefs)&&(i.allRefs.from&&a<i.allRefs.from&&(d=!1),i.allRefs.to&&a>i.allRefs.to&&(d=!1)),d?(s.removeClass(n.inactive),o.html(t("<a />",{html:a.getDate(),href:LJ.Util.Date.format(a,i.dayRef),target:"_self"}))):(s.removeClass(n.inactive),o.html(a.getDate()))}else s.removeClass(n.inactive),o.html(a.getDate());else s.addClass(n.inactive),o.html(a.getDate())},this.disabledStyle=function(t){return"prevMonth"===t||"prevYear"===t?n.prevDisabled:n.nextDisabled}}var i={dayRef:"/%Y/%M/%D",monthRef:"",yearRef:"",allRefs:!1,currentDate:new Date,activeUntil:null,activeFrom:null,startMonth:new Date(1900,0,1),endMonth:new Date(2050,0,1),startAtSunday:"0"===LJ.ml("date.format.offset")||!1,dateFormat:"%Y-%M-%D",defaultTitle:"Calendar",longMonth:!1,events:null,displayedMonth:null,dateChange:null,selectors:{table:"table",title:"h5",tbody:"tbody",month:".cal-nav-month",year:".cal-nav-year",monthSelect:".cal-nav-month-select",yearSelect:".cal-nav-year-select",prevMonth:".cal-nav-month .cal-nav-prev",nextMonth:".cal-nav-month .cal-nav-next",prevYear:".cal-nav-year .cal-nav-prev",nextYear:".cal-nav-year .cal-nav-next",monthLabel:".cal-nav-month .cal-month",yearLabel:".cal-nav-year .cal-year"},classNames:{container:"",inactive:"other",future:"other",current:"current",weekend:"weekend",nextDisabled:"cal-nav-next-dis",prevDisabled:"cal-nav-prev-dis",cellHover:"hover",longMonth:"sidebar-cal-longmonth"},mlPrefix:{monthNamesShort:["monthNames","date.month.{name}.short"],monthNamesLong:["monthNames","date.month.{name}.long"],dayNamesShort:["dayNames","date.day.{name}.short"]},ml:{monthNames:["january","february","march","april","may","june","july","august","september","october","november","december"],dayNames:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],caption:"Calendar"}},s={options:{},_create:function(){this._preInit(),this._initialize(),this._postInit()},_preInit:function(){var e=t[this.namespace][this.widgetName].getDefaults();this.options=jQuery.extend(!0,{},e,this.options),this._prepareMLVars()},_prepareMLVars:function(){var t,e=function(t,e){return LJ.ml(t.supplant({name:e}))};for(var a in this.options.mlPrefix)this.options.mlPrefix.hasOwnProperty(a)&&(t=this.options.mlPrefix[a],this.options.ml[a]=this.options.ml[t[0]].map(e.bind(null,t[1])))},_initialize:function(){this.options.displayedMonth||(this.options.displayedMonth=new Date(this.options.currentDate)),this._events=this.options.events,this._hideTimer=null,this._nodes=this._nodes||{container:this.element,root:this.element},this._invalidateTimer=null,this.element.hasClass(this.options.classNames.longMonth)&&(this.options.longMonth=!0),this._bindNodes(),this.options.startMonth.setDate(1),this._view=new(this._getView())(this._nodes,this.options.classNames,this.options),this._view.initialize(this.options.currentDate),this._nodes.table.hasClass("monday")&&this._setOption("startAtSunday",!1),this._nodes.monthSelect.val(this.options.displayedMonth.getMonth()),this._nodes.yearSelect.val(this.options.displayedMonth.getFullYear()),this._bindEvents()},_postInit:function(){},_getView:function(){return n},_bindNodes:function(){for(var t in this.options.selectors)!this.options.selectors.hasOwnProperty(t)||t in this._nodes||(this._nodes[t]=this._nodes.container.find(this.options.selectors[t]));var e=LJ.Util.Date.parse(this._nodes.table.attr("data-date"),this.options.dateFormat);e&&(this.options.displayedMonth=e)},destroy:function(){t.Widget.prototype.destroy.apply(this,arguments)},_bindEvents:function(){var e=this,a=this._getSwitcherStates(this.options.currentDate),n=function(t){return function(a){a.preventDefault(),a.stopPropagation();var n=e._getSwitcherStates(e.options.currentDate);n[t]&&e["_"+t]()}};for(var i in a)a.hasOwnProperty(i)&&this._nodes[i].click(n(i));this._nodes.monthSelect.change(function(){var t=new Date(e.options.currentDate);t.setMonth(this.value),e._setOption("currentDate",t)}),this._nodes.yearSelect.change(function(){var t=new Date(e.options.currentDate);t.setFullYear(this.value),e._setOption("currentDate",t)}),this._nodes.tbody.delegate("td","click",function(a){e._cellSelectedEvent(t(this),a)})},_switchMonth:function(t){var e=jQuery.Event("dateChange");e.moveForward=t>0,e.switchType=12===Math.abs(t)?"year":1===Math.abs(t)?"month":null,e.date=new Date(this.options.displayedMonth.getFullYear(),this.options.displayedMonth.getMonth()+t,1),this._nodes.root.trigger(e),this._setOption("displayedMonth",e.date)},_prevMonth:function(){this._switchMonth(-1)},_nextMonth:function(){this._switchMonth(1)},_prevYear:function(){this._switchMonth(-12)},_nextYear:function(){this._switchMonth(12)},_cellSelectedEvent:function(t,e){t.data("isActive")&&!this._cellSelected(t.data("day"))||(e.stopPropagation(),e.preventDefault())},_cellSelected:function(t){var e=jQuery.Event("daySelected");return this._nodes.root.trigger(e,[t,LJ.Util.Date.format(t,this.options.dateFormat)]),e.isDefaultPrevented()||this._setOption("currentDate",t),!e.isDefaultPrevented()},_fitDate:function(t){t=new Date(t);var n=[this.options.startMonth,this.options.endMonth];return a(n,t)||(t=e(t,!0)<e(n[0],!0)?new Date(n[0]):new Date(n[1])),t},_getSwitcherStates:function(){var t=this.options.displayedMonth,e=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),11,1);return{prevMonth:this._isActivePrev(t)!==!1,prevYear:this._isActivePrev(e)!==!1,nextMonth:this._isActiveNext(t)!==!1,nextYear:this._isActiveNext(a)!==!1}},_isActiveNext:function(t){return this._isActiveDate(t,1)},_isActivePrev:function(t){return this._isActiveDate(t,-1)},_isActiveDate:function(t,e){var n=new Date(t);return n.setMonth(n.getMonth()+e),n.setDate(1),a([this.options.startMonth,this.options.endMonth],n)},_invalidateDisplay:function(){var t=this;clearTimeout(this._invalidateTimer),setTimeout(function(){t._view.modelChanged(t.options.displayedMonth,t._events,t._getSwitcherStates())},50)},_setOption:function(t,a){switch(t){case"currentDate":this.options.currentDate=this._fitDate(a);var n=jQuery.Event("currentDateChange"),i=new Date(this.options.currentDate);this._nodes.root.trigger(n,[i,LJ.Util.Date.format(i,this.options.dateFormat)]),this._setOption("displayedMonth",a),this._invalidateDisplay();break;case"activeFrom":this.options.activeFrom=new Date(a),this._invalidateDisplay();break;case"activeUntil":this.options.activeUntil=new Date(a),this._invalidateDisplay();break;case"title":this._title=a,this._nodes.title.html(a);break;case"events":this._events=a,this._invalidateDisplay();break;case"displayedMonth":var s=this._fitDate(new Date(a)),o=e(s,!0)===e(this.options.displayedMonth,!0);o||(this.options.displayedMonth=this._fitDate(new Date(a)),this._nodes.monthSelect.val(this.options.displayedMonth.getMonth()),this._nodes.yearSelect.val(this.options.displayedMonth.getFullYear()),this._invalidateDisplay());break;case"startMonth":this.options.startMonth=new Date(a),this._invalidateDisplay();break;case"endMonth":this.options.endMonth=new Date(a),this._invalidateDisplay();break;case"startAtSunday":this.options.startAtSunday=!!a;break;case"monthWithYear":this.options.monthWithYear=Boolean(a);break;case"dayRef":this.options.dayRef=a,this._invalidateDisplay()}},getElement:function(t){return t in this._nodes?this._nodes[t]:null}};t.widget("lj.inlineCalendar",s),jQuery.extend(t.lj.inlineCalendar,{getDefaults:function(){return i},setDefaults:function(t){t&&jQuery.extend(!0,i,t)}})}(jQuery);
/* <<< file end: js/jquery/jquery.lj.inlineCalendar.js */

//# map link was there [jquery.lj.inlineCalendar.js.map]
/* >>> file start: js/jquery/jquery.lj.calendar.js */
//= require js/jquery/jquery.lj.inlineCalendar.js
!function(e,t){var n,s={showOn:"click",closeControl:!0,showCellHovers:!1,hoverDelay:400,align:"center",events:null,displayedMonth:null,bubbleClass:!1,selectors:{tmpl:".appwidget-calendar .calendar"},classNames:{showCellHovers:"all-days",popup:"b-bubble-calendar"},templates:{calendar:'<div class="popup-inner calendar" style="display: none;"> 						<p class="cal-nav"> 							<span class="cal-nav-month"> 								<i class="cal-nav-prev"></i> 								<span class="cal-month"></span> 								<i class="cal-nav-next cal-nav-next-dis"></i> 							</span> 							<span class="cal-nav-year"> 								<i class="cal-nav-prev cal-nav-prev"></i> 								<span class="cal-year"></span> 								<i class="cal-nav-next cal-nav-next-dis"></i> 							</span> 						</p> 						<table class="calendar-table" cellspacing="0" cellpadding="0"> 							<thead> 								<tr> 									{{each days}} 										<th class="calendar-cell calendar-cell--header {{if $index % 7 === weekend1 || $index % 7 === weekend2}} weekend{{/if}}">${day}</th> 									{{/each}} 								</tr> 							</thead> 							<tbody> 								{{each cells}} 								{{if $index % 7 === 0}}<tr>{{/if}} 								<td class="calendar-cell {{if $index % 7 === weekend1 || $index % 7 === weekend2}}weekend{{/if}}"><span></span></td> 								{{if $index % 7 === 6}}</tr>{{/if}} 								{{/each}} 							</tbody> 						</table></div>'}},a={options:{},_initialize:function(){n||(n=this._buildDOM()),this._nodes={container:n.clone(),root:this.element},e.lj.inlineCalendar.prototype._initialize.apply(this),this._invalidateDisplay()},_bindNodes:function(){e.lj.inlineCalendar.prototype._bindNodes.apply(this);var t=this;this._nodes.container.bubble({classNames:{containerAddClass:this.options.bubbleClass?this.options.classNames.popup:""},target:this._nodes.root,align:this.options.align,closeControl:this.options.closeControl,showOn:this.options.showOn,closeOnContentClick:!1}).bind("bubbleshow",function(e){t._nodes.container.bubble("setPreventHide",!0),setTimeout(function(){t._nodes.container.bubble("setPreventHide",!1)},300),t._trigger("show")}).bind("bubblehide",function(e){t._trigger("hide")}).addClass(this.options.classNames.container),this.options.input?this._nodes.input=this.options.input:this._nodes.root.is("[type=text]")?this._nodes.input=this._nodes.root:this._nodes.input=e(),this._nodes.input.mask&&this._nodes.input.mask("?dddd-dd-dd",{placeholder:" "}),this._nodes.input.input(this._parseInputValue.bind(this));var n=LJ.Util.Date.parse(this._nodes.input.val(),this.options.dateFormat);n&&(this.options.currentDate=n),this.options.showCellHovers&&this._nodes.table.addClass(this.options.classNames.showCellHovers)},destroy:function(){this._nodes.container.bubble("destroy"),e.lj.inlineCalendar.prototype.destroy.apply(this)},_buildDOM:function(){var e=this.options.ml.dayNamesShort.map(function(e){return{day:e}}),t=0,n=6,s=function(e,t){for(var n=[];e--;)n.push(t);return n};this.options.startAtSunday||(e[7]=e[0],e.shift(),t=5);for(var a=[],i=[],l=this.options.endMonth.getFullYear(),o=this.options.startMonth.getFullYear();l>=o;)a.push({year:l--});i=this.options.ml.monthNamesLong.map(function(e){return{month:e}});var d={caption:this.options.ml.caption,days:e,months:i,years:a,cells:s(42,{}),weekend1:t,weekend2:n};return-1!==this.options.templates.calendar.indexOf(" ")?jQuery.tmpl(this.options.templates.calendar,d):LJ.UI.template(this.options.templates.calendar,d)},_parseInputValue:function(){var e=LJ.Util.Date.parse(this._nodes.input.val(),this.options.dateFormat);e&&this._cellSelected(e)},_cellSelectedEvent:function(n,s){var a=this;e.lj.inlineCalendar.prototype._cellSelectedEvent.call(this,n,s),a.options.showCellHovers&&n.data("isActive")&&a._nodes.container.bubble("hide"),"a"==s.target.tagName.toLowerCase()&&(t.location.href=s.target.href)},_invalidateDisplay:function(){this._view.modelChanged(this.options.displayedMonth,this._events,this._getSwitcherStates())},_setOption:function(t,n){switch(e.lj.inlineCalendar.prototype._setOption.call(this,t,n),t){case"currentDate":this._nodes.input.val(LJ.Util.Date.format(this.options.currentDate,this.options.dateFormat))}}};e.widget("lj.calendar",e.lj.inlineCalendar,a),jQuery.extend(e.lj.calendar,{getDefaults:function(){return jQuery.extend(!0,{},e.lj.inlineCalendar.getDefaults(),s)},setDefaults:function(e){e&&jQuery.extend(s,e)}})}(jQuery,window);
/* <<< file end: js/jquery/jquery.lj.calendar.js */

//# map link was there [jquery.lj.calendar.js.map]
/* >>> file start: js/jquery/jquery.mask.js */
!function(t){var e=(t.browser.msie?"paste":"input")+".mask",n=void 0!=window.orientation;t.mask={definitions:{d:"[0-9]",w:"[A-Za-z]","*":"[A-Za-z0-9а-яА-Я]"}},t.fn.extend({unmask:function(){return this.trigger("unmask")},mask:function(a,r){if(!a&&this.length>0){var i=t(this[0]),o=i.data("tests");return t.map(i.data("buffer"),function(t,e){return o[e]?t:null}).join("")}r=t.extend({placeholder:"_",completed:null},r);var u=t.mask.definitions,o=[],l=a.length,f=null,s=a.length;return t.each(a.split(""),function(t,e){"?"==e?(s--,l=t):u[e]?(o.push(new RegExp(u[e])),null==f&&(f=o.length-1)):o.push(null)}),this.each(function(){function i(t){for(;++t<=s&&!o[t];);return t}function c(t){for(;!o[t]&&--t>=0;);for(var e=t;s>e;e++)if(o[e]){g[e]=r.placeholder;var n=i(e);if(!(s>n&&o[e].test(g[n])))break;g[e]=g[n]}k(),b.caret(Math.max(f,t))}function d(t){for(var e=t,n=r.placeholder;s>e;e++)if(o[e]){var a=i(e),u=g[e];if(g[e]=n,!(s>a&&o[a].test(u)))break;n=u}}function h(e){var a=t(this).caret(),r=e.keyCode;return y=16>r||r>16&&32>r||r>32&&41>r,a.start-a.end==0||y&&8!=r&&46!=r||m(a.start,a.end),8==r||46==r||n&&127==r?(c(a.start+(46==r?0:-1)),!1):27==r?(b.val(w),b.caret(0,p()),!1):void 0}function v(e){if(y)return y=!1,8==e.keyCode?!1:null;e=e||window.event;var n=e.charCode||e.keyCode||e.which,a=t(this).caret();if(e.ctrlKey||e.altKey||e.metaKey)return!0;if(n>=32&&125>=n||n>186){var u=i(a.start-1);if(s>u){var l=String.fromCharCode(n);if(o[u].test(l)){d(u),g[u]=l,k();var a=i(u);t(this).caret(a),r.completed&&a==s&&r.completed.call(b)}}}return!1}function m(t,e){for(var n=t;e>n&&s>n;n++)o[n]&&(g[n]=r.placeholder)}function k(){return b.val(g.join("")).val()}function p(t){for(var e=b.val(),n=-1,a=0,i=0;s>a;a++)if(o[a]){for(g[a]=r.placeholder;i++<e.length;){var u=e.charAt(i-1);if(o[a].test(u)){g[a]=u,n=a;break}}if(i>e.length)break}else g[a]==e.charAt(i)&&a!=l&&(i++,n=a);return!t&&l>n+1?(b.val(""),m(0,s)):(t||n+1>=l)&&(k(),t||b.val(b.val().substring(0,n+1))),l?a:f}var b=t(this),g=t.map(a.split(""),function(t,e){return"?"!=t?u[t]?r.placeholder:t:void 0}),y=!1,w=b.val();b.data("buffer",g).data("tests",o),b.attr("readonly")||b.one("unmask",function(){b.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){w=b.val();var t=p();k(),setTimeout(function(){t==a.length?b.caret(0,t):b.caret(t)},0)}).bind("blur.mask",function(){p(),b.val()!=w&&b.change()}).bind("keydown.mask",h).bind("keypress.mask",v).bind(e,function(){setTimeout(function(){b.caret(p(!0))},0)}),p()})}})}(jQuery);
/* <<< file end: js/jquery/jquery.mask.js */

//# map link was there [jquery.mask.js.map]
/* >>> file start: js/jquery/jquery.calendarEvents.js */
!function(e){var t={};e.fn.calendarEvents=function(n){function a(e,t){return"cache_"+e+t}function s(e,t){var n=this;this.calendar=e,this.events=null,this.options=t,this._ajaxActive=!1,this._currentDate;var s,i=function(t,i){"string"!=typeof e.data("noFetch")&&(clearTimeout(s),n._currentDate=a(t.getFullYear(),t.getMonth()+1),s=setTimeout(function(){n.fetchEvents(t.getFullYear(),t.getMonth()+1,i)},200))};this.calendar.bind("dateChange",function(e){var t=n.calendar[n.options.calendarType]("option","displayedMonth"),a=1===Math.abs(12*(e.date.getFullYear()-t.getFullYear())+(e.date.getMonth()-t.getMonth()));i(e.date,a)}),this.options.fetchOnFirstDisplay&&this.calendar.one("calendarshow",function(e){i(new Date,!0)})}var i={calendarType:"calendar",classNames:{idle:"idle"},fetchOnFirstDisplay:!1};return s.prototype={getEvents:function(e,t,n){var a={};return a[+e]={},a[+e][+t-1]=n,a},fetchEvents:function(n,s,i){i=arguments.length>=3?!!i:!0;var o=this,r=(this.calendar[this.options.calendarType]("option","displayedMonth"),this.calendar[this.options.calendarType]("getElement",i?"month":"year")),c=this.options.classNames.idle,l=!0,h=function(){o._ajaxActive||l||r.removeClass(c)};this.calendar[this.options.calendarType]("getElement","year").removeClass(c),this.calendar[this.options.calendarType]("getElement","month").removeClass(c),r.addClass(c),this._ajaxActive=!0,setTimeout(function(){l=!1,h()},500);var d=a(n,s);processResults=function(e){d===o._currentDate&&(o.events=t[d],o.calendar[o.options.calendarType]("option","events",o.getEvents(o.events.year,o.events.month,o.events.days)),o._ajaxActive=!1,h())},d in t?processResults(t[d]):e.getJSON(LiveJournal.getAjaxUrl("calendar"),{year:n,month:s},function(e){t[d]=e,processResults(e)})}},this.each(function(){new s(e(this),e.extend({},i,n))})}}(jQuery);
/* <<< file end: js/jquery/jquery.calendarEvents.js */

//# map link was there [jquery.calendarEvents.js.map]
/* >>> file start: js/core/angular/ref.js */
!function(e){return e}(),function(){"use strict";angular.module("LJ.Ref",[]).factory("Ref",function(){function e(e,n){return f[e]?void console.error("Ref element with id `%s` has been registered before.",e):void(f[e]=n)}function n(e){f[e]&&delete f[e]}function o(e){var n=f[e];return n||console.error("Ref `%s` not found.",e),n}function r(e,n){"undefined"==typeof n&&(n={});var r=o(e),f=angular.element("html, body");if(!r)return void console.error("Could not scroll to the ref `%s` that has not been already defined.",e);var l=r.offset().top;n.onlyUp&&angular.element(window).scrollTop()<=l||n.onlyOutOfScreen&&!t(r)||(n.toParent&&(f=r.parent(),l=0),f.animate({scrollTop:l}))}function t(e){var n=angular.element(window),o=n.scrollTop(),r=o+n.height(),t=e.offset().top;return t>r-100||o>t}var f={};return{add:e,remove:n,get:o,scrollTo:r}}).directive("ljRef",["Ref",function(e){return{restrict:"A",scope:!0,link:function(n,o,r){var t=r.ljRef;e.add(t,o),n.$on("$destroy",function(){e.remove(t)})}}}])}();
/* <<< file end: js/core/angular/ref.js */

//# map link was there [ref.js.map]
/* >>> file start: js/core/angular/bubble.js */
//= require js/core/angular/ref.js
Site.page.template['Widgets/ljBubble.tmpl'] = '<div\n    class=\"\n        b-popup\n        bubble-node\n        b-popup-withclosecontrol\n        b-bubble-{{bubble.name}}\n        \"\n    ng-show=\"show\"\n    lj-switch-off=\"show\"\n    lj-switch-off-action=\"bubble.close()\"\n    lj-switch-off-ignore-sticky=true\n    ng-style=\"{ left: position.x, top: position.y, visibility: visibility }\"\n    ng-class=\"{\n        \'b-popup-noclosecontrol\': !bubble.options.closeControl\n    }\"\n    lj-switch-off-skip>\n    <div class=\"b-popup-outer\">\n        <div class=\"b-popup-inner\">\n            <i class=\"i-popup-arr\" ng-class=\"arrowClass()\">\n                <i class=\"i-popup-arr-brdr-outer\">\n                    <i class=\"i-popup-arr-brdr-inner\">\n                        <i class=\"i-popup-arr-bg\"></i>\n                    </i>\n                </i>\n            </i>\n            <div ng-include src=\"template\"></div>\n            <i class=\"i-popup-close\" ng-click=\"bubble.close()\"></i>\n        </div>\n    </div>\n</div>\n';
Site.page.template['angular/confirm.bubble.ng.tmpl'] = '<div class=\"b-popup-content b-popup-options-centered\">\n  <div class=\"b-popup-content-header\">\n    <span>{{ bubble.options.header }}</span>\n  </div>\n  <div class=\"b-popup-content-confirm\" ng-bind-html=\"bubble.options.text\"></div>\n  <div class=\"b-popup-submit-options\">\n    <button class=\"b-popup-btn b-flatbutton b-flatbutton-simple\" ng-click=\"bubble.options.confirm()\">{{ bubble.options.yes }}</button>\n    <button class=\"b-popup-cancel b-flatbutton b-flatbutton-simple b-flatbutton-neutral\" ng-click=\"bubble.close()\">{{ bubble.options.no }}</button>\n  </div>\n</div>\n';
//= require_ml confirm.bubble.yes
//= require_ml confirm.bubble.no
!function(){"use strict";function e(e,o,t,n,r){return{scope:!0,link:function(i,l,a){function u(){var e=i.arrow.vertical,o=i.arrow.horizontal,t=L.aside,r=O.innerWidth<=650;i.visibility="hidden",L.keepInitialWidth&&!L.widthSaved&&(L.widthSaved=!0,j.width(j.width())),d(),p()&&!r&&(i.arrow.vertical="b"===e?f("alwaysTop")?"b":"t":f("alwaysBottom")?"t":"b",d(),h()&&!f("alwaysTop")&&(i.arrow.vertical="t",d())),v()&&!r&&(i.arrow.horizontal="l"===o?f("alwaysRight")||m()?"l":"r":f("alwaysLeft")||w()?"r":"l"),!r&&v()&&i.arrow.horizontal===o&&s()&&(L.aside=!0),r||i.arrow.horizontal===o&&i.arrow.vertical===e&&L.aside===t?i.visibility="visible":n(c)}function c(){return d(),v()&&s()?(L.aside=!0,i.$apply(),void c()):v()&&!f("aside")&&i.arrow.horizontal?(i.arrow.horizontal="",void c()):void(i.visibility="visible")}function s(){return!f("aside")&&f("tryAsideIfNoHorizSpace")}function f(e){return i.bubble.options[e]||L[e]}function d(){var o=e.node||l,t=o.offset().left+Math.floor(o.outerWidth()/2),n=i.bubble.options.forceX||0,r=i.bubble.options.forceY||0;f("aside")?(i.position.x="r"===i.arrow.horizontal?o.offset().left-j.outerWidth()-H.outerWidth()+n:o.offset().left+o.outerWidth()+H.outerWidth()+n,i.position.y=o.offset().top-H.position().top+(o.outerHeight()-H.outerHeight())/2+r):(i.position.x=i.arrow.horizontal?t-H.position().left-Math.floor(H.outerWidth()/2)-2+n:t-j.outerWidth()/2-Math.floor(H.outerWidth()/4)-2+n,i.position.y="t"===i.arrow.vertical?o.offset().top+o.outerHeight()+H.outerHeight()+r:o.offset().top-H.outerHeight()-j.outerHeight()+r)}function b(){i.position.x=-9999}function p(){return h()?!0:i.position.y+j.outerHeight()>O.scrollTop()+O.outerHeight()}function h(){return i.position.y<O.scrollTop()}function v(){return m()||w()}function m(){return i.position.x<O.scrollLeft()}function w(){return i.position.x+j.outerWidth()>O.scrollLeft()+O.outerWidth()}function y(o){o.preventDefault(),e.current!==L.name&&n(function(){e.open(L.name)})}function g(){$(),J&&(C=n(e.close,J))}function $(){n.cancel(C)}function z(){var o=L.name,t=e.current;o===t&&($(),e.close(),i.$apply())}function W(){i.show&&n(x)}var C,L=o(a.ljBubble)(i),B=L.name,j=t(r.get("ljBubble.tmpl"))(i),x=LJ.Function.throttle(u,50),H=j.find(".i-popup-arr"),O=angular.element(window),S=L.eventType||"click",J=Number(L.autoClose||0);i.show=!1,e._register(B,L),i.template=L.template||B+".html",i.bubble={name:B,close:e.close,options:e.options(B)},i.clear=function(){i.arrow={vertical:L.arrowInitialVertical||"t",horizontal:L.arrowInitialHorizontal||"l"}},i.position={x:-9999,y:-9999},i.visibility="hidden",i.arrowClass=function(){var e=i.bubble.options,o=i.arrow.vertical,t=i.arrow.horizontal;return e.aside||L.aside?"i-popup-arr"+t+o:"i-popup-arr"+o+t},i.$watch(function(){return e.current},function(e){b(),n(function(){i.show=e===B,e&&i.show&&(i.clear(),n(x))})},!0),L.disableClick||l.on(S,y),L.disableResizeListener||O.on("resize",W),L.recalculateOnOrientationChange&&O.on("orientationchange",function(){W(),O.on("resize",W),n(function(){O.off("resize",W)},1e3)}),L.recalculateOnScroll&&O.on("scroll",W),L.closeOnScroll&&O.on("scroll",z),angular.element("body").append(j),l.on("mouseleave",g),j.on("mouseenter",$),j.on("mouseleave",g),i.clear(),i.$on("$destroy",function(){l.off(S,y),O.off("resize",W),O.off("scroll",W),O.off("scroll",e.close),l.off("mouseleave",g),j.off("mouseenter",$),j.off("mouseleave",g),e._unregister(B),j.remove()})}}}function o(e,o,n,r,i,l){var a={},u={};return a.current=null,a.node=null,a.register=function(){function t(t,i){var a,u,c;return t&&t.name&&t.template?(a=t.name,t.disableClick=!0,r[a]?(r[a].count+=1,n.bind(null,a)):(u=angular.element("<div />").attr("lj-bubble",angular.toJson(t)),c="undefined"==typeof i,c&&(i=e.$new(!0)),u.appendTo("body"),o(u)(i),r[a]={count:1,node:u,scope:i,isScopeCreated:c},n.bind(null,a))):void l.error("Incorrect bubble options. You should provide name and template.",t)}function n(e){var o=r[e];o&&(o.count-=1,0===o.count&&(o.isScopeCreated||o.scope.$destroy(),o.node.remove(),delete r[e]))}var r={};return t}(),a.exists=function(e){return u.hasOwnProperty(e)},a._register=function(e,o){var t;if(u.hasOwnProperty(e))throw"Warning: bubble with name "+e+" has been registered before!";t=angular.isDefined(o)?angular.copy(o):{},t=angular.extend({closeControl:!0},t),u[e]=Object.create(t)},a._unregister=function(e){delete u[e],a.current===e&&(a.current=null)},a.confirm=function(e){function o(){i.scrollBy(0,1),i.scrollBy(0,-1)}var t=LJ.ml("confirm.bubble.yes"),n=LJ.ml("confirm.bubble.no"),l={closeControl:!1,confirm:e.confirm,header:e.header,text:e.text,yes:e.yes||t,no:e.no||n};a.open(e.id,l),r(o),r(o,100),r(o,200),r(o,300)},a.open=function(o,r,i){return u.hasOwnProperty(o)?(r instanceof jQuery&&(i=r,r={}),angular.isString(r)&&(i=n.get(r),r={}),angular.isObject(r)&&a.options(o,r),i instanceof jQuery&&(a.node=i),angular.isString(i)&&(a.node=n.get(i)),a.current=o,e.$broadcast("bubble:open",o,r,i),e.$broadcast("bubble:open:"+o,o,r,i),void angular.element("body").addClass(t)):void l.error("Bubble `"+o+"` can't be opened, it has not been registered yet.")},a.close=function(){var o,n=a.current,r=u[n];e.$broadcast("bubble:close",n,r,a.node),e.$broadcast("bubble:close:"+n,n,r,a.node);for(o in r)r.hasOwnProperty(o)&&delete r[o];a.current=null,a.node=null,angular.element("body").removeClass(t)},a.options=function(e,o){return"undefined"==typeof o||o===u[e]?u[e]:void angular.copy(o,u[e])},a}angular.module("LJ.Bubble",["LJ.Templates","LJ.Directives","LJ.Ref"]),angular.module("LJ.Bubble").factory("Bubble",o).directive("ljBubble",e);var t="p-openpopup";e.$inject=["Bubble","$parse","$compile","$timeout","$templateCache"],o.$inject=["$rootScope","$compile","Ref","$timeout","$window","$log"]}();
/* <<< file end: js/core/angular/bubble.js */

//# map link was there [bubble.js.map]
/* >>> file start: js/core/angular/activity.js */
!function(){"use strict";function t(t,n){function c(){return u}function e(t){u=t}function i(){n.cancel(o),e(!0),o=n(e.bind(this,!1),9e5)}var u,o;return i(),t.on("click touchstart touchend keydown mousemove mousewheel",LJ.Function.debounce(i,100,!0)),{isActive:c}}angular.module("LJ.Activity",[]),angular.module("LJ.Activity").factory("Activity",t),t.$inject=["$document","$timeout"]}();
/* <<< file end: js/core/angular/activity.js */

//# map link was there [activity.js.map]
/* >>> file start: js/core/angular/api.js */
//!= require js/core/angular/messages.js
//= require js/core/angular/activity.js
!function(){"use strict";function e(e,n,t,r,a,c){function i(e,n){return"undefined"==typeof n?e:e+angular.toJson(s(n))}function s(e){var n;return angular.isObject(e)?(n={},Object.keys(e).sort().forEach(function(t){n[t]=s(e[t])}),n):e}function o(e,n){f.remove(i(e,n))}function u(n,s,o,u){var g,l,p=r.defer(),d={cache:!1,silent:!1,meta:!1},m=!1;return c.isActive()?(angular.isObject(s)&&null!==s||(s={}),angular.isObject(o)&&(u=o,o=null),u=angular.extend(d,u||{}),l=i(n,s),u.cache&&(g=f.get(l),g&&(m=!0)),m||(g=p.promise,LJ.Api.call(n,s,function(n){e(function(){n.error?p.reject(n.error):p.resolve(n),t.$apply()},0)}),u.cache&&f.put(l,g)),LJ.Event.trigger("api:request:change",n,!0),g.then(function(){LJ.Event.trigger("api:request:change",n,!1)}),u.silent||g.then(function(e){var n={};"undefined"!=typeof e.message&&(angular.isString(e.message)?(n.body=e.message,n.type="success"):(n.body=e.message.content,n.type="success"),a.add(n))},function(e){"undefined"!=typeof e.message&&1!==e.code&&a.error({body:e.message})}),u.meta&&(g=g.then(function(e){return{response:e,fromCache:m}})),angular.isFunction(o)&&g.then(o),g):(p.reject(),p.promise)}var g={call:u,invalidate:o},f=n("LJApiPromises");return g}angular.module("LJ.Api",["LJ.Messages","LJ.Activity"]).factory("Api",e),e.$inject=["$timeout","$cacheFactory","$rootScope","$q","Messages","Activity"]}();
/* <<< file end: js/core/angular/api.js */

//# map link was there [api.js.map]
/* >>> file start: js/core/angular/options.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};angular.module("LJ.Options",[]).factory("Options",[function(){return{create:function(t){function n(n,o){"undefined"==typeof o?angular.extend(t,n):t[n]=o}function o(n){return t[n]}function e(){return t}if("undefined"==typeof t&&(t={}),"object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new TypeError("Options should be an object.");return{set:n,get:o,raw:e}}}}]);
/* <<< file end: js/core/angular/options.js */

//# map link was there [options.js.map]
/* >>> file start: js/core/angular/users.js */
//= require js/core/angular/api.js
//= require js/core/angular/options.js
!function(e){return e}(),function(){"use strict";angular.module("Users",["LJ.Api","LJ.Options"]).factory("Relations",["$q","$timeout","UsersCache",function(e,n,r){function t(t,i,u){var a=e.defer(),s={addFriend:{is_invite_sent:!0},removeFriend:{is_friend:!1},subscribe:{is_subscribedon:!0},unsubscribe:{is_subscribedon:!1},join:{is_invite_sent:!0},leave:{is_member:!1},setBan:{is_banned:!0},setUnban:{is_banned:!1}},o={addFriend:{is_invite_sent:!1},removeFriend:{is_friend:!0},subscribe:{is_subscribedon:!1},unsubscribe:{is_subscribedon:!0},join:{is_invite_sent:!1},leave:{is_member:!0},setBan:{is_banned:!1},setUnban:{is_banned:!0}},c=angular.copy(r.get(t)||{});return angular.isUndefined(u)&&(u={}),u.wait||r.update(t,s[i]||{}),LJ.Event.trigger("relations.change",{username:t,action:i,callback:function(e){n(function(){if(e.error)return u.wait||r.update(t,angular.extend(o[i],c)),void a.reject(e.error.message);var n=LJ.Object.pick(e,"is_banned","is_friend","is_member","is_subscriber","is_subscribedon","is_friend_of","is_invite_sent");r.update(t,n),a.resolve(e)})}}),a.promise}function i(e,n,i){var u=t(e,n?"subscribe":"unsubscribe",i);return n||u.then(function(){r.update(e,{filtermask:0})}),u}function u(e,n,r){return t(e,n?"addFriend":"removeFriend",r)}function a(e,n,r){return t(e,n?"join":"leave",r)}function s(e,n,r){return t(e,n?"setBan":"setUnban",r)}function o(e,n,r){return t(e,n?"banEverywhere":"unbanEverywhere",r)}return{toggleFriend:u,toggleSubscription:i,toggleMember:a,toggleBan:s,toggleBanEverywhere:o}}]).factory("Mask",function(){function e(e){return e>>>0}var n={};return n.change=function(n,r){var t=r.add,i=r.remove;return angular.isDefined(t)&&(angular.isArray(t)||(t=[t]),n=t.reduce(function(n,r){return e(n|Math.pow(2,r))},n)),angular.isDefined(i)&&(angular.isArray(i)||(i=[i]),n=i.reduce(function(n,r){var t=Math.pow(2,32)-1-Math.pow(2,r);return e(n&t)},n)),n},n.check=function(e,n){var r=Math.pow(2,n);return Boolean(e&r)},n}).factory("UsersCache",["$q","$cacheFactory","Options",function(e,n,r){function t(e){if(!angular.isUndefined(e)){var n=l.get(f.get("journal"))||{},r=e;return angular.isArray(e)||(e=[e]),e.forEach(function(e){if(e&&angular.isObject(e)&&!angular.isUndefined(e.username)){var r=e.display_username||e.username,t=n[r];n[r]=t?angular.extend(t,e):e}}),l.put(f.get("journal"),n),r}}function i(e){var n=l.get(f.get("journal"));return Boolean(n[e])}function u(e){var n;if(angular.isString(e))return n=l.get(f.get("journal")),n&&n[e]?n[e]:null;if(angular.isFunction(e))return s(e);if(angular.isUndefined(e))return s();throw new TypeError("Incorrect argument passed.")}function a(e){var n=l.get(f.get("journal"));return n||angular.isObject(n)?Object.keys(n).reduce(function(r,t){return String(n[t].id)===String(e)?n[t]:r},null):null}function s(e){var n,r=l.get(f.get("journal")),t=[];for(n in r)if(r.hasOwnProperty(n)){if(e&&!e(r[n]))continue;t.push(r[n])}return t}function o(e,n){var r=u(e)||{username:e};return angular.extend(r,n),t(r),r}var c,l=n("users"),f=r.create({journal:LJ.get("remoteUser")});return c={add:t,update:o,set:f.set,get:u,getById:a,exists:i}}]).factory("Users",["$q","$timeout","Api","Mask","UsersCache","Options",function(e,n,r,t,i,u){function a(e){return k[C.get("type")][e]}function s(e){return"subscriptions"===C.get("type")?Boolean(e.is_subscribedon):!0}function o(e,n){return angular.isUndefined(n)?e[c()]||1:void(e[c()]=n)}function c(){return"subscriptions"===C.get("type")?"filtermask":"groupmask"}function l(e,n,t){return r.call("user.get",{target:e,fields:n},t).then(function(e){var n=e.user;return i.add(n),n})}function f(e,n,t){return r.call("user.get",{targetid:e,fields:n},t).then(function(e){var n=e.user;return i.add(n),n})}function d(e,n){return r.call("relations.list_friends",{journal:C.get("journal"),fields:e},n).then(_("is_friend"))}function g(e){return r.call("groups.list_users",{journal:C.get("journal"),fields:e}).then(function(e){return i.add(e.users),e})}function p(e){return r.call("relations.list_subscriptions",{journal:C.get("journal"),fields:e}).then(_("is_subscribedon"))}function b(e){return r.call("relations.list_banned",{journal:C.get("journal"),fields:e}).then(_("is_banned"))}function _(e){return function(n){var r=n.users;return r.forEach(LJ.Function.set(e,!0)),i.add(r),r}}function v(e){return r.call("relations."+e+"_count").then(function(e){return e.count})}function h(n){return angular.isArray(n)||(n=[n]),0===n.length?e.reject("You should provide users to sync."):r.call(a("update"),{users:n,journal:C.get("journal")}).then(function(e){return i.add(e.users),e})}function m(e,n){var r=i.get(e);return r?t.check(o(r),n):!1}function j(e){return e.filter(i.exists).map(i.get).filter(s)}function y(e){var n=(e.filter||"").toLowerCase(),r=i.get(function(r){return s(r)&&t.check(o(r),e.id)?!n||-1!==r.display_username.toLowerCase().indexOf(n):!1});return e.limit&&(r=r.slice(0,e.limit)),r}function U(e){var n=(e.filter||"").toLowerCase(),r=i.get(function(r){return s(r)?t.check(o(r),e.id)?!1:!n||-1!==r.display_username.toLowerCase().indexOf(n):!1});return e.limit&&(r=r.slice(0,e.limit)),r}function w(e,n){angular.isArray(n)||(n=[n]);var r;return r="subscriptions"===C.get("type")?j(n):n.map(function(e){return i.get(e)||{username:e}}),r.forEach(function(n){o(n,t.change(o(n),{add:e}))}),h(r)}function L(e,n,r){angular.isArray(n)||(n=[n]);var i=j(n);return i.forEach(function(n){o(n,t.change(o(n),{remove:e}))}),r&&r.silent?void 0:h(i)}function E(e,n){return i.update(e,{alias:n}),r.call("user.alias_set",{target:e,alias:n})}function F(e){return function(n,r){return n[e].toLowerCase().localeCompare(r[e].toLowerCase())}}function O(){var e,n=C.get("journal");C.set.apply(null,arguments),e=C.get("journal"),e!==n&&i.set("journal",e)}var k={friends:{read:"relations.list_friends",readOne:"relations.get_friend",update:"groups.update_users"},subscriptions:{read:"relations.list_subscriptions",readOne:"relations.get_subscription",update:"filters.update_users"}},C=u.create({type:"friends",journal:LJ.get("remoteUser")});return{USERHEAD_FIELDS:{alias:1,journal_url:1,profile_url:1,userhead_url:1,is_invisible:1,journaltype:1},set:O,get:C.get,Cache:i,fetchUser:l,fetchUserById:f,fetchBanned:b,fetchFriends:d,fetchGroupUsers:g,fetchSubscriptions:p,fetchCount:v,sync:h,alias:E,isUserInGroup:m,getExisting:j,fromGroup:y,outOfGroup:U,addToGroup:w,removeFromGroup:L,comparator:F}}])}();
/* <<< file end: js/core/angular/users.js */

//# map link was there [users.js.map]
/* >>> file start: js/core/angular/ljUser.js */
//= require js/core/angular/api.js
//= require js/core/angular/users.js
Site.page.template['angular/ljUser.ng.tmpl'] = '<span\n    class=\"\n        ljuser\n        i-ljuser\n        i-ljuser-type-{{user.journaltype}}\n        \"\n    ng-class=\"{\n        \'i-ljuser-deleted\': user.is_invisible,\n        \'i-ljuser-nopopup noctxpopup\': user.noctxpopup,\n        \'i-ljuser-withalias\': user.alias,\n        \'i-ljuser-showalias\': user.showalias\n    }\"\n    data-ljuser=\"{{user.username}}\"\n    lj:user=\"{{user.username}}\"\n    ><!--\n\n    Userhead\n    --><a\n        class=\"i-ljuser-profile\"\n        ng-href=\"{{user.profile_url}}\"\n        ng-attr-target=\"{{user.target ? user.target : \'_self\'}}\"\n        ><!--\n        --><img\n            class=\"i-ljuser-userhead\"\n            ng-src=\"{{user.userhead_url}}\"\n            ><!--\n    --></a><!--\n\n    Username\n    --><a\n        class=\"i-ljuser-username\"\n        ng-href=\"{{user.journal_url}}\"\n        ng-attr-title=\"{{user.display_username || user.alias}}\"\n        ng-attr-target=\"{{user.target ? user.target : \'_self\'}}\"\n        ><b ng-bind=\"user.display_name || user.display_username\"></b></a><!--\n\n    Alias\n    --><span\n        class=\"i-ljuser-alias\"\n        ng-bind=\"user.alias\"\n        ></span><!--\n\n--></span>\n';
!function(){"use strict";function e(e,r,n,t,a,s,u){function l(e){var r=n.defer(),t=u.Cache.get(e);return t&&t.userhead_url?(r.resolve(t),r.promise):u.fetchUser(e,u.USERHEAD_FIELDS,{cache:!0,silent:!0})}function i(e){var r=n.defer(),t=u.Cache.getById(e);return t&&t.userhead_url?(r.resolve(t),r.promise):u.fetchUserById(e,u.USERHEAD_FIELDS,{cache:!0,silent:!0})}function c(r,t){var i=n.defer(),c=e.$new();return l(r).then(function(){var e;c.user=angular.extend({},u.Cache.get(r),t||{}),e=a(d)(c),s(function(){i.resolve(p.empty().append(e).html()),c.$destroy()})}),i.promise}function o(r,t){var l=n.defer(),c=e.$new();return i(r).then(function(){var e;c.user=angular.extend({},u.Cache.getById(r),t||{}),e=a(d)(c),s(function(){l.resolve(p.empty().append(e).html()),c.$destroy()})}),l.promise}var p=angular.element("<div />"),d=t.get("ljUser.ng.tmpl");return{prepare:l,prepareById:i,getById:o,get:c}}function r(e,r,n){return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(t,a){var s=e(a.ljUserDynamic),u=e(a.ljUserDynamicOptions);return function(e){var t=u(e);e.$watch(function(){return s(e)},function(a){var s=a;e.user=angular.extend({username:s,display_username:s},t||{}),n.prepare(s).then(function(){e.$watch(function(){return r.Cache.get(s)},function(r){angular.extend(e.user,r)},!0)})})}}}}function n(e,r,n){return{template:'<img class="{{user.class}}" src="https://l-userpic.livejournal.net/default/{{user.id}}" alt="" />',scope:!0,compile:function(t,a){return function(t){var s=e(a.ljUserAvatarImg)(t),u=e(a.ljUserAvatarImgOptions)(t),l=+s;return NaN!==l&&s.toString().length===l.toString().length?void(t.user=angular.extend({id:s},u||{})):(function(e){return e}(),t.user=angular.extend({username:s},u||{}),void n.prepare(s).then(function(e){t.$watch(function(){return r.Cache.get(s)},function(e){angular.extend(t.user,e)},!0)}))}}}}function t(e,r,n){return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(t,a){return function(t){var s=e(a.ljUserById)(t),u=e(a.ljUserByIdOptions)(t);t.user=angular.extend({username:"user-"+s,display_username:"user-"+s},u||{}),n.prepareById(s).then(function(){t.$watch(function(){return r.Cache.getById(s)},function(e){angular.extend(t.user,e)},!0)})}}}}function a(e){var r="https:";return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(n,t){var a=e(t.ljUserStatic),s=e(t.ljUserStaticId),u=e(t.ljUserStaticOptions);return function(e){var n=a(e),t=s(e),l=u(e)||{},i=l.journal_url||r+"//"+n+".livejournal.com/",c=r+"//"+n+".livejournal.com/profile";"zyalt"===n&&(c=i+"profile",n="varlamov.ru"),e.user={alias:"",display_name:l.display_name||n,display_username:l.display_username||n,id:t,is_invisible:!1,journal_url:i,journaltype:"P",profile_url:c,userhead_url:r+"//l-files.livejournal.net/userhead/default/"+t,username:n,noctxpopup:l.noctxpopup}}}}}function s(e,r){var n="https:";return{template:'\n        <img\n          class="{{user.class}}"\n          ng-src="'+n+'//l-userpic.livejournal.net/default/{{user.id}}"\n          alt=""\n        />',scope:!0,compile:function(r,n){var t=e(n.ljUserAvatarStaticId),a=e(n.ljUserAvatarStaticOptions);return function(e){var r=t(e),n=a(e);e.user={id:r,"class":n["class"]||""}}}}}a.$inject=["$parse"],s.$inject=["$parse","$location"],angular.module("LJ.User",["LJ.Api","LJ.Templates","Users"]),angular.module("LJ.User").factory("ljUser",e).directive("ljUserById",t).directive("ljUserDynamic",r).directive("ljUserAvatarImg",n).directive("ljUserStatic",a).directive("ljUserAvatarStatic",s),e.$inject=["$rootScope","Api","$q","$templateCache","$compile","$timeout","Users"],r.$inject=["$parse","Users","ljUser"],n.$inject=["$parse","Users","ljUser"],t.$inject=["$parse","Users","ljUser"]}();
/* <<< file end: js/core/angular/ljUser.js */

//# map link was there [ljUser.js.map]
/* >>> file start: js/settings/services/filters/filters.js */
//= require js/core/angular/api.js
//= require js/core/angular/options.js
//= require js/core/angular/users.js
!function(t){return t}(),function(){"use strict";angular.module("GroupsAndFilters.Services.Filters",["LJ.Api","LJ.Options","Users"]).filter("filtersOrder",function(){return function(t){var r=t.slice(0);return r.sort(function(t,r){if(31===t.id)return-1;if(31===r.id)return 1;var e=t.name.toLowerCase(),i=r.name.toLowerCase();return e>i?1:-1}),r}}).factory("FilterGroupFactory",["$q","$timeout","Api","Options","Users",function(t,r,e,i,n){function o(){angular.extend(this,{MAX_COUNT:31,filters:[],key:"filters",rpc:{}},i.create({journal:LJ.get("remoteUser")}))}return o.prototype.toJSON=function(t){var r=angular.copy(t);return delete r.checked,delete r.users,r},o.prototype.nextId=function(){for(var t=null,r=this.filters.map(LJ.Function.get("id")),e=1,i=this.MAX_COUNT;i>e&&null===t;)-1===r.indexOf(e)&&(t=e),e+=1;return t},o.prototype.sync=function(t){var r={};return angular.isArray(t)||(t=[t]),r[this.key]=t.map(this.toJSON),r.journal=this.get("journal"),e.call(this.rpc.update,r)},o.prototype.fetch=function(r){if(!this.rpc.read)return t.reject();var i=this,n={journal:this.get("journal")};return r=angular.extend(r||{},{cache:!1}),e.call(this.rpc.read,n,r).then(function(t){return i.filters=t[i.key],i.filters})},o.prototype._isNameUniq=function(t){var r=this.filters.map(function(t){return t.name.toLowerCase()});return t=t.toLowerCase(),-1===r.indexOf(t)},o.prototype.create=function(r){var i;return r=r.trim(),0===r.length?t.reject("filters"===this.key?LJ.ml("api.error.filters.filter_name_not_specified"):LJ.ml("api.error.groups.group_name_not_specified")):this._isNameUniq(r)?(i={id:this.nextId(),name:r,users:[],"public":!1,journal:this.get("journal")},this.filters.push(i),e.call(this.rpc.create,i)):t.reject("filters"===this.key?LJ.ml("api.error.filters.filter_already_exist",{name:r}):LJ.ml("api.error.groups.group_already_exist",{name:r}))},o.prototype.remove=function(t){var r=this,i={};return t=Array.isArray(t)?t:[t],i[this.key]=t.map(LJ.Function.get("id")),i.journal=this.get("journal"),t.forEach(function(t){r.filters.splice(r.filters.indexOf(t),1)}),e.call(this.rpc.remove,i)},o.prototype.getCount=function(){return e.call(this.rpc.count,{journal:this.get("journal")}).then(LJ.Function.get("count"))},o.prototype.by=function(t){var r=n.Cache.get(t);return r?this.filters.filter(function(r){return n.isUserInGroup(t,r.id)}):[]},o}]).factory("Filter",["FilterGroupFactory",function(t){function r(){this.rpc={create:"filters.create",update:"filters.update",remove:"filters.remove",count:"filters.count"},this.key="filters"}return r.prototype=new t,r.prototype._setPrivacy=function(t,r){return t=Array.isArray(t)?t:[t],t.forEach(LJ.Function.set("public","public"===r)),this.sync(t)},r.prototype["private"]=function(t){return this._setPrivacy(t,"private")},r.prototype["public"]=function(t){return this._setPrivacy(t,"public")},new r}]).factory("Group",["FilterGroupFactory",function(t){function r(){this.rpc={create:"groups.create",read:"groups.list",update:"groups.update",remove:"groups.remove",count:"groups.count"},this.key="groups"}return r.prototype=new t,new r}])}();
/* <<< file end: js/settings/services/filters/filters.js */

//# map link was there [filters.js.map]
/* >>> file start: js/settings/directives/filtersFor.js */
//!= require js/core/angular/messages.js
LJ.injectStyle('/* >>> file start: stc/widgets/filter-settings.css */\n.b-filterset{max-width:290px;font:14px/1.4 Arial,sans-serif;color:#000}.b-filterset-addnew-input,.b-filterset-list LABEL{display:block;white-space:nowrap;line-height:1.333}.b-filterset B,.b-filterset CODE,.b-filterset DD,.b-filterset DIV,.b-filterset DT,.b-filterset EM,.b-filterset I,.b-filterset KBD,.b-filterset LABEL,.b-filterset LI,.b-filterset P,.b-filterset PRE,.b-filterset SPAN,.b-filterset STRONG,.b-filterset TD,.b-filterset TH{font-size:100%}.b-filterset .i-ljuser-userhead{vertical-align:top!important;margin:1px 0 0!important;border:none!important}.b-filterset .i-ljuser-username:active,.b-filterset .i-ljuser-username:hover,.b-filterset .i-ljuser-username:link,.b-filterset .i-ljuser-username:visited{color:#0051B7!important;text-decoration:none!important;border:none!important}.b-filterset .b-filterset-subtitle,.b-filterset .b-filterset-title{margin:0 1.142em .5em 0!important;color:#222!important}.b-filterset .b-filterset-title{font-weight:700!important}.b-filterset-list{position:relative;z-index:1;overflow:auto;max-height:14em;min-width:220px;margin:0 0 .3em;padding:0;background-attachment:scroll;background-clip:border-box;background-image:-webkit-radial-gradient(50% 0,farthest-side,rgba(0,0,0,.1),transparent),-webkit-radial-gradient(50% 100%,farthest-side,rgba(0,0,0,.1),transparent);background-image:radial-gradient(farthest-side at 50% 0,rgba(0,0,0,.1),transparent),radial-gradient(farthest-side at 50% 100%,rgba(0,0,0,.1),transparent);background-origin:padding-box;background-position:0 0,0 100%;background-repeat:no-repeat;background-size:100% 7px}.b-filterset-list:after,.b-filterset-list:before{position:relative;z-index:-1;display:block;content:\"\";height:14px;margin:0 0 -14px;background:-webkit-linear-gradient(top,#F4F5F6,#F4F5F6 30%,rgba(244,245,246,0));background:linear-gradient(to bottom,#F4F5F6,#F4F5F6 30%,rgba(244,245,246,0))}.b-filterset-list:after{margin:-14px 0 0;background:-webkit-linear-gradient(top,rgba(228,229,233,0),#E4E5E9 70%,#E4E5E9);background:linear-gradient(to bottom,rgba(228,229,233,0),#E4E5E9 70%,#E4E5E9)}.b-filterset-list LI{margin:0;padding:0;list-style-type:none}.b-filterset-list LI.loading{background:url(/img/preloader/preloader-blue-gray.gif?v=16423) 100% 50% no-repeat}.b-filterset-list LABEL{font-size:.857em}.b-filterset-list LABEL:hover{background:#7292BD;color:#FFF}.b-filterset-addnew-input{margin:0 0 .5em;font-size:.857em}.b-filterset-addnew{margin:.5em 0 0}.b-filterset-pseudo{font-size:.857em;color:#0051B7}.b-filterset-submit{text-align:right}.b-filterset-loader:after,.b-filterset-loader:before{display:inline-block;visibility:hidden;content:\'\';width:21px;height:21px;margin:-2px 0 0 4px;background:url(/img/preloader/preloader-blue-gray.gif?v=16423) 50% 50% no-repeat;vertical-align:middle}.b-filterset-loader-after:before,.b-filterset-loader-before:after{display:none}.b-filterset-loading .b-filterset-loader-after:after,.b-filterset-loading .b-filterset-loader-before:before{visibility:visible}\n/* <<< file end: stc/widgets/filter-settings.css */\n\n/*# sourceMappingURL=filter-settings.css.map */\n');
Site.page.template['angular/controlstrip/filters.ng.tmpl'] = '<div class=\"b-filterset-body\" ng-class=\"{ \'b-filterset-loading\': model.loading }\">\n    <ul class=\"b-filterset-section b-filterset-list\">\n        <li ng-repeat=\"filter in filters | filtersOrder\" ng-class=\"{ \'loading\': loading[filter.id] }\">\n            <label>\n                <input\n                    ng-checked=\"checked = isActive(filter.id)\"\n                    ng-change=\"toggleFilter(filter.id, checked)\"\n                    ng-model=\"checked\"\n                    type=\"checkbox\"\n                    class=\"b-filterset-checkbox\"\n                    >{{filter.name}}\n            </label>\n        </li>\n\n        <li ng-show=\"model.showCreateDialog\">\n            <span class=\"b-filterset-addnew-input\" >\n                <form ng-submit=\"createFilter()\">\n                    <input\n                        ng-model=\"model.newFilter\"\n                        focus-and-select=\"model.showCreateDialog\"\n                        type=\"text\"\n                        />\n                    <input type=\"submit\" lj-ml=\"filterset.button.save\" lj-ml-attr=\"value\" />\n                </form>\n            </span>\n        </li>\n    </ul>\n\n    <div\n        ng-hide=\"model.showCreateDialog || isFiltersCountReached()\"\n        class=\"b-filterset-section b-filterset-addnew\">\n        <span\n            ng-if=\"isFiltersFor\"\n            ng-click=\"model.showCreateDialog = true\"\n            lj-ml=\"filterset.link.addnewfilter\"\n            class=\"b-filterset-pseudo b-pseudo\"\n            ></span>\n        <span\n            ng-if=\"isGroupsFor\"\n            ng-click=\"model.showCreateDialog = true\"\n            lj-ml=\"filterset.link.addnewgroup\"\n            class=\"b-filterset-pseudo b-pseudo\"\n            ></span>\n    </div>\n</div>\n';
!function(e){return e}(),function(){"use strict";function e(e,r,t,n,o,i){function l(){return Array.isArray(e.usernames)?e.usernames:[e.usernames]}e.loading={},e.filters=[],t.fetch({cache:!0}).then(function(r){e.filters=r}),e.model={newFilter:"",showCreateDialog:!1},e.toggleFilter=function(r,t){var o;i.clear(),e.loading[r]=!0,o=t?n.addToGroup(r,l()):n.removeFromGroup(r,l()),o.then(function(){e.loading[r]=!1})},e.isActive=function(e){var r=l().every(function(r){return n.isUserInGroup(r,e)});return r},e.isCountReached=function(){return e.filters.length>=t.MAX_COUNT},e.createFilter=function(){var r=e.model.newFilter.trim();e.resetFilter(),0!==r.length&&(e.model.loading=!0,t.create(r).then(function(r){var t=r.filter;n.addToGroup(t.id,l()).then(function(){e.model.loading=!1})}))},e.resetFilter=function(){e.model.newFilter="",e.model.showCreateDialog=!1},e.$on("bubble:open:controlstrip",e.resetFilter)}angular.module("Filters.List",[]).controller("FiltersForCtrl",["$scope","$q","Filter","Users","Bubble","Messages",e]).controller("GroupsForCtrl",["$scope","$q","Group","Users","Bubble","Messages",e]).directive("filtersFor",[function(){return{controller:"FiltersForCtrl",scope:{usernames:"=filtersFor"},templateUrl:"filters.ng.tmpl",link:function(e){e.isFiltersFor=!0}}}]).directive("groupsFor",[function(){return{controller:"GroupsForCtrl",scope:{usernames:"=groupsFor"},templateUrl:"filters.ng.tmpl",link:function(e){e.isGroupsFor=!0}}}])}();
/* <<< file end: js/settings/directives/filtersFor.js */

//# map link was there [filtersFor.js.map]
/* >>> file start: js/relations/menu.js */
//= require js/core/angular/bubble.js
//= require js/core/angular/ljUser.js
//!= require js/core/angular/messages.js
//= require js/settings/services/filters/filters.js
//= require js/core/angular/users.js
//= require js/settings/directives/filtersFor.js
Site.page.template['angular/controlstrip/controlstrip.ng.tmpl'] = '<div\n  class=\"b-filterset\"\n  ng-class=\"{ \'b-filterset-loading\': loading }\"\n  >\n\n  <!-- subscribe user -->\n  <div class=\"b-filterset-title\" ng-show=\"mode == \'subscribe\'\" lj-ml=\"filterset.title.subscribed.journal\" lj-ml-resolve=\"mlResolve\"></div>\n\n  <!-- add user -->\n  <div class=\"b-filterset-title\" ng-show=\"mode == \'add\'\" lj-ml=\"filterset.title.addfriend.journal\" lj-ml-resolve=\"mlResolve\"></div>\n  <div class=\"b-filterset-subtitle\" ng-show=\"mode == \'add\'\" lj-ml=\"filterset.subtitle.addfriend.journal\" lj-ml-resolve=\"mlResolve\"></div>\n\n  <!-- subscribe community -->\n  <div class=\"b-filterset-title\" ng-show=\"mode == \'watch\'\" lj-ml=\"filterset.title.subscribed.community\" lj-ml-resolve=\"mlResolve\"></div>\n\n  <!-- join community -->\n  <div class=\"b-filterset-title\" ng-show=\"mode == \'join\' || mode == \'joinSubscribed\'\" lj-ml=\"filterset.title.join\"></div>\n  <div class=\"b-filterset-subtitle\" ng-show=\"mode == \'join\'\" lj-ml=\"filterset.subtitle.join\" lj-ml-resolve=\"mlResolve\"></div>\n  <div class=\"b-filterset-section b-filterset-submit\" ng-show=\"mode == \'join\'\">\n      <div class=\"b-ljbutton b-filterset-loader b-filterset-loader-before\">\n          <input type=\"submit\" lj-ml=\"filterset.submit.subscribe\" lj-ml-attr=\"value\" ng-click=\"subscribeAfterJoin()\" />\n      </div>\n  </div>\n\n  <!-- filters section -->\n  <!-- Notice: extra div here is because of bug in AngularJS: https://github.com/angular/angular.js/issues/3981 -->\n\n  <div ng-show=\"mode !== \'join\'\">\n    <div\n      class=\"b-filterset-subtitle b-filterset-loader b-filterset-loader-after\"\n      lj-ml=\"filterset.subtitle.filters\"\n      ></div>\n      <div filters-for=\"username\"></div>\n  </div>\n</div>\n';
!function(e){return e}(),function(e){"use strict";function t(e){LJ.Track.event("Relations","Menu",e)}angular.module("Relations.Menu",["LJ.Templates","LJ.Bubble","LJ.Directives","LJ.User","LJ.Messages","GroupsAndFilters.Services.Filters","Users","Filters.List"]).value("$anchorScroll",null).controller("MenuCtrl",["$scope","Bubble","$timeout","$q","ljUser","Filter","Users","Relations","Messages",function(n,s,r,i,o,u,c,a,l){function b(e,t){var s;switch(t&&d(t),e){case"addFriend":s=a.toggleFriend(h,!0,{wait:!0});break;case"removeFriend":s=a.toggleFriend(h,!1,{wait:!0});break;case"join":s=a.toggleMember(h,!0,{wait:!0});break;case"leave":s=a.toggleMember(h,!1,{wait:!0});break;case"subscribe":s=a.toggleSubscription(h,!0,{wait:!0});break;case"unsubscribe":s=a.toggleSubscription(h,!1,{wait:!0})}return s["finally"](m).then(function(t){return ContextualPopup.currentElement===v.find(".ljuser img").get(0)&&ContextualPopup.hide(),t.error?i.reject(t.error.message):(t.message&&(t.message.body=t.message.content,l.add(t.message)),"undefined"!=typeof t.controlstrip_status&&(n.status=t.controlstrip_status),"subscribe"===e||"addFriend"===e||"join"===e&&t.is_subscribedon?f():void(n.filters=[]))},function(e){l.error({body:e})})}function f(){var e,t=c.Cache.get(h);return t.is_subscribedon?(e=t.filtermask?i.defer().resolve():c.fetchUser(h,{filtermask:1}),i.all({filters:u.fetch({cache:!0}),user:e}).then(function(e){n.filters=e.filters})):i.reject()}function d(e){g&&m(),g=(new Hourglass).setEvent(e).show()}function m(){g&&(g.remove(),g=null)}var g,p,v=e(".w-cs-status"),h=LJ.get("journal.username");c.set({type:"subscriptions"}),n.username=h,n.filters=[],n.status=LJ.get("controlstrip.status"),c.Cache.add(LJ.get("journal")),ContextualPopup.showNote=angular.identity,p=i.defer(),n.mlResolve={promise:p.promise},o.get(h,{noctxpopup:!0}).then(function(e){p.resolve({username:e})}),n.$watch(function(){return c.Cache.get(h)},function(e){n.states=LJ.Object.pick(e,"is_friend","is_member","is_subscribedon","is_invite_sent")},!0),n.toggleLoading=function(e){n.loading=e},LJ.Event.on("relations.change",function(){r(l.clear)}),n.subscribe=function(e){e.preventDefault(),t("subscribe"),b("subscribe",e).then(function(){n.states.is_subscribedon&&(n.mode="subscribe",s.open("controlstrip","unsubscribe"))})},n.unsubscribe=function(e){e.preventDefault(),t("unsubscribe"),b("unsubscribe",e)},n.addFriend=function(e){e.preventDefault(),t("add friend"),b("addFriend",e).then(function(){n.states.is_friend&&(n.mode="add",s.open("controlstrip","removeFriend"))})},n.removeFriend=function(e){e.preventDefault(),t("remove friend"),b("removeFriend",e)},n.watch=function(e){e.preventDefault(),t("subscribe to community"),b("subscribe",e).then(function(){n.states.is_subscribedon&&(n.mode="watch",s.open("controlstrip","unwatch"))})},n.unwatch=function(e){e.preventDefault(),t("unsubscribe from community"),b("unsubscribe",e)},n.join=function(e){e.preventDefault(),t("join community"),b("join",e).then(function(){n.states.is_member&&(n.mode=n.states.is_subscribedon?"joinSubscribed":"join",s.open("controlstrip","leave"))})},n.leave=function(e){e.preventDefault(),t("leave community"),b("leave",e)},n.subscribeAfterJoin=function(){n.toggleLoading(!0),t("subscribe to community (after join)"),b("subscribe").then(function(){n.toggleLoading(!1),n.mode="watch"})}}])}(jQuery);
/* <<< file end: js/relations/menu.js */

//# map link was there [menu.js.map]
/* >>> file start: js/controlstrip.js */
//= require js/jquery/jquery.calendarEvents.js
//= require js/relations/menu.js
!function(e){return e}(),function(e){"use strict";function o(){var o,t,n,l;LJ.get("remoteUser")&&(o=e(".s-header .s-header-extra-filter, #lj_controlstrip_new .w-cs-filter-inner"),0!==o.length&&(t=e("#sortByPoster"),n=t.find("[name=poster]"),l=t.find("[type=image]"),o.bubble({target:".s-header .w-cs-filter-icon, #lj_controlstrip_new .w-cs-filter-icon",showOn:"click",closeControl:!0,classNames:{containerAddClass:"b-bubble-filter"}}),n.input(function(){this.value.length?l.css("opacity",1).prop("disabled",!1):l.css("opacity",0).prop("disabled",!0)}),t.on("submit",function(e){n.val().length||e.preventDefault()})))}function t(){e(".s-header input[placeholder], #lj_controlstrip_new input[placeholder]").labeledPlaceholder()}function n(){o(),t(),LJ.Flags.isEnabled("new_friends_and_subscriptions")&&!l&&angular.bootstrap(e("[data-controlstrip]"),["Relations.Menu"]),function(){function o(e){var o=e.split(",").map(Number);return new Date(o[0],o[1],o[2])}var t=e(".s-header .w-cs-i-calendar a, #lj_controlstrip_new .w-cs-i-calendar a"),n=/^\/friends/.test(location.pathname),l=LJ.get("current_journal.url_journal"),r=LJ.get("controlstrip.calendar.earlyDate"),a=LJ.get("controlstrip.calendar.lastDate");t.length&&(t.calendar({showOn:"click",closeControl:!0,bubbleClass:!0,dayRef:l+"/"+(n?"friends/":"")+"%Y/%M/%D",allRefs:n,startMonth:r?o(LJ.get("controlstrip.calendar.earlyDate")):new Date,endMonth:a?o(LJ.get("controlstrip.calendar.lastDate")):new Date,classNames:{container:"w-cs-calendar"},ml:{caption:LJ.ml("web.controlstrip.view.calendar")}}).on("daySelected",function(e){e.preventDefault()}),n||t.calendarEvents({fetchOnFirstDisplay:!0}))}(),e(".b-loginpopup").bubble({target:".i-auth-control",closeControl:!1,showOn:"click"}),LJ.Flags.isEnabled("move_billboard_to_scheme")&&e("body").on("ljsale-load ljsale-slotRenderEnded",function(){var o=e("body > .s-header").height();o&&e("body").css("padding-top",o)}),e("input.text").labeledPlaceholder(),e("html").trigger("controlstrip-initialized")}var l=Boolean("undefined"!=typeof document.documentMode&&document.documentMode<8);e(function(){return 0!==e(".s-header, #lj_controlstrip_new").length||"xcolibur"===Site.page.scheme?void n():void e.get(LiveJournal.getAjaxUrl("controlstrip"),{user:LJ.get("currentJournal")},function(o){e(".body-content").length?e(o).prependTo(".body-content"):(e("html").removeClass("html-adaptive"),e(o).appendTo(document.body)),n()})}),e(function(){function o(o){var t=e("."+r.showElem+":not("+o+")");e(t).removeClass(r.showElem)}function t(){var o=e("."+r.showElem);o.length>0?e(l.bodyElem).addClass(r.showFader):e(l.bodyElem).removeClass(r.showFader)}function n(){var o=e("."+r.showElem);o.length>0?a.catchBlur=!0:a.catchBlur=!1}var l={bodyElem:e("body"),controls:e(".js--show-elem"),controlsHover:e(".js--show-elem-by-hover"),fader:e(".b-fader")},r={control:"js--show-elem",controlHover:"js--show-elem-by-hover",showElem:"js--is-shown",showFader:"js--show-fader",catchBlur:"js--catch-blur"},a={catchBlur:!1};e(document).on("click",function(){a.catchBlur&&o()}),e(l.controlsHover).hover(function(){var o=e(this).find("."+r.control),t={selector:e(o).data("elem")};e(t.selector).addClass(r.showElem)},function(){var o=e(this).find("."+r.control),t={selector:e(o).data("elem")};e(t.selector).removeClass(r.showElem),e(this).addClass(r.controlHover)}),e(l.controls).on("click",function(l){var a={selector:e(this).data("elem"),isShowFader:e(this).data("fader")||!1,isUseBlur:e(this).data("blur")||!1};o(a.selector),e(a.selector).toggleClass(r.showElem),e(this).parent().hasClass(r.controlHover)&&e(this).parent().removeClass(r.controlHover),a.isShowFader&&t(),a.isUseBlur&&n(),l.stopPropagation(),l.preventDefault()}),e(l.fader).on("click",function(){o(),e(l.bodyElem).removeClass(r.showFader)})})}(jQuery);
/* <<< file end: js/controlstrip.js */

//# map link was there [controlstrip.js.map]
/* >>> file start: js/lib/jquery.selectric.min.js */
!function(e){"use strict";var t="selectric",s="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",o=".sl",i={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,customClass:{prefix:t,postfixes:s,camelCase:!0,overwrite:!0},optionsItemBuilder:"{text}"},n={add:function(e,t,s){this[e]||(this[e]={}),this[e][t]=s},remove:function(e,t){delete this[e][t]}},a={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),s=t.length;s--;)e=e.toLowerCase().replace(RegExp("["+t[s]+"]","g"),"aeiouncy".charAt(s));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,s,o){return o&&t[1]?t[1][o]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(s,o){var i=o.element,l=o.options["on"+s];e.isFunction(l)&&l.call(i,i,o),n[s]&&e.each(n[s],function(){this.call(i,i,o)}),e(i).trigger(t+"-"+a.toDash(s),o)}},l=e(document),r=e(window),c=function(n,c){function d(t){if($.options=e.extend(!0,{},i,$.options,t),$.classes={},$.element=n,a.triggerCallback("BeforeInit",$),$.options.disableOnMobile&&L)return void($.disableOnMobile=!0);C(!0);var o=$.options.customClass,l=o.postfixes.split(" "),r=R.width();e.each(s.split(" "),function(e,t){var s=o.prefix+l[e];$.classes[t.toLowerCase()]=o.camelCase?s:a.toDash(s)}),x=e("<input/>",{"class":$.classes.input,readonly:L}),k=e("<div/>",{"class":$.classes.items,tabindex:-1}),T=e("<div/>",{"class":$.classes.scroll}),D=e("<div/>",{"class":o.prefix,html:$.options.arrowButtonMarkup}),y=e('<p class="label"/>'),I=R.wrap("<div>").parent().append(D.prepend(y),k,x),A={open:v,close:g,destroy:C,refresh:u,init:d},R.on(A).wrap('<div class="'+$.classes.hideselect+'">'),e.extend($,A),$.options.inheritOriginalWidth&&r>0&&I.width(r),p()}function p(){$.items=[];var t=R.children(),s="<ul>",i=t.filter(":selected").index();H=S=~i?i:0,(E=t.length)&&(t.each(function(t){var o=e(this),i=o.html(),n=o.prop("disabled"),l=$.options.optionsItemBuilder;$.items[t]={value:o.val(),text:i,slug:a.replaceDiacritics(i),disabled:n},s+=a.format('<li class="{1}">{2}</li>',e.trim([t==H?"selected":"",t==E-1?"last":"",n?"disabled":""].join(" ")),e.isFunction(l)?l($.items[t],o,t):a.format(l,$.items[t]))}),k.append(T.html(s+"</ul>")),y.html($.items[H].text)),D.add(R).add(I).add(x).off(o),I.prop("class",[$.classes.wrapper,$.options.customClass.overwrite?R.prop("class").replace(/\S+/g,$.options.customClass.prefix+"-$&"):R.prop("class"),$.options.responsive?$.classes.responsive:""].join(" ")),R.prop("disabled")?(I.addClass($.classes.disabled),x.prop("disabled",!0)):(j=!0,I.removeClass($.classes.disabled).on("mouseenter"+o+" mouseleave"+o,function(t){e(this).toggleClass($.classes.hover),$.options.openOnHover&&(clearTimeout($.closeTimer),"mouseleave"==t.type?$.closeTimer=setTimeout(g,500):v())}),D.on("click"+o,function(e){Y?g():v(e)}),x.prop({tabindex:q,disabled:!1}).on("keypress"+o,h).on("keydown"+o,function(e){h(e),clearTimeout($.resetStr),$.resetStr=setTimeout(function(){x.val("")},$.options.keySearchTimeout);var t=e.keyCode||e.which;t>36&&41>t&&b(a[(39>t?"previous":"next")+"EnabledItem"]($.items,S))}).on("focusin"+o,function(e){x.one("blur",function(){x.blur()}),Y||v(e)}).on("oninput"in x[0]?"input":"keyup",function(){x.val().length&&e.each($.items,function(e,t){return RegExp("^"+x.val(),"i").test(t.slug)&&!t.disabled?(b(e),!1):void 0})}),R.prop("tabindex",!1),O=e("li",k.removeAttr("style")).click(function(){return b(e(this).index(),!0),!1})),a.triggerCallback("Init",$)}function u(){a.triggerCallback("Refresh",$),p()}function h(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),b(S,!0))}function f(){var e=k.closest(":visible").children(":hidden"),t=$.options.maxHeight;e.addClass($.classes.tempshow);var s=k.outerWidth(),o=D.outerWidth()-(s-k.width());!$.options.expandToItemText||o>s?W=o:(k.css("overflow","scroll"),I.width(9e4),W=k.width(),k.css("overflow",""),I.width("")),k.width(W).height()>t&&k.height(t),e.removeClass($.classes.tempshow)}function v(s){a.triggerCallback("BeforeOpen",$),s&&(s.preventDefault(),s.stopPropagation()),j&&(f(),e("."+$.classes.hideselect,"."+$.classes.open).children()[t]("close"),Y=!0,B=k.outerHeight(),M=k.height(),x.val("").is(":focus")||x.focus(),l.on("click"+o,g).on("scroll"+o,m),m(),$.options.preventWindowScroll&&l.on("mousewheel"+o+" DOMMouseScroll"+o,"."+$.classes.scroll,function(t){var s=t.originalEvent,o=e(this).scrollTop(),i=0;"detail"in s&&(i=-1*s.detail),"wheelDelta"in s&&(i=s.wheelDelta),"wheelDeltaY"in s&&(i=s.wheelDeltaY),"deltaY"in s&&(i=-1*s.deltaY),(o==this.scrollHeight-M&&0>i||0==o&&i>0)&&t.preventDefault()}),I.addClass($.classes.open),w(S),a.triggerCallback("Open",$))}function m(){f(),I.toggleClass($.classes.above,I.offset().top+I.outerHeight()+B>r.scrollTop()+r.height())}function g(){if(a.triggerCallback("BeforeClose",$),H!=S){a.triggerCallback("BeforeChange",$);var e=$.items[S].text;R.prop("selectedIndex",H=S).data("value",e),y.html(e),a.triggerCallback("Change",$)}l.off(o),I.removeClass($.classes.open),Y=!1,a.triggerCallback("Close",$)}function b(e,t){$.items[e].disabled||(O.removeClass("selected").eq(S=e).addClass("selected"),w(e),t&&g())}function w(e){var t=O.eq(e).outerHeight(),s=O[e].offsetTop,o=T.scrollTop(),i=s+2*t;T.scrollTop(i>o+B?i-B:o>s-t?s-t:o)}function C(e){j&&(k.add(D).add(x).remove(),!e&&R.removeData(t).removeData("value"),R.prop("tabindex",q).off(o).off(A).unwrap().unwrap(),j=!1)}var x,k,T,D,y,I,O,S,H,B,M,W,E,A,$=this,R=e(n),Y=!1,j=!1,L=/android|ip(hone|od|ad)/i.test(navigator.userAgent),q=R.prop("tabindex");d(c)};e.fn[t]=function(s){return this.each(function(){var o=e.data(this,t);o&&!o.disableOnMobile?""+s===s&&o[s]?o[s]():o.init(s):e.data(this,t,new c(this,s))})},e.fn[t].hooks=n}(jQuery);
/* <<< file end: js/lib/jquery.selectric.min.js */

//# map link was there [jquery.selectric.min.js.map]
/* >>> file start: js/captcha.js */
!function(e){return e}(),function(e){function t(){return"undefined"!=typeof d}function n(){var t=e.Deferred();return s?t.resolve(s):LJ.Api.call("captcha.get_public_key",{},function(e){s=e.captcha_public,t.resolve(s)}),t.promise()}function r(){return location.protocol+"//www.google.com/recaptcha/api.js?onload=onRecaptchaLoad&render=explicit"}function a(r,a){var o=e.Deferred();return a=e.extend(C,a||{}),LJ.Captcha.current?e.when(n(),L()).then(function(){return t()?(a.sitekey=s,f(),d.render(r,a)):void console.error("Something went wrong. Captcha object is not defined.")}):(o.resolve(),o.promise())}function o(){}function c(){return t()?(f(),d.reset.apply(null,arguments)):void 0}function i(){return null}function l(e){return t()?d.getResponse(e):void 0}function p(){return h(),(d||grecaptcha).execute.apply(null,arguments)}function u(e){var t=e.attributes.title,n=e.attributes.src;if(t){var r=t.value;if(/испытание|challenge/.test(r)&&/recaptcha/.test(r))return!0}if(n){var a=n.value;if(/google\.com.*recaptcha.*bframe/.test(a))return!0}return!1}LJ.define("LJ.Captcha"),LJ.Captcha={create:a,reload:c,destroy:o,getChallenge:i,getResponse:l,isDefined:t,execute:p,current:["recaptcha"].filter(LJ.Flags.isEnabled).shift()},LJ.Captcha.available=!!LJ.Captcha.current;var s,d,f=void 0,v=void 0,h=void 0,C={lang:"ru"},g=e.Deferred();window.onRecaptchaLoad=function(){g.resolve()};var L=LJ.Function.once(function(){var t=e.Deferred();return LJ.injectScript(r()),g.then(function(){d=grecaptcha,t.resolve()}),t.promise()});LJ.Captcha.getCaptchaApiObject=function(){return d||grecaptcha},LJ.Captcha.setOnSimpleForm=function(e,t){f(),window.onCaptchaPass=function(){var t=Object.getPrototypeOf(e).submit;t.call(e)},t.addEventListener("click",function(e){e.preventDefault(),p()})},LJ.Event.on("reCAPTCHA::popup::created",function(e){var t=e.firstChild,n=e.lastChild,r=n.firstChild;e.classList.add("recaptcha-tiles"),t&&t.classList.add("recaptcha-tiles__fader"),n&&n.classList.add("recaptcha-tiles__iframe-wrapper"),r&&r.classList.add("recaptcha-tiles__iframe")}),LJ.Event.on("reCAPTCHA::popup::shown",function(){document.body.classList.add("body--recaptcha-opened")}),LJ.Event.on("reCAPTCHA::popup::hidden",function(){document.body.classList.remove("body--recaptcha-opened")}),function(){var e=void 0,t=void 0;f=function(){var n=document.body.lastChild;e=setInterval(function(){var r=document.body.lastChild;if(r!==n){n=r;var a=n.querySelector("iframe");a&&u(a)&&(t=n,console.log("reCAPTCHA popup created"),LJ.Event.trigger("reCAPTCHA::popup::created",t),clearInterval(e),e=null)}},100)};var n=void 0,r=void 0;v=function(){n=new Date,r||(r=setInterval(function(){t&&0===+t.style.opacity&&(console.log("reCAPTCHA popup hidden"),LJ.Event.trigger("reCAPTCHA::popup::hidden"),clearInterval(r),r=null)},100))};var a=1e4;h=function(){n=new Date,r||(r=setInterval(function(){t&&1===+t.style.opacity?(console.log("reCAPTCHA popup shown"),LJ.Event.trigger("reCAPTCHA::popup::shown"),clearInterval(r),r=null,v()):new Date>n+a&&(console.log("reCAPTCHA popup taking too long to appear, aborting wait"),clearInterval(r),r=null)},100))}}()}(jQuery);
/* <<< file end: js/captcha.js */

//# map link was there [captcha.js.map]
/* >>> file start: js/scheme/schemius/feedback.js */
!function(e){"use strict";e(function(){function t(){s.addClass("p-feedback"),o=!0,u.val(r),LJ.get("remote")||LJ.Captcha.create("b-captcha",{tabindex:50}),n.bubble("hide")}var a=this,s=e("body"),o=!1,r=e(".js-feedback").attr("data-spcatid"),n=e(".s-welcometo"),c=e(".s-do-item-feedback"),l=e(".s-feedback"),i=l.find(".s-feedback-error"),d=l.find(".b-bubble-success-inner"),u=l.find('.s-feedback-body .s-feedback-form input[name="spcatid"]'),f={inprogress:"s-feedback-creating",done:"s-feedback-successfully",error:"s-feedback-erroneously"};e(".js-feedback").on("click",function(e){e.preventDefault(),t()}),this.setState=function(e){l.toggleClass(f.inprogress,"inprogress"===e),l.toggleClass(f.done,"done"===e),l.toggleClass(f.error,"error"===e)},l.on("click",".s-feedback-submit",function(t){var s={};t.preventDefault(),a.setState("inprogress"),l.find("input, textarea, select").each(function(){s[this.name]=e(this).val()}),LJ.Api.call("support.create_request",s,function(t){return t.error?(i.html(t.error.message),a.setState("error")):(d.html(e("<a>").attr("href",t.request.url).html(t.request.url)),void a.setState("done"))})}).on("click",".s-feedback-another",function(t){t.preventDefault(),l.find("input, textarea").each(function(){e(this).val("")}),LJ.Captcha.reload(),a.setState(null)}),n.bubble({target:c,showOn:"click",alwaysShowUnderTarget:!0,arrowWidth:"auto"}).on("click",".s-welcometo-action .b-flatbutton",function(e){e.preventDefault(),t()}).on("click",".s-welcometo-switcher",function(e){return e.preventDefault(),LJ.get("remote")?void LJ.Api.call("settings.set_old_design",{value:1},function(){location.reload()}):(LJ.Cookie.setGlobal("ljold",1,{expires:7}),void location.reload())}),s.on("click",function(t){var r=e(t.target);o&&(r.hasClass("b-fader")||r.hasClass("s-feedback-close"))&&(s.removeClass("p-feedback"),u.val(""),o=!1,a.setState(null),LJ.get("remote")||LJ.Captcha.destroy())})})}(jQuery);
/* <<< file end: js/scheme/schemius/feedback.js */

//# map link was there [feedback.js.map]
/* >>> file start: js/core/angular/simple-scrollbar.js */
!function(t,e){"use strict";function s(t,s){function i(t){var e=t.pageY-n;n=t.pageY,r(function(){s.el.scrollTop+=e/s.scrollRatio})}function a(){t.classList.remove("ss-grabbed"),e.body.classList.remove("ss-grabbed"),e.removeEventListener("mousemove",i),e.removeEventListener("mouseup",a)}var n;t.addEventListener("mousedown",function(s){return n=s.pageY,t.classList.add("ss-grabbed"),e.body.classList.add("ss-grabbed"),e.addEventListener("mousemove",i),e.addEventListener("mouseup",a),!1})}function i(i){for(this.target=i,this.bar='<div class="ss-scroll">',this.wrapper=e.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=e.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,s(this.bar,this),this.moveBar(),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var r=t.getComputedStyle(i);"0px"===r.height&&"0px"!==r["max-height"]&&(i.style.height=r["max-height"])}angular.module("Scrollbar",[]),angular.module("Scrollbar").constant("SimpleScrollbar",i);var r=t.requestAnimationFrame||t.setImmediate||function(t){return setTimeout(t,0)};i.prototype={moveBar:function(){var t=this.el.scrollHeight,e=this.el.clientHeight,s=this;this.scrollRatio=e/t,r(function(){1===s.scrollRatio?s.bar.classList.add("ss-hidden"):(s.bar.classList.remove("ss-hidden"),s.bar.style.cssText="height:"+100*s.scrollRatio+"%; top:"+s.el.scrollTop/t*100+"%;right:-"+(s.target.clientWidth-s.bar.clientWidth)+"px;")})},setElementHeight:function(t){this.el.style.height=t,this.moveBar()}}}(window,document);
/* <<< file end: js/core/angular/simple-scrollbar.js */

//# map link was there [simple-scrollbar.js.map]
/* >>> file start: js/notifications/main.js */
Site.page.template['angular/widgets/notifications/notifications.ng.tmpl'] = '<div class=\"popupus popupus--notices\" ng-class=\"{\'svgpreloader-30 svgpreloader-pseudo svgpreloader\': notifications.loading}\" ng-controller=\"NotificationCtrl as notifications\">\n    <div class=\"popupus__inner\">\n        <div\n            class=\"notices\"\n            ng-class=\"{\'notices__has-notifications\': notifications.counter > 0}\"\n            >\n            <header class=\"notices__header\">\n                <h3\n                    class=\"notices__title\"\n                    lj-ml=\"notification.centre.title\"\n                    lj-ml-resolve=\"{ count: notifications.counter }\"\n                    lj-ml-dynamic=\"notifications.counter\"\n                    >\n                    </h3>\n                <a \n                    href=\"#\"\n                    ng-click=\"notifications.readAll()\"\n                    ng-show=\"notifications.entries.length > 0\"\n                    class=\"notices__read\"\n                    lj-ml=\"notification.centre.read.all\"\n                    >\n                    </a>\n                <span><TMPL_VAR statprefix></span>\n            </header>\n            <div\n                class=\"notices__body\"\n                notifications-content\n                ng-show=\"notifications.entries.length > 0\"\n                >\n                <div class=\"notices__body-wrapper\">\n                <ul class=\"notices__list\">\n                    <li\n                        ng-repeat=\"entry in notifications.entries\"\n                        class=\"notices__item\"\n                        ng-class=\"{\n                            \'notices--{{entry.action}}\': true,\n                            \'notices--unread\': entry.unread\n                            }\"\n                        ng-mouseover=\"notifications.read(entry)\"\n                        >\n                        <a class=\"notices__item__link\" href=\"#\">\n                            <img ng-src=\"{{entry.main_user.img_url || notifications.defaultPic}}\" ng-alt=\"{{entry.main_user.name}}\" class=\"notices__userpic\">\n                            <h5 class=\"notices__item__title\">{{entry.notification_text}}</h5>\n                            <time class=\"notices__date\">{{entry.date}}</time>\n                            <p class=\"notices__publication-content\">{{entry.title}}</p>\n                            <ul class=\"notices__consilient-users-list\">\n                                <li class=\"notices__consilient-user\" ng-repeat=\"user in entry.other_users\">\n                                    <img ng-src=\"{{user.img_url || notifications.defaultPic}}\" ng-alt=\"{{user.name}}\" class=\"notices__consilient-userpic\">\n                                </li>\n                            </ul>\n                        </a>\n                    </li>\n                </ul>\n                </div>\n            </div>\n            <div\n                class=\"notices__body-empty\"\n                ng-show=\"notifications.entries.length === 0\"\n                >\n                You don\'t have any notifications\n            </div>\n\n            <div class=\"notices__footer\" ng-if=\"notifications.shouldShowMore()\">\n                <div class=\"notices__more\">\n                    <button\n                        ng-click=\"notifications.nextPage()\"\n                        class=\"\n                            flatbutton\n                            flatbutton--small\n                            flatbutton--neutral\n                            flatbutton--max\n                            \"\n                        lj-ml=\"notification.centre.previous\"\n                        >\n                        </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';
Site.page.template['angular/widgets/notifications/notificationsIcon.ng.tmpl'] = '<div\n    class=\"\n        s-header-control\n        s-header-notifications\n        \"\n    >\n    <a\n        class=\"\n            s-header-control__icon\n            s-header-control__icon--circle\n            s-header-notifications__icon\n            \"\n        href=\"javascript: void(0)\"\n        notifications-panel\n        ng-if=\"enabled\"\n        lj-svg-icon=\"flaticon--notifications\"\n        ></a>\n    <span\n        class=\"s-header-notifications__counter\"\n        ng-class=\"{\'counter--shown\': count.count > 0}\"\n        ng-if=\"enabled\"\n        ng-controller=\"NotificationsCountCtrl as count\"\n        >{{count.count}}</span>\n</div>\n';
//= require js/core/angular/bubble.js
//= require js/core/angular/api.js
//= require js/core/angular/simple-scrollbar.js
//= require_ml notification.centre.title
//= require_ml notification.centre.read.all
//= require_ml notification.centre.previous
!function(n){return n}(),function(){"use strict";function n(n,t,i,o,e){function c(){var t=void 0;return d.length>0?void(t=n.$on("notifications:readPushed",function(){a(),t()})):void a()}function a(){r().then(function(t){g!==t.notifications&&(g=t.notifications,n.$broadcast("notifications:counterUpdated"))})}function r(){return i.call("notifications.getn",{silent:!0})}function u(n){return i.call("notifications.get",{page:n,silent:!0})}function f(){i.call("notifications.release",{id:d,silent:!0}),d=[],n.$broadcast("notifications:readPushed")}function s(t){d.push(t.id),t.unread=!1,g--,n.$broadcast("notifications:counterUpdated"),$()}function l(){i.call("notifications.release_all",{silent:!0}).then(function(t){"ok"===t&&(g=0,n.$broadcast("notifications:counterUpdated"))})}var d=[],p=[],g=0;c(),t(c,e);var $=LJ.Function.debounce(f,o);return{pushRead:s,entries:function(){return p},counter:function(){return g},getNotifications:u,readAll:l}}function t(n,t,i,o){function e(){(LJ.Support.isMobile()||LJ.Support.touch)&&t(c.readPage,1e3)}var c=this,a=0,r=0;c.entries=[],c.counter=o.counter(),c.loading=!1,c.defaultPic=LJ.get("statprefix")+"/img/userpics/userpic-user.png?v=15821",c.getPage=function(t){c.loading=!0,o.getNotifications(a).then(function(i){c.entries=i.notifications,r=i.pages,c.loading=!1,n.$broadcast("notifications:pageLoad:"+t)})},c.read=function(n){n.unread&&o.pushRead(n)},c.readPage=function(){c.part.forEach(c.read)},c.readAll=o.readAll,c.shouldShowMore=function(){return c.entries&&r-1>a},c.nextPage=function(){a++,c.getPage("next"),e(),n.$emit("notifications:nextPage")},n.$on("notifications:counterUpdated",function(){c.counter=o.counter()}),n.$on("bubble:open:notifications",function(){c.getPage("open"),e()}),n.$on("bubble:close:notifications",function(){a=0,c.entries=[]})}function i(n){function t(n,t){var i=LJ.Flags.isEnabled("notification_center_display");n.enabled=i,i&&t.removeClass("notices--hidden")}return{templateUrl:"notificationsIcon.ng.tmpl",link:t}}function o(n,t,i){var o=this;n.$on("notifications:counterUpdated",function(){t(function(){o.count=i.counter()})})}function e(n){function t(t,i){n.register({name:"notifications",template:"notifications.ng.tmpl"}),i.click(function(){t.$apply(function(){n.open("notifications",{alwaysBottom:!0,closeControl:!1},i)})})}return{link:t}}function c(n,t){function i(i,c){var a=c.find(".notices__body-wrapper")[0],r=new t(a);i.$on("notifications:pageLoad:open",function(){n(function(){return o(r,c)})}),i.$on("bubble:close:notifications",function(){n(function(){return e(r)})}),i.$on("notifications:pageLoad:next",function(){n(function(){e(r),o(r,c)})})}function o(n,t){n.setElementHeight(t.height()+"px")}function e(n){n.setElementHeight("100%")}return{link:i}}angular.module("Notifications",["LJ.Bubble","LJ.Api","Scrollbar"]),angular.module("Notifications").constant("READ_PUSH_DELAY",3e3).constant("CHECK_NEW_DELAY",1e4).factory("notificationService",n).directive("ljNotificationsIcon",i).directive("notificationsPanel",e).directive("notificationsContent",c).controller("NotificationCtrl",t).controller("NotificationsCountCtrl",o),n.$inject=["$rootScope","$interval","Api","READ_PUSH_DELAY","CHECK_NEW_DELAY"],t.$inject=["$scope","$timeout","$interval","notificationService"],i.$inject=["notificationService"],o.$inject=["$scope","$timeout","notificationService"],e.$inject=["Bubble"],c.$inject=["$timeout","SimpleScrollbar"]}();
/* <<< file end: js/notifications/main.js */

//# map link was there [main.js.map]
/* >>> file start: js/node_modules/moment/min/moment.min.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Pn.apply(null,arguments)}function e(t){Pn=t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,n,i){return Ot(t,e,n,i,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(t){return null==t._pf&&(t._pf=u()),t._pf}function l(t){if(null==t._isValid){var e=d(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function c(t){var e=a(NaN);return null!=t?o(d(e),t):d(e).userInvalidated=!0,e}function f(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=d(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Hn.length>0)for(n in Hn)i=Hn[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function h(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Ln===!1&&(Ln=!0,t.updateOffset(this),Ln=!1)}function m(t){return t instanceof h||null!=t&&null!=t._isAMomentObject}function _(t){return 0>t?Math.ceil(t):Math.floor(t)}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=_(e)),n}function p(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&o++;return o+s}function g(){}function v(t){return t?t.toLowerCase().replace("_","-"):t}function D(t){for(var e,n,i,r,s=0;s<t.length;){for(r=v(t[s]).split("-"),e=r.length,n=v(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=M(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&p(r,n,!0)>=e-1)break;e--}s++}return null}function M(t){var e=null;if(!In[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=xn._abbr,require("./locale/"+t),Y(e)}catch(n){}return In[t]}function Y(t,e){var n;return t&&(n="undefined"==typeof e?S(t):w(t,e),n&&(xn=n)),xn._abbr}function w(t,e){return null!==e?(e.abbr=t,In[t]=In[t]||new g,In[t].set(e),Y(t),In[t]):(delete In[t],null)}function S(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xn;if(!n(t)){if(e=M(t))return e;t=[t]}return D(t)}function k(t,e){var n=t.toLowerCase();An[n]=An[n+"s"]=An[e]=t}function T(t){return"string"==typeof t?An[t]||An[t.toLowerCase()]:void 0}function b(t){var e,n,i={};for(n in t)s(t,n)&&(e=T(n),e&&(i[e]=t[n]));return i}function O(e,n){return function(i){return null!=i?(W(this,e,i),t.updateOffset(this,n),this):U(this,e)}}function U(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function W(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function C(t,e){var n;if("object"==("undefined"==typeof t?"undefined":_typeof(t)))for(n in t)this.set(n,t[n]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function G(t,e,n){var i=""+Math.abs(t),r=e-i.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function F(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(jn[t]=r),e&&(jn[e[0]]=function(){return G(r.apply(this,arguments),e[1],e[2])}),n&&(jn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function x(t){var e,n,i=t.match(zn);for(e=0,n=i.length;n>e;e++)jn[i[e]]?i[e]=jn[i[e]]:i[e]=P(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function H(t,e){return t.isValid()?(e=L(e,t.localeData()),Zn[e]=Zn[e]||x(e),Zn[e](t)):t.localeData().invalidDate()}function L(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Nn.lastIndex=0;i>=0&&Nn.test(t);)t=t.replace(Nn,n),Nn.lastIndex=0,i-=1;return t}function I(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function A(t,e,n){ri[t]=I(e)?e:function(t){return t&&n?n:e}}function z(t,e){return s(ri,t)?ri[t](e._strict,e._locale):new RegExp(N(t))}function N(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=y(t)}),n=0;n<t.length;n++)si[t[n]]=i}function j(t,e){Z(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function E(t,e,n){null!=e&&s(si,t)&&si[t](e,n._a,n,t)}function V(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function q(t){return this._months[t.month()]}function J(t){return this._monthsShort[t.month()]}function $(t,e,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function R(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),V(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function B(e){return null!=e?(R(this,e),t.updateOffset(this,!0),this):U(this,"Month")}function Q(){return V(this.year(),this.month())}function X(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[ai]<0||n[ai]>11?ai:n[ui]<1||n[ui]>V(n[oi],n[ai])?ui:n[di]<0||n[di]>24||24===n[di]&&(0!==n[li]||0!==n[ci]||0!==n[fi])?di:n[li]<0||n[li]>59?li:n[ci]<0||n[ci]>59?ci:n[fi]<0||n[fi]>999?fi:-1,d(t)._overflowDayOfYear&&(oi>e||e>ui)&&(e=ui),d(t).overflow=e),t}function K(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function tt(t,e){var n=!0;return o(function(){return n&&(K(t+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function et(t,e){_i[t]||(K(e),_i[t]=!0)}function nt(t){var e,n,i=t._i,r=yi.exec(i);if(r){for(d(t).iso=!0,e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f=pi[e][0];break}for(e=0,n=gi.length;n>e;e++)if(gi[e][1].exec(i)){t._f+=(r[6]||" ")+gi[e][0];break}i.match(ei)&&(t._f+="Z"),Mt(t)}else t._isValid=!1}function it(e){var n=vi.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(nt(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function rt(t,e,n,i,r,s,o){var a=new Date(t,e,n,i,r,s,o);return 1970>t&&a.setFullYear(t),a}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ot(t){return at(t)?366:365}function at(t){return t%4===0&&t%100!==0||t%400===0}function ut(){return at(this.year())}function dt(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Ut(t).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(t){return dt(t,this._week.dow,this._week.doy).week}function ct(){return this._week.dow}function ft(){return this._week.doy}function ht(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function mt(t){var e=dt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function _t(t,e,n,i,r){var s,o=6+r-i,a=st(t,0,1+o),u=a.getUTCDay();return r>u&&(u+=7),n=null!=n?1*n:r,s=1+o+7*(e-1)-u+n,{year:s>0?t:t-1,dayOfYear:s>0?s:ot(t-1)+s}}function yt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function pt(t,e,n){return null!=t?t:null!=e?e:n}function gt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vt(t){var e,n,i,r,s=[];if(!t._d){for(i=gt(t),t._w&&null==t._a[ui]&&null==t._a[ai]&&Dt(t),t._dayOfYear&&(r=pt(t._a[oi],i[oi]),t._dayOfYear>ot(r)&&(d(t)._overflowDayOfYear=!0),n=st(r,0,t._dayOfYear),t._a[ai]=n.getUTCMonth(),t._a[ui]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[di]&&0===t._a[li]&&0===t._a[ci]&&0===t._a[fi]&&(t._nextDay=!0,t._a[di]=0),t._d=(t._useUTC?st:rt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[di]=24)}}function Dt(t){var e,n,i,r,s,o,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,o=4,n=pt(e.GG,t._a[oi],dt(Ut(),1,4).year),i=pt(e.W,1),r=pt(e.E,1)):(s=t._locale._week.dow,o=t._locale._week.doy,n=pt(e.gg,t._a[oi],dt(Ut(),s,o).year),i=pt(e.w,1),null!=e.d?(r=e.d,s>r&&++i):r=null!=e.e?e.e+s:s),a=_t(n,i,r,o,s),t._a[oi]=a.year,t._dayOfYear=a.dayOfYear}function Mt(e){if(e._f===t.ISO_8601)return void nt(e);e._a=[],d(e).empty=!0;var n,i,r,s,o,a=""+e._i,u=a.length,l=0;for(r=L(e._f,e._locale).match(zn)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(z(s,e))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&d(e).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),l+=i.length),jn[s]?(i?d(e).empty=!1:d(e).unusedTokens.push(s),E(s,i,e)):e._strict&&!i&&d(e).unusedTokens.push(s);d(e).charsLeftOver=u-l,a.length>0&&d(e).unusedInput.push(a),d(e).bigHour===!0&&e._a[di]<=12&&e._a[di]>0&&(d(e).bigHour=void 0),e._a[di]=Yt(e._locale,e._a[di],e._meridiem),vt(e),X(e)}function Yt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function wt(t){var e,n,i,r,s;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=f({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Mt(e),l(e)&&(s+=d(e).charsLeftOver,s+=10*d(e).unusedTokens.length,d(e).score=s,(null==i||i>s)&&(i=s,n=e));o(t,n||e)}function St(t){if(!t._d){var e=b(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],vt(t)}}function kt(t){var e=new h(X(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var e=t._i,r=t._f;return t._locale=t._locale||S(t._l),null===e||void 0===r&&""===e?c({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),m(e)?new h(X(e)):(n(r)?wt(t):r?Mt(t):i(e)?t._d=e:bt(t),t))}function bt(e){var s=e._i;void 0===s?e._d=new Date:i(s)?e._d=new Date(+s):"string"==typeof s?it(e):n(s)?(e._a=r(s.slice(0),function(t){return parseInt(t,10)}),vt(e)):"object"==("undefined"==typeof s?"undefined":_typeof(s))?St(e):"number"==typeof s?e._d=new Date(s):t.createFromInputFallback(e)}function Ot(t,e,n,i,r){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=t,s._f=e,s._strict=i,kt(s)}function Ut(t,e,n,i){return Ot(t,e,n,i,!1)}function Wt(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ut();for(i=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](i))&&(i=e[r]);return i}function Ct(){var t=[].slice.call(arguments,0);return Wt("isBefore",t)}function Gt(){var t=[].slice.call(arguments,0);return Wt("isAfter",t)}function Ft(t){var e=b(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Pt(t){return t instanceof Ft}function xt(t,e){F(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+G(~~(t/60),2)+e+G(~~t%60,2)})}function Ht(t){var e=(t||"").match(ei)||[],n=e[e.length-1]||[],i=(n+"").match(Si)||["-",0,0],r=+(60*i[1])+y(i[2]);return"+"===i[0]?r:-r}function Lt(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(m(e)||i(e)?+e:+Ut(e))-+r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Ut(e).local()}function It(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function At(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ht(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=It(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?ee(this,Bt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:It(this)}function zt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Nt(t){return this.utcOffset(0,t)}function Zt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(It(this),"m")),this}function jt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ht(this._i)),this}function Et(t){return t=t?Ut(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Vt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(f(t,this),t=Tt(t),t._a){var e=t._isUTC?a(t._a):Ut(t._a);this._isDSTShifted=this.isValid()&&p(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jt(){return!this._isUTC}function $t(){return this._isUTC}function Rt(){return this._isUTC&&0===this._offset}function Bt(t,e){var n,i,r,o=t,a=null;return Pt(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=ki.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[ui])*n,h:y(a[di])*n,m:y(a[li])*n,s:y(a[ci])*n,ms:y(a[fi])*n}):(a=Ti.exec(t))?(n="-"===a[1]?-1:1,o={y:Qt(a[2],n),M:Qt(a[3],n),d:Qt(a[4],n),h:Qt(a[5],n),m:Qt(a[6],n),s:Qt(a[7],n),w:Qt(a[8],n)}):null==o?o={}:"object"==("undefined"==typeof o?"undefined":_typeof(o))&&("from"in o||"to"in o)&&(r=Kt(Ut(o.from),Ut(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Ft(o),Pt(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Qt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Kt(t,e){var n;return e=Lt(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function te(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Bt(n,i),ee(this,r,t),this}}function ee(e,n,i,r){var s=n._milliseconds,o=n._days,a=n._months;r=null==r?!0:r,s&&e._d.setTime(+e._d+s*i),o&&W(e,"Date",U(e,"Date")+o*i),a&&R(e,U(e,"Month")+a*i),r&&t.updateOffset(e,o||a)}function ne(t,e){var n=t||Ut(),i=Lt(n,this).startOf("day"),r=this.diff(i,"days",!0),s=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(e&&e[s]||this.localeData().calendar(s,this,Ut(n)))}function ie(){return new h(this)}function re(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this>+t):(n=m(t)?+t:+Ut(t),n<+this.clone().startOf(e))}function se(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+t>+this):(n=m(t)?+t:+Ut(t),+this.clone().endOf(e)<n)}function oe(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function ae(t,e){var n;return e=T(e||"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this===+t):(n=+Ut(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function ue(t,e,n){var i,r,s=Lt(t,this),o=6e4*(s.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(r=de(this,s),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?r:_(r)}function de(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)}function le(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ce(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fe(e){var n=H(this,e||t.defaultFormat);return this.localeData().postformat(n)}function he(t,e){return this.isValid()?Bt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function me(t){return this.from(Ut(),t)}function _e(t,e){return this.isValid()?Bt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ye(t){return this.to(Ut(),t)}function pe(t){var e;return void 0===t?this._locale._abbr:(e=S(t),null!=e&&(this._locale=e),this)}function ge(){return this._locale}function ve(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function De(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function Me(){return+this._d-6e4*(this._offset||0)}function Ye(){return Math.floor(+this/1e3)}function we(){return this._offset?new Date(+this):this._d}function Se(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ke(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Te(){return l(this)}function be(){return o({},d(this))}function Oe(){return d(this).overflow}function Ue(t,e){F(0,[t,t.length],0,e)}function We(t,e,n){return dt(Ut([t,11,31+e-n]),e,n).week}function Ce(t){var e=dt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ge(t){var e=dt(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Fe(){return We(this.year(),1,4)}function Pe(){var t=this.localeData()._week;return We(this.year(),t.dow,t.doy)}function xe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function He(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Le(t){return this._weekdays[t.day()]}function Ie(t){return this._weekdaysShort[t.day()]}function Ae(t){return this._weekdaysMin[t.day()]}function ze(t){var e,n,i;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Ut([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ne(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=He(t,this.localeData()),this.add(t-e,"d")):e}function Ze(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function je(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Ee(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ve(t,e){return e._meridiemParse}function qe(t){return"p"===(t+"").toLowerCase().charAt(0)}function Je(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function $e(t,e){e[fi]=y(1e3*("0."+t))}function Re(){return this._isUTC?"UTC":""}function Be(){return this._isUTC?"Coordinated Universal Time":""}function Qe(t){return Ut(1e3*t)}function Xe(){return Ut.apply(null,arguments).parseZone()}function Ke(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function tn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function en(){return this._invalidDate}function nn(t){return this._ordinal.replace("%d",t)}function rn(t){return t}function sn(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)}function on(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function an(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function un(t,e,n,i){var r=S(),s=a().set(i,e);return r[n](s,t)}function dn(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return un(t,e,n,r);var s,o=[];for(s=0;i>s;s++)o[s]=un(t,s,n,r);return o}function ln(t,e){return dn(t,e,"months",12,"month")}function cn(t,e){return dn(t,e,"monthsShort",12,"month")}function fn(t,e){return dn(t,e,"weekdays",7,"day")}function hn(t,e){return dn(t,e,"weekdaysShort",7,"day")}function mn(t,e){return dn(t,e,"weekdaysMin",7,"day")}function _n(){var t=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),t.milliseconds=Ri(t.milliseconds),t.seconds=Ri(t.seconds),t.minutes=Ri(t.minutes),t.hours=Ri(t.hours),t.months=Ri(t.months),t.years=Ri(t.years),this}function yn(t,e,n,i){var r=Bt(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function pn(t,e){return yn(this,t,e,1)}function gn(t,e){return yn(this,t,e,-1)}function vn(t){return 0>t?Math.floor(t):Math.ceil(t)}function Dn(){var t,e,n,i,r,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||0>=s&&0>=o&&0>=a||(s+=864e5*vn(Yn(a)+o),o=0,a=0),u.milliseconds=s%1e3,t=_(s/1e3),u.seconds=t%60,e=_(t/60),u.minutes=e%60,n=_(e/60),u.hours=n%24,o+=_(n/24),r=_(Mn(o)),a+=r,o-=vn(Yn(r)),i=_(a/12),a%=12,u.days=o,u.months=a,u.years=i,this}function Mn(t){return 4800*t/146097}function Yn(t){return 146097*t/4800}function wn(t){var e,n,i=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+Mn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Yn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Sn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function kn(t){return function(){return this.as(t)}}function Tn(t){return t=T(t),this[t+"s"]()}function bn(t){return function(){return this._data[t]}}function On(){return _(this.days()/7)}function Un(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Wn(t,e,n){var i=Bt(t).abs(),r=cr(i.as("s")),s=cr(i.as("m")),o=cr(i.as("h")),a=cr(i.as("d")),u=cr(i.as("M")),d=cr(i.as("y")),l=r<fr.s&&["s",r]||1===s&&["m"]||s<fr.m&&["mm",s]||1===o&&["h"]||o<fr.h&&["hh",o]||1===a&&["d"]||a<fr.d&&["dd",a]||1===u&&["M"]||u<fr.M&&["MM",u]||1===d&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,Un.apply(null,l)}function Cn(t,e){return void 0===fr[t]?!1:void 0===e?fr[t]:(fr[t]=e,!0)}function Gn(t){var e=this.localeData(),n=Wn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Fn(){var t,e,n,i=hr(this._milliseconds)/1e3,r=hr(this._days),s=hr(this._months);t=_(i/60),e=_(t/60),i%=60,t%=60,n=_(s/12),s%=12;var o=n,a=s,u=r,d=e,l=t,c=i,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(d||l||c?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var Pn,xn,Hn=t.momentProperties=[],Ln=!1,In={},An={},zn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Nn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zn={},jn={},En=/\d/,Vn=/\d\d/,qn=/\d{3}/,Jn=/\d{4}/,$n=/[+-]?\d{6}/,Rn=/\d\d?/,Bn=/\d{1,3}/,Qn=/\d{1,4}/,Xn=/[+-]?\d{1,6}/,Kn=/\d+/,ti=/[+-]?\d+/,ei=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ri={},si={},oi=0,ai=1,ui=2,di=3,li=4,ci=5,fi=6;F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),k("month","M"),A("M",Rn),A("MM",Rn,Vn),A("MMM",ii),A("MMMM",ii),Z(["M","MM"],function(t,e){e[ai]=y(t)-1}),Z(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[ai]=r:d(n).invalidMonth=t});var hi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_i={};t.suppressDeprecationWarnings=!1;var yi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],vi=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),k("year","y"),A("Y",ti),A("YY",Rn,Vn),A("YYYY",Qn,Jn),A("YYYYY",Xn,$n),A("YYYYYY",Xn,$n),Z(["YYYYY","YYYYYY"],oi),Z("YYYY",function(e,n){n[oi]=2===e.length?t.parseTwoDigitYear(e):y(e)}),Z("YY",function(e,n){n[oi]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var Di=O("FullYear",!1);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),A("w",Rn),A("ww",Rn,Vn),A("W",Rn),A("WW",Rn,Vn),j(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});var Mi={dow:0,doy:6};F("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),A("DDD",Bn),A("DDDD",qn),Z(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),t.ISO_8601=function(){};var Yi=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return this>t?this:t}),wi=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return t>this?this:t});xt("Z",":"),xt("ZZ",""),A("Z",ei),A("ZZ",ei),Z(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ht(t)});var Si=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var ki=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ti=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Bt.fn=Ft.prototype;var bi=te(1,"add"),Oi=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ui=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ue("gggg","weekYear"),Ue("ggggg","weekYear"),Ue("GGGG","isoWeekYear"),Ue("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),A("G",ti),A("g",ti),A("GG",Rn,Vn),A("gg",Rn,Vn),A("GGGG",Qn,Jn),A("gggg",Qn,Jn),A("GGGGG",Xn,$n),A("ggggg",Xn,$n),j(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),j(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),F("Q",0,0,"quarter"),k("quarter","Q"),A("Q",En),Z("Q",function(t,e){e[ai]=3*(y(t)-1)}),F("D",["DD",2],"Do","date"),k("date","D"),A("D",Rn),A("DD",Rn,Vn),A("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),Z(["D","DD"],ui),Z("Do",function(t,e){e[ui]=y(t.match(Rn)[0],10)});var Wi=O("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),A("d",Rn),A("e",Rn),A("E",Rn),A("dd",ii),A("ddd",ii),A("dddd",ii),j(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:d(n).invalidWeekday=t}),j(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var Ci="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Gi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Fi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),Ee("a",!0),Ee("A",!1),k("hour","h"),A("a",Ve),A("A",Ve),A("H",Rn),A("h",Rn),A("HH",Rn,Vn),A("hh",Rn,Vn),Z(["H","HH"],di),Z(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),Z(["h","hh"],function(t,e,n){e[di]=y(t),d(n).bigHour=!0});var Pi=/[ap]\.?m?\.?/i,xi=O("Hours",!0);F("m",["mm",2],0,"minute"),k("minute","m"),A("m",Rn),A("mm",Rn,Vn),Z(["m","mm"],li);var Hi=O("Minutes",!1);F("s",["ss",2],0,"second"),k("second","s"),A("s",Rn),A("ss",Rn,Vn),Z(["s","ss"],ci);var Li=O("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),k("millisecond","ms"),A("S",Bn,En),A("SS",Bn,Vn),A("SSS",Bn,qn);var Ii;for(Ii="SSSS";Ii.length<=9;Ii+="S")A(Ii,Kn);for(Ii="S";Ii.length<=9;Ii+="S")Z(Ii,$e);var Ai=O("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var zi=h.prototype;zi.add=bi,zi.calendar=ne,zi.clone=ie,zi.diff=ue,zi.endOf=De,zi.format=fe,zi.from=he,zi.fromNow=me,zi.to=_e,zi.toNow=ye,zi.get=C,zi.invalidAt=Oe,zi.isAfter=re,zi.isBefore=se,zi.isBetween=oe,zi.isSame=ae,zi.isValid=Te,zi.lang=Ui,zi.locale=pe,zi.localeData=ge,zi.max=wi,zi.min=Yi,zi.parsingFlags=be,zi.set=C,zi.startOf=ve,zi.subtract=Oi,zi.toArray=Se,zi.toObject=ke,zi.toDate=we,zi.toISOString=ce,zi.toJSON=ce,zi.toString=le,
zi.unix=Ye,zi.valueOf=Me,zi.year=Di,zi.isLeapYear=ut,zi.weekYear=Ce,zi.isoWeekYear=Ge,zi.quarter=zi.quarters=xe,zi.month=B,zi.daysInMonth=Q,zi.week=zi.weeks=ht,zi.isoWeek=zi.isoWeeks=mt,zi.weeksInYear=Pe,zi.isoWeeksInYear=Fe,zi.date=Wi,zi.day=zi.days=Ne,zi.weekday=Ze,zi.isoWeekday=je,zi.dayOfYear=yt,zi.hour=zi.hours=xi,zi.minute=zi.minutes=Hi,zi.second=zi.seconds=Li,zi.millisecond=zi.milliseconds=Ai,zi.utcOffset=At,zi.utc=Nt,zi.local=Zt,zi.parseZone=jt,zi.hasAlignedHourOffset=Et,zi.isDST=Vt,zi.isDSTShifted=qt,zi.isLocal=Jt,zi.isUtcOffset=$t,zi.isUtc=Rt,zi.isUTC=Rt,zi.zoneAbbr=Re,zi.zoneName=Be,zi.dates=tt("dates accessor is deprecated. Use date instead.",Wi),zi.months=tt("months accessor is deprecated. Use month instead",B),zi.years=tt("years accessor is deprecated. Use year instead",Di),zi.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",zt);var Ni=zi,Zi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ji={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ei="Invalid date",Vi="%d",qi=/\d{1,2}/,Ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$i=g.prototype;$i._calendar=Zi,$i.calendar=Ke,$i._longDateFormat=ji,$i.longDateFormat=tn,$i._invalidDate=Ei,$i.invalidDate=en,$i._ordinal=Vi,$i.ordinal=nn,$i._ordinalParse=qi,$i.preparse=rn,$i.postformat=rn,$i._relativeTime=Ji,$i.relativeTime=sn,$i.pastFuture=on,$i.set=an,$i.months=q,$i._months=hi,$i.monthsShort=J,$i._monthsShort=mi,$i.monthsParse=$,$i.week=lt,$i._week=Mi,$i.firstDayOfYear=ft,$i.firstDayOfWeek=ct,$i.weekdays=Le,$i._weekdays=Ci,$i.weekdaysMin=Ae,$i._weekdaysMin=Fi,$i.weekdaysShort=Ie,$i._weekdaysShort=Gi,$i.weekdaysParse=ze,$i.isPM=qe,$i._meridiemParse=Pi,$i.meridiem=Je,Y("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Y),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",S);var Ri=Math.abs,Bi=kn("ms"),Qi=kn("s"),Xi=kn("m"),Ki=kn("h"),tr=kn("d"),er=kn("w"),nr=kn("M"),ir=kn("y"),rr=bn("milliseconds"),sr=bn("seconds"),or=bn("minutes"),ar=bn("hours"),ur=bn("days"),dr=bn("months"),lr=bn("years"),cr=Math.round,fr={s:45,m:45,h:22,d:26,M:11},hr=Math.abs,mr=Ft.prototype;mr.abs=_n,mr.add=pn,mr.subtract=gn,mr.as=wn,mr.asMilliseconds=Bi,mr.asSeconds=Qi,mr.asMinutes=Xi,mr.asHours=Ki,mr.asDays=tr,mr.asWeeks=er,mr.asMonths=nr,mr.asYears=ir,mr.valueOf=Sn,mr._bubble=Dn,mr.get=Tn,mr.milliseconds=rr,mr.seconds=sr,mr.minutes=or,mr.hours=ar,mr.days=ur,mr.weeks=On,mr.months=dr,mr.years=lr,mr.humanize=Gn,mr.toISOString=Fn,mr.toString=Fn,mr.toJSON=Fn,mr.locale=pe,mr.localeData=ge,mr.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fn),mr.lang=Ui,F("X",0,0,"unix"),F("x",0,0,"valueOf"),A("x",ti),A("X",ni),Z("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),Z("x",function(t,e,n){n._d=new Date(y(t))}),t.version="2.10.6",e(Ut),t.fn=Ni,t.min=Ct,t.max=Gt,t.utc=a,t.unix=Qe,t.months=ln,t.isDate=i,t.locale=Y,t.invalid=c,t.duration=Bt,t.isMoment=m,t.weekdays=fn,t.parseZone=Xe,t.localeData=S,t.isDuration=Pt,t.monthsShort=cn,t.weekdaysMin=mn,t.defineLocale=w,t.weekdaysShort=hn,t.normalizeUnits=T,t.relativeTimeThreshold=Cn;var _r=t;return _r});
/* <<< file end: js/node_modules/moment/min/moment.min.js */

//# map link was there [moment.min.js.map]
/* >>> file start: js/facebookMigration/migration.js */
//= require js/core/angular/api.js
//= require js/node_modules/moment/min/moment.min.js
Site.page.template['Widgets/facebook_migration.tmpl'] = '<div\n    class=\"modal-wrapper\"\n    ng-if=\"!migration.hidden\"\n    >\n    <div\n        class=\"\n            modal\n            fbmerge\n            fbmerge--step{{migration.step}}\n            fbmerge--hide-sharing\n        \"\n        ng-class=\"{\n            \'fbmerge--need-action\': migration.step >= 2 && migration.step <= 4,\n            \'fbmerge--loading\': migration.loading,\n            }\"\n        >\n\n        <!-- header -->\n        <header class=\"fbmerge__descr\">\n            <!-- steps: 1 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step1\">\n                <h1 class=\"fbmerge__title\" lj-ml=\"fbmerging.step1.description.title\"></h1>\n\n                <div class=\"fbmerge__choice-buttons\">\n                    <button\n                        type=\"button\"\n                        class=\"\n                            fbmerge__flatbutton\n                            fbmerge__flatbutton--inverse\n                            fbmerge__choice-button\n                            fbmerge__choice-button--import\n                            flatbutton\n                            flatbutton--small\n                            \"\n                        ng-click=\"migration.importStep()\"\n                        lj-ml=\"fbmerging.step1.description.agreement\"\n                        ></button>\n                    <button\n                        type=\"button\"\n                        class=\"\n                            fbmerge__choice-button\n                            fbmerge__choice-button--no-border\n                            \"\n                        ng-click=\"migration.hide()\"\n                        lj-ml=\"fbmerging.step1.description.refusing\"\n                        ></button>\n                </div>\n            </div>\n\n            <!-- steps: 2 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step2\">\n                <h1 class=\"fbmerge__title\" lj-ml=\"fbmerging.step2.description.title\"></h1>\n            </div>\n\n            <!-- steps: 3 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step3\">\n                <h1\n                    class=\"fbmerge__title\"\n                    lj-ml=\"fbmerging.step3.description.title\"\n                    ng-if=\"migration.addr\"></h1>\n                <h1\n                    class=\"fbmerge__title\"\n                    lj-ml=\"fbmerging.step3.description.title2\"\n                    ng-if=\"!migration.addr\"></h1>\n            </div>\n\n            <!-- steps: 4 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step4\">\n                <h1 class=\"fbmerge__title\" lj-ml=\"fbmerging.step4.description.title\"></h1>\n            </div>\n\n            <!-- steps: 5 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step5\">\n                <h1\n                    class=\"fbmerge__title\"\n                    lj-ml=\"fbmerging.step5.description.title\"\n                    ></h1>\n                <p\n                    class=\"fbmerge__text fbmerge__text--step5\"\n                    lj-ml=\"fbmerging.step5.description.text\"\n                    ></p>\n                <p\n                    class=\"fbmerge__text fbmerge__text--step5\"\n                    ng-if=\"migration.needEmailConfirm\"\n                    >\n                    Confirm your email <a href=\"/register.bml\" target=\"_blank\">here</a>\n                    </p>\n\n            </div>\n            \n            <!-- steps: 6 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step6\">\n                <h1 class=\"fbmerge__title\" lj-ml=\"fbmerging.step6.description.title\"></h1>\n            </div>\n            \n            <!-- steps: 7 -->\n            <div class=\"fbmerge__elem\n                        fbmerge__elem--step7\">\n                <h1 class=\"fbmerge__title\" lj-ml=\"fbmerging.step7.description.title\"></h1>\n                <form\n                    class=\"fbmerge__choice-buttons\"\n                    action=\"{{migration.sendMailAction}}\"\n                    method=\"post\"\n                    >\n                    <button\n                        class=\"\n                            fbmerge__flatbutton\n                            fbmerge__flatbutton--inverse\n                            fbmerge__choice-button\n                            fbmerge__choice-button--sendmail\n                            flatbutton \n                            flatbutton--small\n                            \"\n                        name=\"action:send\"\n                        value=\"1\"\n                        type=\"submit\"\n                        lj-ml=\"fbmerging.step7.description.sendmail\"\n                        ></button>\n                    <input type=\"hidden\" name=\"authas\" value=\"{{migration.authAs}}\">\n                    <a\n                        class=\"\n                            fbmerge__choice-button\n                            fbmerge__choice-button--no-border\n                            \"\n                        ng-href=\"{{migration.siteRoot}}/manage/settings/?cat=account\"\n                        lj-ml=\"fbmerging.step7.description.options\"\n                        ></a>\n                </form>\n            </div>\n        </header>\n        <!-- /header -->\n\n        <!-- sharing -->\n        <ul class=\"fbmerge__sharing\">\n            <li class=\"fbmerge__sharing-item\">\n                <span class=\"fbmerge__sharing-text\" lj-ml=\"fbmerging.sharing.title\"></span>\n            </li>\n            <li class=\"fbmerge__sharing-item\">\n                <a href=\"#\" class=\"fbmerge__sharing-link\" ng-click=\"migration.share(\'livejournal\')\">\n                    <svg class=\"fbmerge__sharing-img\" width=\"21px\" height=\"21px\" viewBox=\"0 0 21 21\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                        <path d=\"M12.79894,15.85731 C13.36944,14.53641 14.42504,13.47381 15.74244,12.89701 L16.51314,16.62521 L12.79894,15.85731 Z M11.10284,1.43661 C9.72244,1.43661 8.41064,1.72501 7.21994,2.23881 L5.07164,0.09331 L5.06674,0.09331 C2.79874,1.08661 0.98084,2.91361 0.00014,5.19001 L2.15124,7.33831 C3.13124,5.06191 4.94844,3.23631 7.21784,2.24231 L7.22134,2.24301 L15.17404,10.18451 L15.17264,10.18451 C12.90534,11.17781 11.08604,13.00551 10.10604,15.28051 L2.15054,7.34041 L2.15054,7.34111 C1.63114,8.53461 1.32174,9.83381 1.32174,11.21841 C1.32174,16.62171 5.70024,21.00021 11.10284,21.00021 C16.50334,21.00021 20.88324,16.62031 20.88324,11.21841 C20.88324,5.81651 16.50404,1.43661 11.10284,1.43661 L11.10284,1.43661 Z\" fill=\"#FFFFFF\"></path>\n                    </svg>\n                </a>\n            </li>\n            <li class=\"fbmerge__sharing-item\">\n                <a href=\"#\" class=\"fbmerge__sharing-link\" ng-click=\"migration.share(\'facebook\')\">\n                    <svg class=\"fbmerge__sharing-img\" width=\"11px\" height=\"21px\" viewBox=\"0 0 11 21\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                        <path d=\"M13.3242729,19.6465026 L13.3242729,16.0030329 L16.4703384,16.0030329 L16.4703384,13.3161097 C16.4703384,10.1979039 18.3747478,8.5 21.1563758,8.5 C22.4887569,8.5 23.6339895,8.59922756 23.9677631,8.64354981 L23.9677631,11.90223 L22.038479,11.9031345 C20.5257336,11.9031345 20.2327545,12.621969 20.2327545,13.6768385 L20.2327545,16.0030329 L23.8406759,16.0030329 L23.3708601,19.6465026 L20.2327545,19.6465026 L20.2327545,28.5930839 L16.4703384,28.5930839 L16.4703384,19.6465026 L13.3242729,19.6465026 Z\" fill=\"#FFFFFF\" transform=\"translate(-13.000000, -8.000000)\"></path>\n                    </svg>\n                </a>\n            </li>\n            <li class=\"fbmerge__sharing-item\">\n                <a href=\"#\" class=\"fbmerge__sharing-link\" ng-click=\"migration.share(\'twitter\')\">\n                    <svg class=\"fbmerge__sharing-img\" width=\"18px\" height=\"14px\" viewBox=\"0 0 18 14\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                        <path d=\"M17.9599007,1.70276413 C17.2990905,1.98282691 16.5890102,2.1721722 15.8435869,2.25723946 C16.6043825,1.82148161 17.1886599,1.13133812 17.4637182,0.309104933 C16.7517985,0.712656502 15.9632803,1.00565202 15.1239153,1.16360717 C14.4518058,0.479239462 13.4941927,0.0515802691 12.4344263,0.0515802691 C10.3993752,0.0515802691 8.74961606,1.62824395 8.74961606,3.5728 C8.74961606,3.84884484 8.7822,4.11754439 8.84500292,4.3752574 C5.78270365,4.22841435 3.06765985,2.82653094 1.25031679,0.696145291 C0.933148905,1.21621704 0.751440876,1.82110493 0.751440876,2.46642332 C0.751440876,3.68806457 1.40193723,4.76587623 2.39062336,5.39738296 C1.78663796,5.3791139 1.21845547,5.2206565 0.721681752,4.95691659 C0.721418978,4.97160717 0.721353285,4.98636054 0.721353285,5.00117668 C0.721353285,6.70729327 1.99147007,8.13052197 3.67709781,8.4540287 C3.36787883,8.53445022 3.04236788,8.57745471 2.70634599,8.57745471 C2.46886423,8.57745471 2.23808321,8.55541883 2.01308321,8.51429776 C2.48200292,9.91329327 3.84277664,10.9313381 5.4551562,10.9598404 C4.19403942,11.9042439 2.60530949,12.4671318 0.878951825,12.4671318 C0.581557664,12.4671318 0.288236496,12.4504951 -2.6277372e-05,12.4179749 C1.63068175,13.4170601 3.56745547,13.9999749 5.64829489,13.9999749 C12.4258204,13.9999749 16.131981,8.63439641 16.131981,3.98112287 C16.131981,3.82844126 16.1283679,3.67657578 16.1213387,3.52558924 C16.8412073,3.02912287 17.4658861,2.40891659 17.9599007,1.70276413\"  fill=\"#FFFFFF\"></path>\n                    </svg>\n                </a>\n            </li>\n            <li>\n                <input\n                    type=\"hidden\"\n                    name=\"returnto\"\n                    value=\"{{migration.returnTo}}\"\n                    >\n            </li>\n        </ul>\n        <!-- /sharing -->\n\n        <!-- statuses -->\n        <div class=\"fbmerge__statuses\">\n            <div class=\"fbmerge__status fbmerge__status--fb\">\n                <svg \n                    class=\"fbmerge__status-img fbmerge__status-img--fb\" \n                    width=\"41px\" height=\"77px\" \n                    viewBox=\"0 0 41 77\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                    <path d=\"M501.307329,250.375956 L501.307329,236.589854 L513.189472,236.589854 L513.189472,226.423118 C513.189472,214.624501 520.382096,208.2 530.887822,208.2 C535.919994,208.2 540.245339,208.575456 541.505944,208.743161 L541.505944,221.073303 L534.219373,221.076725 C528.505996,221.076725 527.399465,223.79664 527.399465,227.788038 L527.399465,236.589854 L541.025958,236.589854 L539.251545,250.375956 L527.399465,250.375956 L527.399465,284.227885 L513.189472,284.227885 L513.189472,250.375956 L501.307329,250.375956 Z\" fill=\"#ffffff\" transform=\"translate(-501.000000, -208.000000)\"></path>\n                </svg>\n            </div>\n            <div class=\"fbmerge__status fbmerge__status--lj\">\n                <svg \n                    class=\"fbmerge__status-img fbmerge__status-img--lj\" \n                    width=\"82px\" height=\"84px\" \n                    viewBox=\"0 0 82 84\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                    <ellipse fill=\"#00B2ED\" cx=\"40.8747045\" cy=\"41.65\" rx=\"36.6824271\" ry=\"36.75\"></ellipse>\n                    <path d=\"M47.640062,58.94042 L61.6681208,61.84612 L58.7572829,47.73902 C53.7817484,49.92162 49.7948926,53.94242 47.640062,58.94042\" fill=\"#981658\"></path>\n                    <path d=\"M47.640062,58.94042 C49.7948926,53.94242 53.7817484,49.92162 58.7572829,47.73902 L61.6681208,61.84612 L47.640062,58.94042 Z\" fill=\"#00344B\"></path>\n                    <path d=\"M27.2679695,8.1179 L19.1545154,0 L19.1356501,0 C10.5701287,3.7583 3.70387707,10.6715 0,19.2843 L8.12463357,27.4134 C11.8257158,18.7999 18.6891726,11.8923 27.2602837,8.1312 L27.2735592,8.134 L27.2679695,8.1179 Z\" fill=\"#00B2ED\"></path>\n                    <path d=\"M7.68584187,26.9927 L7.68584187,26.9899 L37.7325926,57.0339 C41.4336748,48.4253 48.3048174,41.51 56.8682427,37.7517 L56.8731337,37.7517 L26.8375624,7.7028 L26.8242868,7.7 C18.2531757,11.4611 11.3897189,18.3687 7.68863672,26.9822 L7.68584187,26.9927 Z\" fill=\"#00344B\"></path>\n                    <path d=\"M58.9700287,47.5838092 C57.8019856,42.0097299 56.7485289,36.9790123 56.7485289,36.9790123 L56.7374399,36.9827087 C47.8810114,40.8675611 40.7729513,48.0014956 36.9398476,56.8985838 L47.4670214,59.1496543 C49.6996103,54.0043503 53.8358137,49.8311834 58.9700287,47.5838092\" fill=\"#FFFFFF\"></path>\n                </svg>\n            </div>\n        </div>\n        <!-- /statuses -->\n\n        <!-- steps: 2 -->\n        <form\n            class=\"fbmerge__container\n                fbmerge__elem\n                fbmerge__elem--step2\"\n            action=\"{{migration.loginLink}}\"\n            method=\"post\"\n            >\n            <ul class=\"fbmerge__inputs-list\">\n                <li class=\"fbmerge__inputs-item\">\n                    <label\n                        class=\"fbmerge__text-label\"\n                        for=\"fbmerge__login-username\"\n                        lj-ml=\"fbmerging.step2.form.login\"></label>\n                    <div class=\"fbmerge__input-wrapper\">\n                        <input\n                            class=\"fbmerge__text-input\"\n                            id=\"fbmerge__login-username\"\n                            name=\"user\"\n                            type=\"text\"\n                            ng-model=\"migration.step2.login\"\n                            >\n                        <span\n                            class=\"fbmerge__input-tooltip\"\n                            lj_ml=\"createaccount.error.username.inuse\"\n                            ></span>\n                    </div>\n                </li>\n                <li class=\"fbmerge__inputs-item\">\n                    <label\n                        class=\"fbmerge__text-label\"\n                        for=\"fbmerge__login-pass\"\n                        lj-ml=\"fbmerging.step2.form.password\"></label>\n                    <div class=\"fbmerge__input-wrapper\">\n                        <input\n                            class=\"fbmerge__text-input\"\n                            id=\"fbmerge__login-pass\"\n                            name=\"password\"\n                            type=\"password\"\n                            ng-model=\"migration.step2.password\"\n                            >\n                        <span\n                            class=\"fbmerge__input-tooltip\"\n                            lj_ml=\"createaccount.error.password.digits_only\"\n                            ></span>\n                    </div>\n                </li>\n            </ul>\n            \n            <div class=\"fbmerge__flatbutton-wrapper\">\n                <button\n                    class=\"\n                        fbmerge__flatbutton\n                        flatbutton\n                        flatbutton--small\n                        \"\n                    ng-class=\"{\'flatbutton--active\': migration.step2.login && migration.step2.password}\"\n                    lj-ml=\"fbmerging.step2.form.entry\"\n                    ng-disabled=\"!migration.step2.login && !migration.step2.password\"\n                    ></button>\n            </div>\n\n            <small\n                class=\"fbmerge__notice fbmerge__notice--step2\"\n                lj-ml=\"fbmerging.step2.form.notice\"\n                ></small>\n\n            <a\n                class=\"\n                    fbmerge__flatbutton\n                    fbmerge__flatbutton--fb\n                    flatbutton\n                    flatbutton--small\n                    \"\n                ng-attr-title=\"{{migration.fbLoginTitle}}\"\n                ng-href=\"{{migration.facebookLink}}\"\n                >\n                <span\n                    class=\"\n                        fbmerge__flatbutton-icon\n                        fbmerge__flatbutton-icon--fb\n                        \"\n                    lj-svg-icon=\"flaticon--facebook\"></span>\n                <span\n                    class=\"\n                        fbmerge__flatbutton-text\n                        fbmerge__flatbutton-text--fb\">\n                    Facebook\n                </span>\n                </a>\n        </form>\n        <!-- /steps: 2 -->\n\n        <!-- steps: 3 -->\n        <div class=\"fbmerge__container\n                    fbmerge__elem\n                    fbmerge__elem--step3\">\n\n            <div ng-if=\"migration.addr\">\n                <p\n                    class=\"fbmerge__text fbmerge__text--step3\"\n                    lj-ml=\"fbmerging.step3.form.text\"\n                    ></p>\n                <a\n                    class=\"\n                        fbmerge__flatbutton\n                        flatbutton\n                        flatbutton--small\n                        \"\n                    ng-href=\"{{migration.addr}}\"\n                    lj-ml=\"fbmerging.step3.form.allow\"\n                    ></a>\n            </div>\n            <div ng-if=\"!migration.addr\">\n                <ul class=\"fbmerge__inputs-list\">\n                    <li class=\"fbmerge__inputs-item\">\n                        <label\n                            class=\"fbmerge__text-label\"\n                            for=\"fbmerge__create-username\"\n                            lj-ml=\"fbmerging.step2.form.login\"\n                            ></label>\n                        <div class=\"fbmerge__input-wrapper\">\n                            <input\n                                class=\"fbmerge__text-input\"\n                                id=\"fbmerge__create-username\"\n                                name=\"user\"\n                                type=\"text\"\n                                ng-model=\"migration.username\"\n                                ng-class=\"{\'fbmerge__text-input--error\': migration.step3Errors.username.unchecked}\"\n                                >\n                            <span\n                                class=\"fbmerge__input-tooltip\"\n                                ng-style=\"{\'display\': migration.step3Errors.username.text ? \'block\' : \'none\'}\"\n                                ng-bind-html=\"migration.step3Errors.username.text\"\n                                ></span>\n                        </div>\n                        <small\n                            class=\"fbmerge__notice fbmerge__notice--step3\"\n                            lj-ml=\"createaccount.tip.username\"\n                            ></small>\n                    </li>\n                    <li class=\"fbmerge__inputs-item\">\n                        <label\n                            class=\"fbmerge__text-label\"\n                            for=\"fbmerge__create-email\"\n                            lj-ml=\"fbmerging.step3.form.mail\"\n                            ></label>\n                        <div class=\"fbmerge__input-wrapper\">\n                            <input\n                                class=\"fbmerge__text-input\"\n                                id=\"fbmerge__create-email\"\n                                name=\"email\"\n                                type=\"text\"\n                                ng-model=\"migration.email\"\n                                ng-class=\"{\'fbmerge__text-input--error\': migration.step3Errors.email.unchecked}\"\n                                >\n                            <span\n                                class=\"fbmerge__input-tooltip\"\n                                ng-style=\"{\'display\': migration.step3Errors.email.text ? \'block\' : \'none\'}\"\n                                ng-bind-html=\"migration.step3Errors.email.text\"\n                                ></span>\n                            <small\n                                class=\"fbmerge__notice fbmerge__notice--step3\"\n                                lj-ml=\"createaccount.tip.email\"\n                                ></small>\n                        </div>\n                    </li>\n                    <li class=\"fbmerge__inputs-item\">\n                        <label\n                            class=\"fbmerge__text-label\"\n                            for=\"fbmerge__create-pass\"\n                            lj-ml=\"fbmerging.step2.form.password\"\n                            ></label>\n                        <div class=\"fbmerge__input-wrapper\">\n                            <input\n                                class=\"fbmerge__text-input\"\n                                id=\"fbmerge__create-pass\"\n                                name=\"password\"\n                                type=\"password\"\n                                ng-model=\"migration.password\"\n                                ng-class=\"{\'fbmerge__text-input--error\': migration.step3Errors.password.unchecked}\"\n                                >\n                            <span\n                                class=\"fbmerge__input-tooltip\"\n                                ng-style=\"{\'display\': migration.step3Errors.password.text ? \'block\' : \'none\'}\"\n                                ng-bind-html=\"migration.step3Errors.password.text\"\n                                ></span>\n                        </div>\n                        <small\n                            class=\"fbmerge__notice fbmerge__notice--step3\"\n                            lj-ml=\"fbmerging.step3.form.user_password\"\n                            ></small>\n                    </li>\n                </ul>\n\n                <input\n                    name=\"gender\"\n                    type=\"hidden\"\n                    ng-model=\"migration.gender\"\n                    >\n\n                <div class=\"fbmerge__flatbutton-wrapper\">\n                    <a\n                    href=\"/identity/convert.bml\"\n                    target=\"_blank\"\n                    class=\"\n                        fbmerge__flatbutton\n                        flatbutton\n                        flatbutton--small\n                        \"\n                    ng-class=\"{\'flatbutton--active\': migration.convertationEnabled()}\"\n                    ng-click=\"migration.convertIdentity($event)\"\n                    lj-ml=\"fbmerging.step3.form.convert_but\"\n                    ng-disabled=\"!migration.convertationEnabled()\"\n                    ></a>\n                </div>\n                <small\n                    class=\"fbmerge__notice fbmerge__notice--step3\"\n                    lj-ml=\"fbmerging.step2.form.notice\"\n                    ></small>\n            </div>\n        </div>\n        <!-- /steps: 3 -->\n\n        <!-- steps: 4 -->\n        <form class=\"fbmerge__container\n                    fbmerge__elem\n                    fbmerge__elem--step4\">\n            <h3\n                class=\"fbmerge__subtitle\"\n                lj-ml=\"fbmerging.step4.form.title\"></h3>\n            <ul class=\"fbmerge__options\">\n                <li class=\"fbmerge__option\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"radio\"\n                            name=\"period\"\n                            ng-model=\"migration.period\"\n                            ng-value=\"migration.week\"\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.week\"></span>\n                    </label>\n                </li>\n                <li class=\"fbmerge__option\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"radio\"\n                            name=\"period\"\n                            ng-model=\"migration.period\"\n                            ng-value=\"migration.month\"\n                            checked\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.mounth\"></span>\n                    </label>\n                </li>\n                <li class=\"fbmerge__option\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"radio\"\n                            name=\"period\"\n                            ng-model=\"migration.period\"\n                            ng-value=\"migration.halfYear\"\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.halfyear\"></span>\n                    </label>\n                </li>\n                <li class=\"fbmerge__option\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"radio\"\n                            name=\"period\"\n                            ng-model=\"migration.period\"\n                            ng-value=\"0\"\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.all\"></span>\n                    </label>\n                </li>\n                <li class=\"fbmerge__option\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"radio\"\n                            name=\"period\"\n                            ng-model=\"migration.period\"\n                            ng-value=\"1\"\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.nothing\"></span>\n                    </label>\n                </li>\n                <li class=\"fbmerge__option fbmerge__option--autoimport\">\n                    <label class=\"fbmerge__option-label\">\n                        <input\n                            class=\"fbmerge__option-input\"\n                            type=\"checkbox\"\n                            ng-model=\"migration.autoImport\"\n                            >\n                        <span\n                            class=\"fbmerge__option-text\"\n                            lj-ml=\"fbmerging.step4.form.autoimport\"></span>\n                    </label>\n                </li>\n            </ul>\n            <div class=\"fbmerge__flatbutton-wrapper\">\n                <button\n                    ng-click=\"migration.setPeriod()\"\n                    class=\"\n                        fbmerge__flatbutton\n                        flatbutton\n                        flatbutton--small\n                        \"\n                    lj-ml=\"fbmerging.step4.form.save\"\n                    ></button>\n            </div>\n        </form>\n        <!-- /steps: 4 -->\n\n        <!-- close button -->\n        <span\n            ng-click=\"migration.hide()\"\n            class=\"fbmerge__close modal__close\">\n            <span\n                class=\"fbmerge__close-icon\"\n                lj-svg-icon=\"flaticon--cross\"></span>\n        </span>\n        <!-- /close button -->\n    </div>\n</div>\n\n';
LJ.injectStyle('/* >>> file start: stc/widgets/facebookmigration.css */\n.fbmerge{width:820px;min-height:410px;text-align:left;font:400 15px/1.4 ProximaNova,Helvetica,sans-serif!important;letter-spacing:.01em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fbmerge__elem--step1,.fbmerge__elem--step2,.fbmerge__elem--step3,.fbmerge__elem--step4,.fbmerge__elem--step5,.fbmerge__elem--step6,.fbmerge__elem--step7{display:none}.fbmerge__title{margin:73px 0 0!important;width:300px;font-size:28px;line-height:31px;font-weight:700;-webkit-font-feature-settings:\"kern\" off;font-feature-settings:\"kern\" off;font-variant:none;letter-spacing:inherit;word-spacing:normal;color:#FFF!important}.fbmerge__descr{position:absolute;box-sizing:border-box;top:0;left:0;padding-left:40px;width:50%;min-height:410px;-webkit-transition:opacity ease 1s;transition:opacity ease 1s;color:#FFF!important;z-index:2}.fbmerge__descr::after,.fbmerge__descr::before{content:\'\';display:table;clear:both}.fbmerge__container{position:relative;box-sizing:border-box;margin:0 0 0 auto;padding:0 50px 0 40px;width:50%;color:#4c4c4c!important}.fbmerge--step2 .fbmerge__container,.fbmerge--step3 .fbmerge__container,.fbmerge--step4 .fbmerge__container{padding-top:40px;padding-bottom:20px}.fbmerge__text{padding:0}.fbmerge__choice-buttons{min-width:174px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.fbmerge__choice-button{margin-bottom:10px}.fbmerge__choice-button:last-child{margin-bottom:0}.fbmerge__choice-button:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px)}.fbmerge__choice-button--no-border{padding:8px 20px;background-color:transparent;border:0;outline:0;text-align:center;text-transform:uppercase;font-size:11px;line-height:12px;color:#fff!important;cursor:pointer}.fbmerge__choice-button--no-border:hover,.fbmerge__choice-button--no-border:visited{color:#fff!important}.fbmerge__statuses{position:absolute;top:0;bottom:0;left:0;width:100%;border-radius:5px;background-color:#1EB2EA;-webkit-transition:width ease .7s;transition:width ease .7s;z-index:1}.fbmerge__status--fb,.fbmerge__status--lj{box-sizing:border-box;position:absolute;border:3px solid #FFF;width:162px;height:162px;bottom:84px;border-radius:50%;overflow:hidden}.fbmerge__status--lj{left:564px;background-color:#FFF;box-shadow:0 0 0 7px #00B1ED inset;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);-webkit-transition:ease 1s;transition:ease 1s;-webkit-transition-property:border,bottom,left;transition-property:border,bottom,left}.fbmerge__status-img--lj{position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%) rotate(-45deg);-ms-transform:translateX(-50%) translateY(-50%) rotate(-45deg);transform:translateX(-50%) translateY(-50%) rotate(-45deg);-webkit-transition:all ease .7s;transition:all ease .7s}.fbmerge__status--fb{left:441px;-webkit-transition:all ease .7s;transition:all ease .7s}.fbmerge__status-img--fb{position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:40px;height:76px;-webkit-transition:all ease .7s;transition:all ease .7s}.fbmerge--need-action .fbmerge__statuses{width:50%;border-radius:5px 0 0 5px}.fbmerge--need-action .fbmerge__status--lj{left:40px;bottom:48px}.fbmerge--need-action .fbmerge__status--fb{width:0;height:0;border-width:0}.fbmerge--need-action .fbmerge__status-img--fb{width:0;height:0}.fbmerge--need-action.fbmerge--loading .fbmerge__statuses{width:100%;border-radius:5px;-webkit-transition-duration:.5s;transition-duration:.5s}.fbmerge__sharing{position:absolute;left:40px;bottom:56px;margin:0;padding:0;line-height:0;list-style:none;font-size:0;opacity:0;-webkit-transition:opacity ease 1s;transition:opacity ease 1s;z-index:2}.fbmerge__sharing-item{display:inline-block;vertical-align:middle}.fbmerge__sharing-item+.fbmerge__sharing-item{margin-left:22px}.fbmerge__sharing-text{display:inline-block;width:90px;font-size:16px;line-height:18px;color:#FFF!important}.fbmerge__sharing-link{position:relative;display:inline-block;width:35px;height:35px;border:1px solid #FFF;border-radius:50%}.fbmerge__sharing-link:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px)}.fbmerge__sharing-img{position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.fbmerge--step5 .fbmerge__sharing,.fbmerge--step6 .fbmerge__sharing{opacity:1}.fbmerge--hide-sharing .fbmerge__sharing{display:none}.fbmerge__notice{display:block;margin-top:15px;font-size:11px;line-height:12px}.fbmerge__flatbutton-wrapper{margin:25px 0}.fbmerge__flatbutton{min-width:140px;box-sizing:border-box;padding-left:20px;padding-right:20px;border-width:2px;border-color:currentColor}.fbmerge__flatbutton[disabled]{background-color:transparent;color:#AAB7BB!important}.fbmerge__flatbutton:active,.fbmerge__flatbutton:focus,.fbmerge__flatbutton:hover{background-color:transparent;color:#00A2D9!important}.fbmerge__flatbutton--inverse{background-color:transparent;border-color:currentColor;color:#FFF!important}.fbmerge__flatbutton--inverse:active,.fbmerge__flatbutton--inverse:focus,.fbmerge__flatbutton--inverse:hover{color:#FFF!important}.fbmerge__flatbutton--fb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:37px 0 0;padding:0;font-size:16px}.fbmerge__flatbutton--fb,.fbmerge__flatbutton--fb:hover,.fbmerge__flatbutton--fb:link,.fbmerge__flatbutton--fb:visited{background:0 0;border:0;color:#4c4c4c!important}.fbmerge__flatbutton--fb:focus,.fbmerge__flatbutton--fb:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px)}.fbmerge__flatbutton--fb:focus::before{content:none}.fbmerge__flatbutton-icon--fb{width:30px;height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;vertical-align:middle;margin-right:5px;margin-top:-2px;border:2px solid #00A2D9;border-radius:50%;line-height:32px;box-sizing:border-box}.fbmerge__flatbutton-icon--fb .svgicon{height:16px;fill:#00A2D9}.fbmerge__inputs-list{margin:0;padding:0;list-style:none}.fbmerge__inputs-item{margin-bottom:23px}.fbmerge__inputs-item:last-child{margin-bottom:0}.fbmerge__input-wrapper{position:relative;margin:6px 0}.fbmerge__text-input{display:block;width:100%;box-sizing:border-box;border-width:0;border-bottom:1px solid #979797;outline:0;font-size:14px;line-height:1.4;font-weight:700;background:0 0;color:#00A2D9!important}.fbmerge__text-input--error{color:#d20922!important}.fbmerge__text-input+.fbmerge__text-label{margin-top:25px}.fbmerge__text-label+.fbmerge__text-input{margin-top:5px}.fbmerge__input-tooltip{display:none;margin-top:5px;font-size:11px;line-height:1.2;color:#d0021b!important}.fbmerge__container input:-webkit-autofill,.fbmerge__container input:-webkit-autofill:focus,.fbmerge__container input:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 1000px #fff inset}.fbmerge__subtitle,.fbmerge__text-label{display:block;margin:0;text-transform:uppercase;font-size:16px;line-height:18px;font-weight:600;color:inherit!important}.fbmerge__options{margin:18px 0 0;padding:0;list-style:none}.fbmerge__option{margin-bottom:15px}.fbmerge__option:last-child{margin-bottom:0}.fbmerge__option-input{display:none}.fbmerge__option-text{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:14px;line-height:1.2;cursor:pointer}.fbmerge__option-text::before{content:\'\';display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:27px;height:27px;margin-right:15px;border:2px solid #C3D3D9;border-radius:50%}.fbmerge--step1:not(.fbmerge--loading) .fbmerge__elem--step1,.fbmerge--step2:not(.fbmerge--loading) .fbmerge__elem--step2,.fbmerge--step3:not(.fbmerge--loading) .fbmerge__elem--step3,.fbmerge--step4:not(.fbmerge--loading) .fbmerge__elem--step4,.fbmerge--step5:not(.fbmerge--loading) .fbmerge__elem--step5,.fbmerge--step6:not(.fbmerge--loading) .fbmerge__elem--step6{display:block}.fbmerge--step2 .fbmerge__status--lj,.fbmerge--step3 .fbmerge__status--lj{border-bottom-color:#008CC1;border-left-color:#008CC1}.fbmerge__option-input:checked+.fbmerge__option-text::before{border-color:#00A2D9;background-image:url(\'data:image/svg+xml;charset=UTF-8, %3Csvg%20width%3D%2214px%22%20height%3D%2210px%22%20viewBox%3D%220%200%2014%2010%22%20version%3D%221.1%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%3E%3Cg%20id%3D%22Group-2%22%20transform%3D%22translate%28-469.000000%2C%20-152.000000%29%22%20fill%3D%22none%22%20stroke-width%3D%222%22%3E%3Cpolyline%20points%3D%22471%20156.648053%20474.882762%20160%20480.961931%20154%22%20stroke%3D%22%2300B2ED%22%3E%3C/polyline%3E%3C/g%3E%3C/svg%3E\');background-position:50% 50%;background-repeat:no-repeat}.fbmerge__option-input[disabled]+.fbmerge__option-text{pointer-events:none;cursor:default}.fbmerge__option-input[disabled]:checked+.fbmerge__option-text::before{border-color:#C3D3D9!important;background-image:url(\'data:image/svg+xml;charset=UTF-8, %3Csvg%20width%3D%2214px%22%20height%3D%2210px%22%20viewBox%3D%220%200%2014%2010%22%20version%3D%221.1%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%3E%3Cg%20id%3D%22Group-2%22%20transform%3D%22translate%28-469.000000%2C%20-152.000000%29%22%20fill%3D%22none%22%20stroke-width%3D%222%22%3E%3Cpolyline%20points%3D%22471%20156.648053%20474.882762%20160%20480.961931%20154%22%20stroke%3D%22%23C3D3D9%22%3E%3C/polyline%3E%3C/g%3E%3C/svg%3E\');background-position:50% 50%;background-repeat:no-repeat}.fbmerge__option--autoimport{margin-top:30px}.fbmerge__close::after,.fbmerge__close::before{content:none}.fbmerge .flaticon--cross{width:20px;height:20px;fill:#FFF!important}.fbmerge--need-action .flaticon--cross{fill:#00A2D9!important}.fbmerge--step1 .fbmerge__title{margin-bottom:60px!important}.fbmerge--loading.fbmerge--step1 .fbmerge__status--fb,.fbmerge--loading.fbmerge--step1 .fbmerge__status--lj{width:0;height:0;border-width:0}.fbmerge--step1 .fbmerge__status--lj{-webkit-transition:ease .7s;transition:ease .7s;-webkit-transition-property:border,bottom,left,width,height;transition-property:border,bottom,left,width,height}.fbmerge--step1 .fbmerge__status--fb{-webkit-transition-delay:.3s;transition-delay:.3s}.fbmerge--step2 .fbmerge__status--lj{border-right-color:#008CC1}.fbmerge--step2 .fbmerge__flatbutton{min-width:140px}.fbmerge__text--step3{margin:0 0 30px;font-size:14px;line-height:17px;font-weight:700}.fbmerge--step3 .fbmerge__input-wrapper{margin-bottom:0}.fbmerge--step4 .fbmerge__status--lj{border-left-color:#008CC1}.fbmerge--step5 .fbmerge__status--fb{background-color:#FFF;box-shadow:0 0 0 7px #00B1ED inset}.modal.fbmerge--step5 .fbmerge__status-img--fb path{fill:#00B1ED!important}.fbmerge__text--step5{margin:13px 0 0;font-size:16px;line-height:18px}.fbmerge--step6 .fbmerge__status--fb{display:none}.fbmerge--step6 .fbmerge__status--lj{left:465px;bottom:60px;width:224px;height:224px;box-shadow:0 0 0 8px #00B1ED inset,0 0 0 11px #fff inset,0 0 0 21px #00B1ED inset;-webkit-transition:ease .5s;transition:ease .5s;-webkit-transition-property:left,bottom,width,height;transition-property:left,bottom,width,height}.fbmerge--step6 .fbmerge__status-img--lj{width:100px;height:100px;-webkit-transition:ease .5s;transition:ease .5s;-webkit-transition-property:width,height,top,left;transition-property:width,height,top,left}.fbmerge--step7:not(.fbmerge--loading) .fbmerge__elem--step7{display:block}.fbmerge--step7 .fbmerge__title{margin-bottom:60px!important}@media (max-width:850px){.fbmerge{width:660px}.fbmerge__status--fb{left:320px}.fbmerge__status--lj{left:441px}.fbmerge__title{margin:36px 0 0!important;width:270px}.fbmerge__sharing-item{margin-right:15px}.fbmerge__sharing-item:last-child{margin-right:0}.fbmerge__sharing-item+.fbmerge__sharing-item{margin-left:0}.fbmerge--step6 .fbmerge__status--lj{left:400px}}@media (max-width:680px){.body--fbmerge-opened{overflow:hidden;max-height:100%}.fbmerge{width:90%;height:auto;min-height:0;max-height:95%;overflow:auto}.fbmerge__statuses{display:none}.fbmerge__descr{position:relative;width:100%;min-height:0;padding:0 35px 0 20px;background-color:#00b1ed}.fbmerge__title{width:auto;margin-top:30px!important;margin-bottom:30px!important;padding:15px 0;font-size:25px;line-height:28px;text-align:left}.fbmerge--need-action .fbmerge__title{margin:0!important;font-size:18px;line-height:22px}.fbmerge--need-action .fbmerge__container,.fbmerge__container{width:100%;padding:25px}.fbmerge__notice{margin-top:10px}.fbmerge__close{z-index:100;top:15px;right:10px}.fbmerge--need-action .flaticon--cross{fill:#FFF!important}.fbmerge__choice-buttons{display:block;width:100%;padding-bottom:30px}.fbmerge__choice-button{display:inline-block;width:auto}.fbmerge__inputs-item{margin-bottom:20px}.fbmerge__text-label{margin-bottom:5px;font-size:14px;line-height:1}.fbmerge__input-wrapper{margin:0}.fbmerge__flatbutton-wrapper{margin:20px 0;text-align:center}.fbmerge__flatbutton--fb,.fbmerge__option--autoimport{margin-top:20px}.fbmerge__flatbutton-wrapper:last-child{margin-bottom:0}.fbmerge__option{margin-bottom:8px}.fbmerge__sharing{display:none;position:relative;left:auto;bottom:auto;padding:0 20px}.fbmerge__sharing-text{width:auto}.fbmerge--step6 .fbmerge__sharing{display:block}.fbmerge--hide-sharing .fbmerge__sharing{display:none}.fbmerge__elem--step1{text-align:center}.fbmerge--step5{padding-bottom:30px;background:#00b1ed}.fbmerge__text--step5{margin-bottom:20px}.fbmerge--step6{padding-bottom:50px;background:#00b1ed}}\n/* <<< file end: stc/widgets/facebookmigration.css */\n\n/*# sourceMappingURL=facebookmigration.css.map */\n');
//= require_ml fbmerging.step1.description.title
//= require_ml fbmerging.step1.description.agreement
//= require_ml fbmerging.step1.description.refusing
//= require_ml fbmerging.step2.description.title
//= require_ml fbmerging.step3.description.title
//= require_ml fbmerging.step3.description.title2
//= require_ml fbmerging.step4.description.title
//= require_ml fbmerging.step5.description.title
//= require_ml fbmerging.step5.description.text
//= require_ml fbmerging.step6.description.title
//= require_ml fbmerging.sharing.title
//= require_ml fbmerging.step2.form.login
//= require_ml fbmerging.step2.form.password
//= require_ml fbmerging.step2.form.entry
//= require_ml /login.bml.connect.facebook
//= require_ml fbmerging.step2.form.notice
//= require_ml fbmerging.step3.form.text
//= require_ml fbmerging.step3.form.allow
//= require_ml fbmerging.step2.form.login
//= require_ml fbmerging.step3.form.mail
//= require_ml fbmerging.step3.form.convert_but
//= require_ml fbmerging.step3.form.user_password
//= require_ml fbmerging.step4.form.title
//= require_ml fbmerging.step4.form.week
//= require_ml fbmerging.step4.form.mounth
//= require_ml fbmerging.step4.form.halfyear
//= require_ml fbmerging.step4.form.all
//= require_ml fbmerging.step4.form.nothing
//= require_ml fbmerging.step4.form.autoimport
//= require_ml fbmerging.step4.form.save
//= require_ml fbmerging.step5.sharing.title
//= require_ml fbmerging.step5.sharing.text
//= require_ml createaccount.tip.username
//= require_ml createaccount.tip.email
//= require_ml createaccount.error.username.inuse
//= require_ml createaccount.error.password.digits_only
//= require_ml fbmerging.step7.description.title
//= require_ml fbmerging.step7.description.sendmail
//= require_ml fbmerging.step7.description.options
!function(e){return e}(),function(){"use strict";function e(e,o,t){function r(e,o){var t={facebook:"fbsharing",twitter:"twsharing"};return t[o]?e+"?utm_source="+t[o]+"&utm_medium=social":e}function n(o){var t=LJ.ml("fbmerging.step5.sharing.title"),n=LJ.ml("fbmerging.step5.sharing.text",{journal_url:Site.remote.journal_url}),s=Site.remote.journal_url;if("livejournal"===o)return void e.open("/update.bml?event="+l(n)+"&subject="+l(t));var u=a[o]({title:t,text:n,link:r(s,o)});i(u)}function i(o){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.allowScrollbars||!1,n=r?1:0;e.open(o,"","left="+(u.width-630)/2+",top="+(u.height-440)/2+",toolbar=0,status=0,scrollbars="+n+",menubar=0,location=0,width=630,height=440")}var a,s={};moment().format("ZZ");s.share=n;var l=e.encodeURIComponent.bind(e),u=e.screen||{width:1e3,height:1e3};return a={facebook:function(e){var o=e.text,t=e.title,r=e.link;return"https://www.facebook.com/sharer.php?u="+l(r)+"&description="+l(o)+"&title="+l(t)},livejournal:function(e){var o=e.text,t=e.title,r=e.link;return"https://livejournal.com/update.bml?subject="+l(t)+"&event="+l('<a href="'+r+'">'+t+"</a> "+o)},twitter:function(e){var o=e.link,t=e.title;return"https://twitter.com/share?text="+l(t)+"&via=livejournalru&url="+l(o)}},s}function o(e){return""!==e&&angular.isDefined(e)}function t(){var e=LJ.Cookie.get(a);try{return angular.fromJson(e)}catch(o){return null}}function r(e){LJ.Cookie.setGlobal(a,angular.toJson(e),{expires:s})}function n(e,n,i,a,s,l){function u(o){e.$watch(function(){return c[o]},function(e,t){e!==t&&c.step3Errors[o]&&(c.step3Errors[o].unchecked=!1)})}var c=this,d=!1,m=!1,f=!1;c.hidden=!0;var g=t()||{};c.step=g.agreed||e.step>4?e.step:1,e.needEmailConfirm&&6===c.step&&(c.step=7),c.stepAfterSignIn=e.step,c.addr=e.addr,c.username=e.user,c.password,c.email=e.mail,c.gender=e.gender,c.needEmailConfirm=e.needEmailConfirm,c.loginLink=i.trustAsResourceUrl(e.loginLink),c.facebookLink=e.facebookLink,c.step2={},c.share=l.share,c.step3Errors={username:"",email:"",password:""},c.returnTo=e.returnTo,c.siteRoot=LJ.get("siteroot"),c.sendMailAction=i.trustAsResourceUrl(c.siteRoot+"/register.bml"),c.fbLoginTitle=LJ.ml("/login.bml.connect.facebook"),c.autoImport=!0,c.week=604800,c.month=2592e3,c.halfYear=15552e3,c.period=c.month,c.authAs=LJ.get("remoteUser"),u("username"),u("email"),u("password"),c.show=function(t){t&&(c.step=t,m=!0,c.autoImport=!o(e.noMigration)),angular.element("body").addClass("p-fader").addClass("body--fbmerge-opened"),c.hidden=!1},c.hide=function(){var e=t()||{};e.closed=!0,r(e),f&&a.location.reload(),c.hidden=!0,angular.element("body").removeClass("p-fader").removeClass("body--fbmerge-opened")},c.importStep=function(){c.loading=!0,n(function(){r({agreed:!0,closed:!1}),Site.remote?c.step=c.stepAfterSignIn:c.step=2,c.loading=!1},700)},c.setPeriod=function(){c.loading=!0,s.call("settings.set_fb_digest_status",{period:c.period,disable_auto_migration:!c.autoImport,silent:!0}).then(function(o){"ok"===o.status&&(m&&(f=!0),e.needEmailConfirm||d?(c.username&&(c.authAs=c.username),c.step=7):c.step++,c.loading=!1)})},c.convertIdentity=function(e){e.preventDefault(),c.loading=!0,s.call("signup.convert_identity_lite",{create:1,username:c.username,password:c.password,passwordconfirm:c.password,email:c.email,gender:"U",silent:!0}).then(function(e){"ok"===e.status&&(d=!0,c.step++,c.loading=!1),"error"===e.status&&(Object.keys(c.step3Errors).forEach(function(o){return e[o]?void(c.step3Errors[o]={text:i.trustAsHtml(e[o]),unchecked:!0}):void(c.step3Errors[o]="")}),c.loading=!1)})},c.convertationEnabled=function(){return c.username&&c.email&&c.password}}function i(e,r,i){function a(n,a,s,l){var u=o(n.showLater),c=t()||{},d=LiveJournal.parseGetArgs().fbmn,m=i[0].referrer,f=m&&m.match(/^https?:\/\/([^\/]+\.)?facebook\.com(\/|$)/i),g=d||f&&!c.closed&&!u;return g||u?(a.html(e(r.get("facebook_migration.tmpl"))(n)),u&&angular.element(".js-popup-shower").click(function(){l.show(4),n.$apply()}),void(g&&l.show())):void a.remove()}return{scope:{step:"=facebookMigrationStep",addr:"@facebookMigrationAddr",user:"@facebookMigrationUser",mail:"@facebookMigrationMail",gender:"@facebookMigrationGender",needEmailConfirm:"=facebookMigrationNeedEmailConfirm",loginLink:"@facebookMigrationLoginLink",facebookLink:"@facebookMigrationFacebookLink",returnTo:"@facebookMigrationReturnTo",showLater:"@facebookMigrationShowLater",noMigration:"@facebookMigrationDisableAutoMigration"},controllerAs:"migration",controller:n,link:a}}e.$inject=["$window","$location","Api"],i.$inject=["$compile","$templateCache","$document"],n.$inject=["$scope","$timeout","$sce","$window","Api","shareService"],angular.module("Migration.Facebook",["LJ.Api"]),angular.module("Migration.Facebook").config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).factory("shareService",e).directive("facebookMigration",i).controller("migrationController",n);var a="facebookMigrationStatus",s=14;angular.element(document).ready(function(){var e=angular.element("[facebook-migration]");if(e.length){var o=e.eq(0).scope();o||angular.bootstrap("[facebook-migration]",["Migration.Facebook"])}})}();
/* <<< file end: js/facebookMigration/migration.js */

//# map link was there [migration.js.map]
/* >>> file start: js/ljwidget.js */
LJWidget=new Class(Object,{updateContent:function(t){t||(t={}),this._show_frame=t.showFrame,t.method&&(method=t.method),t._widget_update=1,this.doAjaxRequest(t)&&this.hilightFrame()},getWidget:function(){return $(this.widgetId)},doPost:function(t){t||(t={}),this._show_frame=t.showFrame;var e={},i=this.widgetClass;i="Widget["+i.replace(/::/g,"_")+"]_";for(var a in t){var r=a;a.match(/^Widget\[/)||"lj_form_auth"==a||a.match(/^_widget/)||(r=i+a),e[r]=t[a]}e._widget_post=1,this.doAjaxRequest(e)},doPostAndUpdateContent:function(t){t||(t={}),t._widget_update=1,this.doPost(t)},postForm:function(t){if(!t)return!1;for(var e={},i=0;i<t.elements.length;i++){var a=t.elements[i],r=a.name,o=a.value;e[r]=o}this.doPost(e)},init:function(t,e,i){LJWidget.superClass.init.apply(this,arguments),this.widgetId=t,this.widgetClass=e,this.authToken=i},hilightFrame:function(){if(1==this._show_frame&&!this._frame){var t=this.getWidget();if(t){var e=t.parentNode;if(e){var i=document.createElement("fieldset");i.style.borderColor="red";var a=document.createElement("legend");a.innerHTML="Updating...",i.appendChild(a),e.appendChild(i),i.appendChild(t),this._frame=i}}}},removeHilightFrame:function(){if(1==this._show_frame){var t=this.getWidget();if(t&&this._frame){var e=this._frame.parentNode;e&&(e.appendChild(t),e.removeChild(this._frame),this._frame=null)}}},method:"POST",endpoint:"widget",requestParams:{},doAjaxRequest:function(t){if(t||(t={}),this._ajax_updating)return!1;this._ajax_updating=!0,t._widget_id=this.widgetId,t._widget_class=this.widgetClass,t.auth_token=this.authToken,$("_widget_authas")&&(t.authas=$("_widget_authas").value);var e={method:this.method,data:HTTPReq.formEncoded(t),url:LiveJournal.getAjaxUrl(this.endpoint),onData:this.ajaxDone.bind(this),onError:this.ajaxError.bind(this)};for(var i in t)e[i]=t[i];return HTTPReq.getJSON(e),!0},ajaxDone:function(t){if(this._ajax_updating=!1,this.removeHilightFrame(),t._widget_body&&t._widget_body.match(/ajax:.[^"]+/)&&(this.authToken=t._widget_body.match(/ajax:.[^"]+/)[0]),t.auth_token&&(this.authToken=t.auth_token),t.errors&&""!=t.errors)return this.ajaxError(t.errors);if(t.error)return this.ajaxError(t.error);if(this.onData&&this.onData(t),t._widget_body){var e=this.getWidget();if(!e)return;e.innerHTML=t._widget_body,this.onRefresh&&this.onRefresh()}},ajaxError:function(t){this._ajax_updating=!1,this.skipError||(this.onError?this.onError(t):LiveJournal.ajaxError(t))}}),LJWidget.widgets=[];
/* <<< file end: js/ljwidget.js */

//# map link was there [ljwidget.js.map]
/* >>> file start: js/deprecated/dom.js */
function _textSpan(){return _textElements("span",arguments)}function _textDiv(){return _textElements("div",arguments)}function _textElements(t,e){for(var n=[],r=0;r<e.length;r++){var u=document.createElement(t);u.innerHTML=e[r],n.push(u)}return 1==n.length?n[0]:n}
/* <<< file end: js/deprecated/dom.js */

//# map link was there [dom.js.map]
/* >>> file start: js/ippu.js */
function changeOpac(e,t){var i=$(e);if(i&&i.style){var s=i.style;s&&(IPPU.isSafari()&&t>=100&&(t=99.99),s.filters&&(s.filters.alpha.opacity=100*t),s.opacity=t)}}IPPU=new Class(Object,{setFixedPosition:function(e){IPPU.isIE()||(this.fixedPosition=e,this.updateContent())},clickHandler:function(e){if(this.clickToClose&&this.visible()){e=Event.prep(e);var t=e.target;DOM.getAncestorsByClassName(t,"ippu",!0).length>0||this.cancel()}},setCancelledCallback:function(e){this.cancelledCallback=e},cancel:function(){this.cancelledCallback&&this.cancelledCallback(),this.hide()},setHiddenCallback:function(e){this.hiddenCallback=e},setupClickCapture:function(){if(this.visible()&&!this.clickHandlerSetup&&(this.clickToClose||this.modal)){if(this.clickHandlerFunc=this.clickHandler.bindEventListener(this),this.modal){if(this.overlay)return;this.overlay=document.createElement("div"),this.overlay.style.left="0px",this.overlay.style.top="0px",this.overlay.style.margin="0px",this.overlay.style.padding="0px",this.overlay.style.backgroundColor="#000000",this.overlay.style.zIndex="900",IPPU.isIE()?(this.overlay.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=50)",this.overlay.style.position="absolute",this.overlay.style.width=document.body.scrollWidth,this.overlay.style.height=document.body.scrollHeight):this.overlay.style.position="fixed",this.ele.parentNode.insertBefore(this.overlay,this.ele),this.updateOverlay(),DOM.addEventListener(this.overlay,"click",this.clickHandlerFunc)}else DOM.addEventListener(document,"click",this.clickHandlerFunc);this.clickHandlerSetup=!0}},updateOverlay:function(){if(this.overlay){var e=DOM.getClientDimensions();this.overlay.style.width=e.x-1+"px",IPPU.isIE()||(this.overlay.style.height=e.y-1+"px"),this.visibleOverlay?(this.overlay.backgroundColor="#000000",changeOpac(this.overlay,.5)):(this.overlay.backgroundColor="#FFFFFF",changeOpac(this.overlay,0))}},resizeHandler:function(e){this.updateContent()},removeClickHandlers:function(){if(this.clickHandlerSetup){DOM.removeEventListener(document,"click",this.clickHandlerFunc,!1),this.overlay&&(DOM.removeEventListener(this.overlay,"click",this.clickHandlerFunc,!0),this.overlay.parentNode.removeChild(this.overlay),this.overlay=void 0),this.clickHandlerFunc=void 0,this.clickHandlerSetup=!1}},setClickToClose:function(e){if(this.clickToClose=e,!this.clickHandlerSetup&&e&&this.visible()){var t=this.setupClickCapture.bind(this);window.setTimeout(t,100)}else!e&&this.clickHandlerSetup&&this.removeClickHandlers();this.updateContent()},setModal:function(e){var t=this.modal==e;e&&this.setClickToClose(!1),this.modal=e,t&&(this.removeClickHandlers(),this.updateContent())},setOverlayVisible:function(e){this.visibleOverlay=e,this.updateContent()},updateContent:function(){this.autoCenter(),this.updateTitlebar(),this.updateOverlay(),this.titlebar&&this.setTitlebarClass(this.titlebar.className);var e=this.setupClickCapture.bind(this);window.setTimeout(e,100),this.fixedPosition&&"fixed"!=this.ele.style.position?this.ele.style.position="fixed":this.fixedPosition||"fixed"!=this.ele.style.position||(this.ele.style.position="absolute")},getTitlebarElement:function(){return this.titlebar},setTitlebarClass:function(e){this.titlebar&&(this.titlebar.className=e)},setOverflow:function(e){this.ele&&(this.ele.style.overflow=e)},visible:function(){return this.shown},setTitlebar:function(e){if(this.showTitlebar=e,e){if(!this.titlebar){var t=document.createElement("div");if(!t)return;t.style.width="100%",this.title&&(t.innerHTML=this.title),this.ele.insertBefore(t,this.content),this.titlebar=t}}else this.titlebar&&(this.ele.removeChild(this.titlebar),this.titlebar=!1)},setTitle:function(e){this.title=e,this.updateTitlebar()},updateTitlebar:function(){this.showTitlebar&&this.titlebar&&this.title!=this.titlebar.innerHTML&&(this.titlebar.innerHTML=this.title)},addClass:function(e){DOM.addClassName(this.ele,e)},removeClass:function(e){DOM.removeClassName(this.ele,e)},setAutoCenterCallback:function(e){this.autoCenterCallback=e},autoCenter:function(){if(this.visible&&this.visible()){if(this.autoCenterCallback)return void this.autoCenterCallback(this);this.autoCenterX&&this.centerX(),this.autoCenterY&&this.centerY()}},center:function(){this.centerX(),this.centerY()},centerOnWidget:function(e,t,i){t=t||0,i=i||0,this.setAutoCenter(!1,!1),this.setAutoCenterCallback(null);var s=DOM.getAbsoluteDimensions(e),n=DOM.getAbsoluteDimensions(this.ele),l=s.absoluteRight-s.offsetWidth/2-n.offsetWidth/2+i,o=s.absoluteBottom-s.offsetHeight/2-n.offsetHeight/2+t;l=0>l?0:l,o=0>o?0:o,DOM.setLeft(this.ele,l),DOM.setTop(this.ele,o)},centerX:function(){if(this.visible&&this.visible()){var e=DOM.getClientDimensions(),t=e.x/2-this.ele.offsetWidth/2;if(!this.fixedPosition){var i=DOM.getWindowScroll();t+=i.left}DOM.setLeft(this.ele,t)}},centerY:function(){if(this.visible&&this.visible()){var e=DOM.getClientDimensions(),t=e.y/2-this.ele.offsetHeight/2;if(!this.fixedPosition){var i=DOM.getWindowScroll();t+=i.top}DOM.setTop(this.ele,t)}},setAutoCenter:function(e,t){return this.autoCenterX=e||!1,this.autoCenterY=t||!1,e||t?void this.autoCenter():void this.setAutoCenterCallback(null)},setDimensions:function(e,t){e+="",t+="",e.match(/^\d+$/)&&(e+="px"),t.match(/^\d+$/)&&(t+="px"),this.ele.style.width=e,this.ele.style.height=t},moveForward:function(e){e||(e=1),this.ele&&(this.ele.style.zIndex+=e)},moveBackward:function(e){e||(e=1),this.ele&&(this.ele.style.zIndex-=e)},setLocation:function(e,t){this.setLeft(e),this.setTop(t)},setTop:function(e){"string"!=typeof e&&(e+="px"),this.ele.style.top=e},setLeft:function(e){"string"!=typeof e&&(e+="px"),this.ele.style.left=e},getElement:function(){return this.ele},setContent:function(e){this.content.innerHTML=e},setContentElement:function(e){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild);!function(e){return e}(),this.content.appendChild(e)},setFadeIn:function(e){this.fadeIn=e},setFadeOut:function(e){this.fadeOut=e},setFadeSpeed:function(e){this.fadeSpeed=e},show:function(){if(this.shown=!0,this.fadeIn){var e=.01;changeOpac(this.ele,e)}document.body.appendChild(this.ele),this.ele.style.position="absolute",(this.autoCenterX||this.autoCenterY)&&this.center(),this.updateContent(),this.resizeHandlerFunc||(this.resizeHandlerFunc=this.resizeHandler.bindEventListener(this),DOM.addEventListener(window,"resize",this.resizeHandlerFunc,!1)),this.fadeIn&&this.fade("in"),this.hideSelects()},fade:function e(t,i){var s,n,l=10;if("in"==t)n=1/l,s=.1;else{if(this.ele.style.opacity){var o=parseFloat(this.ele.style.opacity);s=isFinite(o)?o:0}else s=.99;n=-1/l}var a=this.fadeSpeed;a||(a=1);var h=l/a*5;this.fadeMode=t;var r=this,e=function c(){return s+=n,r.fadeMode&&r.fadeMode!=t?void(i&&i.call(r,[])):.1>=s?(i&&i.call(r,[]),void(r.fadeMode=null)):s>=1?(i&&i.call(r,[]),void(r.fadeMode=null)):(changeOpac(r.ele,s),void window.setTimeout(c,h))};e()},hide:function(){this.visible()&&(this.fadeOut&&this.ele?this.fade("out",this._hide.bind(this)):this._hide())},_hide:function(){this.hiddenCallback&&this.hiddenCallback(),this.shown=!1,this.removeClickHandlers(),this.ele&&document.body.removeChild(this.ele),this.resizeHandlerFunc&&DOM.removeEventListener(window,"resize",this.resizeHandlerFunc),this.showSelects()},setAutoHideSelects:function(e){this.autoHideSelects=e,this.updateContent()},hideSelects:function(){if(this.autoHideSelects&&IPPU.isIE())for(var e,t=document.getElementsByTagName("select"),i=0;i<t.length;i++)e=t[i],e&&(DOM.getAncestorsByClassName(e,"ippu",!0).length>0||"hidden"!=e.style.visibility&&(e.style.visibility="hidden",this.hiddenSelects.push(e)))},showSelects:function(){if(this.autoHideSelects)for(var e;e=this.hiddenSelects.pop();)e.style.visibility=""},init:function(e){var t=document.createElement("div");this.ele=t,this.shown=!1,this.autoCenterX=!1,this.autoCenterY=!1,this.titlebar=null,this.title="",this.showTitlebar=!1,this.clickToClose=!1,this.modal=!1,this.clickHandlerSetup=!1,this.docOverlay=!1,this.visibleOverlay=!1,this.clickHandlerFunc=!1,this.resizeHandlerFunc=!1,this.fixedPosition=!1,this.autoCenterCallback=null,this.cancelledCallback=null,this.autoHideSelects=!1,this.hiddenCallback=null,this.fadeOut=!1,this.fadeIn=!1,this.hiddenSelects=[],this.fadeMode=null,t.style.position="absolute",t.style.top=0,t.style.zIndex="1000",DOM.addClassName(t,"ippu"),this.content=document.createElement("div"),this.content.innerHTML=e,this.ele.appendChild(this.content)}}),IPPU.center=function(e){e.centerX(),e.centerY()},IPPU.centerX=function(e){e.centerX()},IPPU.centerY=function(e){e.centerY()},IPPU.isIE=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")},IPPU.isSafari=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("safari")};
/* <<< file end: js/ippu.js */

//# map link was there [ippu.js.map]
/* >>> file start: js/lj_ippu.js */
//= require js/deprecated/dom.js
//= require js/ippu.js
LJ_IPPU=new Class(IPPU,{init:function(e){e||(e=""),LJ_IPPU.superClass.init.apply(this,[]),this.uniqId=this.generateUniqId(),this.cancelThisFunc=this.cancel.bind(this),this.setTitle(e),this.setTitlebar(!0),this.setTitlebarClass("lj_ippu_titlebar"),this.addClass("lj_ippu"),this.setAutoCenterCallback(IPPU.center),this.setDimensions(514,"auto"),this.setFixedPosition(!0),this.setClickToClose(!0),this.setAutoHideSelects(!0)},setTitle:function(e){var t="      <div style='float:right; padding-right: 8px'><img src='"+Site.imgprefix+"/CloseButton.gif?v=7618' width='15' height='15' id='"+this.uniqId+"_cancel' /></div>"+e;LJ_IPPU.superClass.setTitle.apply(this,[t])},generateUniqId:function(){var e=new Date;return"lj_ippu_"+e.getHours()+e.getMinutes()+e.getMilliseconds()},show:function(){LJ_IPPU.superClass.show.apply(this);var e=this.setup_lj_ippu.bind(this);this.timerSetup=window.setTimeout(e,300)},setup_lj_ippu:function(e){var t=this.cancelThisFunc;$(this.uniqId+"_cancel").onclick=function(){t()}},hide:function(){clearInterval(this.timerSetup),LJ_IPPU.superClass.hide.apply(this)}}),LJ_IPPU.showNote=function(e,t,i,s){var n=document.createElement("div");return n.innerHTML=e,LJ_IPPU.showNoteElement(n,t,i,s)},LJ_IPPU.showErrorNote=function(e,t,i){return LJ_IPPU.showNote(e,t,i,"ErrorNote")},LJ_IPPU.showNoteElement=function(e,t,i,s){var n=new IPPU;n.init();var o=document.createElement("div");DOM.addClassName(o,"Inner"),o.appendChild(e),n.setContentElement(o),n.setTitlebar(!1),n.setFadeIn(!0),n.setFadeOut(!0),n.setFadeSpeed(4),n.setDimensions("auto","auto"),s||(s="Note"),n.addClass(s);var a;if(!t||(a=DOM.getAbsoluteDimensions(t))){var l=DOM.getClientDimensions();if(l){if(a){n.setAutoCenter(!1,!1),n.setLocation(a.absoluteLeft,a.absoluteBottom+4),n.show();var u=DOM.getAbsoluteDimensions(n.getElement());u.absoluteRight>l.x&&n.setLocation(l.x-u.offsetWidth-30,a.absoluteBottom+4)}else n.setAutoCenter(!0,!0),n.show();return n.setClickToClose(!0),n.moveForward(),void 0===i&&(i=5e3),i&&window.setTimeout(function(){n&&n.hide()},i),n}}},LJ_IPPU.textPrompt=function(e,t,i,s){s=s||{},e+="";var n=new LJ_IPPU(e),o=document.createElement("div");DOM.addClassName(o,"ljippu_textprompt"),t&&o.appendChild(_textDiv(t));var a=document.createElement("textarea");DOM.addClassName(a,"htmlfield"),a.cols=40,a.rows=5,o.appendChild(a);var l=document.createElement("div");DOM.addClassName(l,"submitbtncontainer");var u=document.createElement("input");DOM.addClassName(u,"submitbtn"),u.type="button",u.value="Insert",l.appendChild(u),o.appendChild(l),n.setContentElement(o),n.setAutoCenter(!0,!0),n.setDimensions(s.width||"60%","auto"),n.show(),a.focus(),DOM.addEventListener(u,"click",function(e){n.hide(),i&&i.apply(null,[a.value])})};
/* <<< file end: js/lj_ippu.js */

//# map link was there [lj_ippu.js.map]
/* >>> file start: js/ljwidget_ippu.js */
//= require js/ljwidget.js
//= require js/lj_ippu.js
LJWidgetIPPU=new Class(LJWidget,{init:function(t,e){var i=t.title,n=t.widgetClass,s=t.authToken,a=t.nearElement,l=t.not_view_close;e||(e={}),this.reqParams=e;var o=new LJ_IPPU(i,a);this.ippu=o;var d=document.createElement("div");d.id="LJWidgetIPPU_"+Unique.id(),o.setContentElement(d),t.width&&t.height&&o.setDimensions(t.width,t.height),t.overlay&&(IPPU.isIE()?(this.ippu.setModal(!0),this.ippu.setOverlayVisible(!0),this.ippu.setClickToClose(!1)):(this.ippu.setModal(!0),this.ippu.setOverlayVisible(!0))),t.center&&o.center(),o.show(),l&&(o.titlebar.getElementsByTagName("img")[0].style.display="none");var h=document.createElement("div");h.style.fontSize="1.5em",h.style.fontWeight="bold",h.style.margin="5px",h.style.textAlign="center",h.innerHTML="Loading...",this.loadingText=h,d.appendChild(h);var u=[d.id,n,s];LJWidgetIPPU.superClass.init.apply(this,u);var r=this;return o.setCancelledCallback(function(){r.cancel&&r.cancel()}),n?(this.widgetClass=n,this.authToken=s,this.title=i,this.nearEle=a,window.setInterval(this.animateLoading.bind(this),20),this.loaded=!1,this.loadContent(),this):null},animateCount:0,animateLoading:function(t){var e=this.loadingText;if(this.loaded||!e)return void window.clearInterval(t);this.animateCount+=.05;var i=(Math.sin(this.animateCount)+1)/2*255,n=Math.round(i).toString(16);1==n.length&&(n="0"+n),n+=n+n,e.style.color="#"+n,this.ippu.center()},doAjaxRequest:function(t){t||(t={}),t._widget_ippu=1,document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_self")&&(t["Widget[IPPU_SettingProd]_LJ__Setting__InvisibilityGuests_invisibleguests"]=1==document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_self").checked?1:1==document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_anon").checked?2:0),LJWidgetIPPU.superClass.doAjaxRequest.apply(this,[t])},close:function(){this.ippu.hide()},loadContent:function(){var t=this.reqParams;this.updateContent(t)},method:"POST",onData:function(t){this.loaded=!0},render:function(t){}});
/* <<< file end: js/ljwidget_ippu.js */

//# map link was there [ljwidget_ippu.js.map]
/* >>> file start: js/jquery/jquery.center.js */
!function(t){return t}(),function(t){t.fn.center=function(){var i=t(window),h=({width:i.width(),height:i.height()},this.first()),e={width:h.outerWidth(),height:h.outerHeight()};return h.css({position:"fixed",left:"50%",top:"50%",marginTop:-(e.height/2),marginLeft:-(e.width/2)}),this}}(jQuery);
/* <<< file end: js/jquery/jquery.center.js */

//# map link was there [jquery.center.js.map]
/* >>> file start: js/jquery/dialogs.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};
//= require js/jquery/jquery.center.js
LJ.UI.registerTemplate('templates-Widgets-dialogs', "<div class=\"b-popup\"> <div class=\"b-popup-outer\"> <div class=\"b-popup-inner\"> <div class=\"b-dialog\"> {{if $data.title}} <div class=\"b-dialog-header\"> {{html $data.title}} </div> {{/if}} {{if ($data.type == \'prompt\' || $data.text)}} <div class=\"b-dialog-body\"> {{if $data.text}} {{html $data.text}} {{/if}} {{if ($data.type == \'prompt\')}} <div class=\"b-dialog-prompt-wrap\"> <input type=\"text\" name=\"dialog-prompt\" class=\"b-dialog-prompt\" value=\"\" {{if $data.placeholder}}placeholder=\"{{html $data.placeholder}}\"{{/if}} /> </div> {{/if}} </div> {{/if}} <div class=\"b-dialog-footer\"> {{if $data.is_mac}} {{if $data.type != \'alert\'}} <button type=\"button\" name=\"dialog-cancel\" class=\" b-dialog-btn b-dialog-cancel b-flatbutton b-flatbutton-neutral \" > {{html $data.no.text}} </button> {{/if}} <button type=\"button\" name=\"dialog-ok\" class=\" b-dialog-btn b-dialog-ok b-flatbutton \" > {{html $data.yes.text}} </button> {{else}} <button type=\"button\" name=\"dialog-ok\" class=\" b-dialog-btn b-dialog-ok b-flatbutton \" > {{html $data.yes.text}} </button> {{if $data.type != \'alert\'}} <button type=\"button\" name=\"dialog-cancel\" class=\" b-dialog-btn b-dialog-cancel b-flatbutton b-flatbutton-neutral \" > {{html $data.no.text}} </button> {{/if}} {{/if}} </div> </div> <i class=\"i-popup-close\"></i> </div> </div> </div> ", 'JQuery.stat');
!function(t){return t}(),function(t){"use strict";LJ.dialogs={defaults:{alert:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"yes",yes:{text:LJ.ml("dialogs.yes"),action:t.noop}},confirm:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"yes",yes:{text:LJ.ml("dialogs.yes"),action:t.noop},no:{text:LJ.ml("dialogs.no"),action:t.noop}},prompt:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"input",value:"",yes:{text:LJ.ml("dialogs.yes"),action:t.noop},no:{text:LJ.ml("dialogs.no"),action:t.noop}}}};var o=function(t){function o(o){var n,e=y.type,i=null;m||(m=[],m.push(d.find(g.yesButton)),"prompt"===e&&m.push(d.find(g.promptInput)),"prompt"!==e&&"confirm"!==e||m.push(d.find(g.noButton)),n=d.find(g.body).find("a,select,input,button").not(g.yesButton).not(g.noButton).not(g.promptInput),n.length&&(m=m.concat(n.toArray().map(t)))),m.some(function(t,o){var n=t.is(":focus");return n&&(i=o),n}),null===i?i=0:(i+=o,i>m.length-1?i=0:0>i&&(i=m.length-1)),m[i].focus()}function n(){s=t("<div />",{"class":"b-fader"}).prependTo(document.body)}function e(o){var e="object"===_typeof(o.text),l=null,u=null;y=o,e&&(l=t('<div class="b-dialog-body" />').append(o.text),o.text=""),d=LJ.UI.template("templates-Widgets-dialogs",o),e&&(u=d.find(g.header),u.length?u.after(l):d.find(g.dialog).prepend(l)),d.prependTo(document.body).center(),o.fade&&(s=t(".b-fader"),s.length?s.show():n()),d.on("click",g.closeButton,i),"no"===o.defaultButton&&"alert"!==o.type?d.find(g.noButton).focus():"prompt"===o.type&&"yes"!==o.defaultButton?d.find(g.promptInput).focus():d.find(g.yesButton).focus(),o.show.call(d,o)}function i(){s&&s.hide(),m=null,y.hide.call(d,y),d.remove(),d=null}function l(t,o){if(!("string"==typeof t&&0!==t.length||"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.jquery))throw new Error("You should provide text or node as `text` param for the dialog");if(o&&"object"!==("undefined"==typeof o?"undefined":_typeof(o)))throw new Error("Dialog options should be an object");if(d)throw new Error("You are not able to create multiple dialogs at the time");o&&o.yes&&("function"==typeof o.yes?o.yes={action:o.yes}:"string"==typeof o.yes&&(o.yes={text:o.yes})),o&&o.no&&("function"==typeof o.no?o.no={action:o.no}:"string"==typeof o.no&&(o.no={text:o.no}))}function u(){d.find(g.yesButton).trigger("click")}function c(){d.find(g.noButton).trigger("click")}function a(t){return function(){try{return t.apply(this,arguments),{yes:u,no:c}}catch(o){console.error(o.message)}}}var p,r,f,d=null,s=null,y=null,m=null,g={yesButton:".b-dialog-ok",noButton:".b-dialog-cancel",closeButton:".i-popup-close",promptInput:".b-dialog-prompt",header:".b-dialog-header",dialog:".b-dialog",body:".b-dialog-body"};return LJ.Support.isMobile()||t(document).on("keydown",function(t){if(d)switch(t.which){case 27:d.find(g.closeButton).trigger("click");break;case 9:o(t.shiftKey?-1:1),t.preventDefault()}}),p=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.alert,{type:"alert",text:o},n||{}),e(n),d.on("click",g.yesButton,function(){void 0===n.yes.action.call(d,i)&&i()})},r=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.confirm,{type:"confirm",text:o},n||{}),e(n),d.on("click",g.yesButton,function(){void 0===n.yes.action.call(d,!0,i)&&i()}),d.on("click",g.noButton,function(){n.no.action.call(d,!1),i()})},f=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.prompt,{type:"prompt",text:o},n||{}),e(n),n.value&&d.find(g.promptInput).val(n.value),d.on("click",g.yesButton,function(){void 0===n.yes.action.call(d,d.find(g.promptInput).val())&&i()}),d.find(g.noButton).on("click",function(){n.no.action.call(d),i()}),LJ.Support.isMobile()||d.find(g.promptInput).on("keyup",function(t){13===t.which&&d.find(g.yesButton).trigger("click")})},{alert:a(p),confirm:a(r),prompt:a(f)}}(t);t.extend(!0,LJ.dialogs,o)}(jQuery);
/* <<< file end: js/jquery/dialogs.js */

//# map link was there [dialogs.js.map]
/* >>> file start: js/scheme/schemius/controlstrip.js */
//= require js/ljwidget_ippu.js
//= require js/jquery/dialogs.js
!function(i){return i}(),function(){LJ.define("LJ.Schemius.controlstrip"),LJ.Schemius.controlstrip.init=function(i){var e=i.jQuery,n=e(".js--controlstrip");if(n.length){var r=n.find(".js--user_status"),s=n.find(".js--user_status_dash"),t=n.find(".js--item-friending.js--add"),a=n.find(".js--item-friending.js--modify"),o=n.find(".js--item-subscribe.js--add"),d=n.find(".js--item-subscribe.js--modify"),u=n.find(".js--item-subscribe.js--disabled"),l=LJ.get("current_journal.username"),c=LJ.Support.isMobile(),f={subscriptions:{remote:{},journal:{}},friendLists:{remote:{},journal:{}},friendingStatus:r.html(),friendingBlocker:null,subscriptionBlocker:null};f.friendingStatus&&(f.friendingStatus=f.friendingStatus.trim());var m=function(){f.friendLists.remote.journal?(t.hide(),a.show()):(t.show(),f.friendingBlocker&&!c?t.find("a").addClass("js--disabled"):t.find("a").removeClass("js--disabled"),a.hide())},g=function(){return f.friendLists.remote.journal?(o.hide(),d.hide(),void u.show()):(u.hide(),void(f.subscriptions.remote.journal?(o.hide(),d.show()):(o.show(),f.subscriptionBlocker&&!c?o.find("a").addClass("js--disabled"):o.find("a").removeClass("js--disabled"),d.hide())))},b=function(){m(),g(),r.html(f.friendingStatus),r.attr("title",f.friendingStatus),f.friendingStatus?(r.show(),s.show()):(r.hide(),s.hide())},j=function(i){if(i){var e=i.data;e&&(f.friendLists.remote.journal=e.is_friend,f.subscriptions.remote.journal=e.is_subscriber,f.friendingStatus=e.controlstrip_status,b(e))}},h=function(i,e){e&&LJ_IPPU.showNote(e,i)},p=function(i){i&&LJ.dialogs.alert(i,{yes:{text:"OK"}})},_=function(){return Promise.all([LJ.Api.call("relations.can_add_friends",{target:l}),LJ.Api.call("relations.can_add_subscribers",{target:l})]).then(function(i){i[0]&&i[1]&&(i[0].can_add_friends?f.friendingBlocker=null:f.friendingBlocker={message:i[0].add_friends_error},i[1].can_add_subscribers?f.subscriptionBlocker=null:f.subscriptionBlocker={message:i[1].add_subscribers_error})})};LJ.Event.on("relations.changed",function(i){j(i),_().then(b)}),t.on("click",function(i){if(!f.friendLists.remote.journal){i.preventDefault();var e=f.friendingBlocker;return e?void(c?p(e.message):h(t[0],e.message)):void LJ.Api.call("relations.addfriend",{target:l}).then(function(i){return LJ.Event.trigger("relations.changed",{action:"addFriend",username:l,data:i})})}}),o.on("click",function(i){if(!f.subscriptions.remote.journal){i.preventDefault();var e=f.subscriptionBlocker;return e?void(c?p(e.message):h(o[0],e.message)):void LJ.Api.call("relations.addfriend",{target:l,is_subscriber:1}).then(function(i){return LJ.Event.trigger("relations.changed",{action:"addFriend",username:l,data:i})})}}),n.attr("data-remote-friends-journal")&&(f.friendLists.remote.journal=!0),n.attr("data-remote-subscribed-to-journal")&&(f.subscriptions.remote.journal=!0),_().then(b)}}}();
/* <<< file end: js/scheme/schemius/controlstrip.js */

//# map link was there [controlstrip.js.map]
/* >>> file start: js/scheme/schemius.js */
//= require js/core/angular/api.js
//= require js/lib/jquery.selectric.min.js
//= require js/captcha.js
//= require js/scheme/schemius/feedback.js
//= require js/notifications/main.js
//= require js/facebookMigration/migration.js
//= require js/scheme/schemius/controlstrip.js
!function(e){return e}(),function(e){function o(){function o(e){return!!(e.ctrlKey||e.metaKey&&LJ.Support.isMac)}function s(e){e&&(e.stopPropagation(),e.preventDefault()),x.removeClass(I),x.removeClass(v),d.removeClass(I),d.removeClass(v)}function n(o){o&&(o.preventDefault(),o.stopPropagation()),u(),LJ.Event.trigger("Messages:closeByMenus"),d.addClass(v),x.addClass(I),setTimeout(function(){e("#user").focus()},300)}function t(){d.hasClass(v)?s():n()}function a(e){e&&LJ.Api.call("lang.set",{lang:e},function(){location.reload()})}function i(o){g.toggleClass(y,o),o?e(".b-loginform-click-trap").removeClass("b-loginform-click-trap--show"):(e(".b-loginform-click-trap").addClass("b-loginform-click-trap--show"),e(".b-loginform").removeClass("openid-auth-state"))}var l,r,c,u,d,p,m,h,g,f,v,b,C,k,w,j,L,y,J=LJ.Flags.isEnabled("medius_schemius"),x=e(document.body),S=e(".s-header"),A=e(J?".js-header-search-input":".s-inline-search-input"),T=e(J?".js-header-search-button":".s-do-item-search-btn"),_="p-show-search",D=!1,I="p-loginform",M=e(J?".js-header-nav-lang":".s-nav-item-lang"),E="s-nav-item-lang-open",O=function(e){o(e)||(S.hasClass(_)&&A.val()&&T.prop("type","submit"),S.toggleClass(_),S.hasClass(_)&&(D=!0,setTimeout(function(){A.focus()},500)))},P=e(".s-header-search__form");P.on("submit",function(){var e=A.val(),o=e.split(" ").filter(function(e){return e}),s=o.every(function(e){return e.length>1&&0===e.indexOf("#")});A.attr("name",s?"tags":"q")}),LJ&&LJ.Util&&LJ.Util.Action&&(LJ.Util.Action.login=n),T.on("click",O),T.on("blur",function(){"submit"===T.prop("type")&&(T.prop("type","button"),A.val(""))}),A.on("click",function(){D=!0}),x.on("click",function(){D||(S.removeClass(_),M.removeClass(E)),D=!1}),x.on("gesturestart",function(o){(e("html").hasClass("p-nav-common-menu-open")||e("html").hasClass("p-nav-user-menu-open"))&&o.preventDefault()}),navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv[ :]11/)&&e("html").addClass("html-ie11"),navigator.appVersion.match(/MSIE\s10/)&&e("html").addClass("html-ie10"),d=e("html"),d.addClass(LJ.Support.isMobile()?"html-mobile":"html-desktop"),~navigator.userAgent.toLowerCase().indexOf("android")?d.addClass("html-android"):~navigator.userAgent.toLowerCase().indexOf("iphone")||~navigator.userAgent.toLowerCase().indexOf("ipad")?d.addClass("html-ios"):~navigator.userAgent.toLowerCase().indexOf("windows phone")&&d.addClass("html-wphone"),e("[data-lang]").on("click",function(){a(e(this).data("lang"))}),M.on("click",function(e){o(e)||(e.preventDefault(),M.toggleClass(E),D=M.hasClass(E))}),e(".s-lang-select").selectric({customClass:{prefix:"b-selectus",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",camelCase:!1,overwrite:!1}}).on("change",function(){a(e(this).val())}),e(".selectricus").selectric({customClass:{prefix:"b-selectus",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",camelCase:!1,overwrite:!1},expandToItemText:!0,disableOnMobile:!1}),e(".b-message-mobile-close").one("click",function(){e(".b-message-mobile").hide()}),k=e(J?".js-header-nav-drop-master":".s-drop-master"),w=J?"s-header-nav-drop--open":"s-drop-open",j=LJ.Support.isMobile(),L=!1,j||(C=e(":lj-bubble"),k.on("mouseenter",function(){var o=e(this),s=300;L&&(clearTimeout(b),s=0),b=setTimeout(function(){k.removeClass(w),o.addClass(w),L=!0,C.bubble("hide")},s)}).on("mouseleave",function(){var o=e(this);return L?void(b=setTimeout(function(){o.removeClass(w),L=!1},500)):(clearTimeout(b),void o.removeClass(w))})),j&&(k.on("click",function(o){var s=e(this),n=0!==s.find("li").length,t=e(o.target).closest("span").is(".s-header-extra-menu-item-link-icon");"input"!==o.target.tagName.toLowerCase()&&(s.hasClass(w)||!n||t||o.preventDefault(),s.hasClass(w)||t||(L=!0,k.removeClass(w),o.stopPropagation(),e(":lj-bubble").bubble("hide")),s.toggleClass(w))}),x.on("click",function(o){var s=0===e(o.target).closest(k).length,n=e(o.target).is(".b-popup");n&&(o.stopPropagation(),e(":lj-bubble").bubble("hide")),L&&s&&(L=!1,k.removeClass(w),o.preventDefault())}),LJ.Support.isMobile&&LJ.Support.browser.safari&&x.addClass("iphone"),e(".l-flatslide-menu-active, .l-flatslide-menu-expander").click(function(o){o.preventDefault(),e(this).closest(".l-flatslide-menu").toggleClass("l-flatslide-menu-expanded")}),e(".s-header-search, .s-header-item-search__form").removeAttr("target")),d=e("html"),p=e(".s-body"),m=e(J?".js-header-menu-button":".s-nav-control-common"),h=e(J?".js-header-login":".s-nav-control-user, .s-nav-control-login"),f="p-nav-common-menu-open",v="p-nav-user-menu-open",m.on("click",function(){LJ.Event.trigger("Messages:closeByMenus"),d.toggleClass(f),s()}),h.on("click",t),u=function(){d.removeClass(f),d.removeClass(v)},p.on("click",function(){u(),s()}),e(".s-header-menu-head__drop").click(function(){var o=e(this).closest(".s-header-menu-drop"),s=o.find(".s-header-menu-list-sub"),n="s-header-menu-drop--open";if(o.is("."+n))s.css("max-height","");else{var t=s.children().toArray().reduce(function(o,s){return o+e(s).height()},0);s.css("max-height",t)}o.toggleClass(n)}),e(J?".js-header-login":".s-nav-item-login").on("click",n),e(".js-loginform-close").on("click",s),e(document).on("keyup",function(e){"Escape"!==e.key&&27!==e.keyCode||s(e)}),e(".b-fader").on("click",s),g=e(".b-loginform-body > .b-loginform-field"),y="active",J?e(".lj-openid-auth-button").on("click",function(o){o.preventDefault(),i(!1),e(".b-loginform").addClass("openid-auth-state")}):e(".lj-openid-auth-button").on("click",function(o){o.preventDefault(),e(".b-loginform").toggleClass("openid-auth-state"),e(".b-loginform").hasClass("openid-auth-state")?e("#openid").focus():e("#user").focus()}),J&&(e(".js-login-close").on("click",function(e){i(!1),s(e)}),e(".b-loginform-click-trap").on("click",function(){return i(!0)}),e(".b-loginform-toggle-link").on("click",function(){return i(!1)}),LJ.Flags.isEnabled("notification_center")&&angular.bootstrap(J?".js-header-notifications":".mds-do",["Notifications"])),LJ.Event.on("userpic.changed",function(o){e(".s-userpic").css("backgroundImage","url("+o+")")}),!LJ.Flags.isEnabled("ljwelcomevideo")||j||LJ.get("remote")||LJ.Cookie.get("welcome_ljvideo")||0!==LJ.get("remote_is_sup")||e(".appwidget-login").length||LJ.injectScript("https://www.youtube.com/player_api").then(function(){function o(e){0!==e.data&&2!==e.data||n.addClass("s-ljvideo-end"),1===e.data&&n.removeClass("s-ljvideo-end")}var s,n=e(".s-ljvideo");x.addClass("p-ljvideo"),window.onYouTubePlayerAPIReady=function(){s=new window.YT.Player("s-ljvideo-player",{width:"640",height:"360",videoId:"wq0YmQ4xIeU",playerVars:{rel:0},events:{onStateChange:o}})},e(".b-fader, .s-ljvideo-close").on("click",function(){x.hasClass("p-ljvideo")&&(x.removeClass("p-ljvideo"),s.destroy(),LJ.Cookie.setGlobal("welcome_ljvideo",1,{expires:14}))})}),c=e(".s-header .i-supus-new, .s-header-messages-count"),LJ.Event.on("message:count:change",function(e){e>0?(c.html(e),c.removeClass("s-header-messages-count-empty")):c.addClass("s-header-messages-count-empty")}),r=e(".flatquestion-nojs-friendsgroups"),l=e(".flatquestion-popup-field-showanswer"),e(".flatquestion-popup-select").on("change",function(){"custom"===e(this).val()?r.show():r.hide(),"public"===e(this).val()?l.show():l.hide()}),LJ.Schemius.controlstrip.init({jQuery:e})}e(function(){0===e(".s-header").length?e("html").on("controlstrip-initialized",o):o()})}(jQuery);
/* <<< file end: js/scheme/schemius.js */

//# map link was there [schemius.js.map]
/* >>> file start: js/widgets/angular/login.js */
//= require js/core/angular/api.js
//= require_ml loginform.error.enterpassword
//= require_ml loginform.error.purgeduser
//= require_ml loginform.error.enteruser
//= require_ml loginform.error.ipbanned
//= require_ml loginform.error.ipbanned.sysban
//= require_ml loginform.error.ipbanned.distribution
//= require_ml loginform.error.openid
//= require_ml loginform.error.password
//= require_ml loginform.error.usercreate
//= require_ml error.nocommlogin
//= require_ml error.login.limit.exceeded
//= require_ml error.expiredchal
//= require_ml error.account_locked.text
//= require_ml error.user_is_child.text
!function(r){return r}(),function(){function r(r){r.html5Mode({enabled:!0,requireBase:!1})}function e(){return{controllerAs:"loginForm",controller:n,link:function(r,e){e.find("a:not([target])").attr("target","_self")}}}function o(r){var e=r.type,o=r.url,n=r.$window,t=s("instant_relation_source",o),a=function(r){switch(r){case"instantRelationTry":return"try";case"instantRelationSuccess":return"ok";default:return null}}(e),i=function(r){switch(r){case"before_post":return"username";case"after_post":return"post";case"ctx_popup":return"ctxpopup";default:return null}}(t);return a&&i&&n.yaCounter27737346?n.yaCounter27737346.reachGoal("subscribe-"+i+"__login-"+a):null}function n(r,e,n,s,t,a){var i=this,l=angular.element(".b-fader");i.hasError=!1,i.domain=location.origin,i.isMobile=LJ.Support.isMobile()||!!~navigator.userAgent.toLowerCase().indexOf("android"),i.close=function(r){r.target===r.currentTarget&&(r&&r.preventDefault(),n(function(){l.triggerHandler("click")}))};var u=void 0;i.loginUser=function(e){u=decodeURIComponent(a.absUrl()),o({type:"instantRelationTry",url:u,$window:r}),e.preventDefault(),i.model.username&&i.model.password?t.call("user.login",{user:i.model.username,password:i.model.password,expire:i.model.expire?"never":"remeber me"},{silent:!0}).then(i.sucsessLogin)["catch"](i.onError):i.model.username?i.model.password||i.onError({message:"invalid_password"}):i.onError({message:"invalid_user"})},i.loginOpenID=function(r){i.model.openid||(r.preventDefault(),i.onError({message:"invalid_id"}))},i.sucsessLogin=function(){o({type:"instantRelationSuccess",url:u,$window:r});var e=window.location.pathname;~e.indexOf("logout")?window.location.replace("/login.bml"):window.location.reload()},i.onError=function(r){switch(i.resetError(),i.hasError=!0,r.message){case"unknown_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.usercreate",{domain:i.domain,username:i.model.username}));break;case"purged_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.purgeduser"));break;case"community_disabled_login":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.nocommlogin"));break;case"invalid_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.enteruser"));break;case"bad_password":i.errorPassword=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.password"));break;case"invalid_password":i.errorPassword=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.enterpassword"));break;case"banned_ip":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned"));break;case"banned_ip_sysban":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned.sysban"));break;case"banned_ip_distrib":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned.distribution"));break;case"invalid_id":i.errorId=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.openid"));break;case"ratelimit_exceeded":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.openid"));break;case"expired_challenge":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.expiredchal"));break;case"account_locked":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.account_locked.text"));break;case"is_child":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.user_is_child.text"));break;default:i.errorUsername=!0,i.errorMessage="UnknownError"}},i.resetError=function(){i.errorError=i.errorUsername=i.errorPassword=i.errorIp=i.errorId=!1},e.$watch(function(){return i.model},function(){i.hasError&&i.resetError()},!0)}r.$inject=["$locationProvider"],n.$inject=["$window","$scope","$timeout","$sce","Api","$location"],angular.module("Login",["LJ.Api","LJ.Directives"]).config(r).controller("LoginCtrl",n).directive("ljLogin",e),function(r){return r}(),angular.element(window.document).ready(function(){if(!angular.element("body[ng-app]").length>0)try{angular.bootstrap(".b-loginform",["Login"])}catch(r){console.info(r.message,r.stack)}});var s=function(r,e){r=r.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),n=o.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}();
/* <<< file end: js/widgets/angular/login.js */

//# map link was there [login.js.map]
/* >>> file start: js/jquery/jquery.lj.repostbutton.js */
LJ.UI.registerTemplate('templates-CleanHtml-PaidRepost', "<span class=\" b-flatrepost repost-button {{if $data.reposted}} b-flatrepost-reposted {{/if}} {{if $data.count}} b-flatrepost-counted {{/if}} {{if $data.budget || $data.cost}} b-flatrepost-gained {{/if}} {{if $data.owner}} b-flatrepost-disabled {{/if}} {{if $data.login}} b-flatrepost-disabled {{/if}} \" ><a href=\"javascript:void(0);\" data-href=\"{{html $data.url}}\" class=\"b-flatrepost-name\" title=\"{{if $data.reposted}}{{html LJ.mltext(\'entry.reference.label.title\')}}{{else}}{{if $data.login}}{{html LJ.mltext(\'repost.button.title.login\')}}{{else}}{{if $data.owner}}{{html LJ.mltext(\'repost.button.title.myown\')}}{{else}}{{html LJ.mltext(\'repost.button.title\')}}{{/if}}{{/if}}{{/if}}\" ><span class=\"b-flatrepost-gain\" title=\"{{html $data.budget}}{{html LJ.mltext(\'paidrepost.button.title.curr\')}}\" >{{if !$data.owner}}+{{html $data.cost}}{{else $data.budget}}{{html $data.budget}}{{/if}}</span></a><span class=\"b-flatrepost-counter\" title=\"{{html LJ.mltext(\'repost.button.counter\')}}\" >{{html $data.count}}</span></span> ", 'JQuery.stat');
LJ.UI.registerTemplate('templates-CleanHtml-Repost', "<span class=\" b-flatrepost repost-button {{if $data.reposted}} b-flatrepost-reposted {{/if}} {{if $data.count}} b-flatrepost-counted {{/if}} {{if $data.budget}} b-flatrepost-gained {{/if}} {{if $data.owner}} b-flatrepost-disabled {{/if}} {{if $data.login}} b-flatrepost-disabled {{/if}} \" ><a href=\"javascript:void(0);\" data-href=\"{{html $data.url}}\" class=\"b-flatrepost-name\" title=\"{{if $data.reposted}}{{html LJ.mltext(\'entry.reference.label.title\')}}{{else}}{{if $data.login}}{{html LJ.mltext(\'repost.button.title.login\')}}{{else}}{{if $data.owner}}{{html LJ.mltext(\'repost.button.title.myown\')}}{{else}}{{html LJ.mltext(\'repost.button.title\')}}{{/if}}{{/if}}{{/if}}\" ><span class=\"b-flatrepost-gain\" title=\"{{html $data.budget}}{{html LJ.mltext(\'paidrepost.button.title.curr\')}}\" >{{if !$data.owner}}+{{html $data.cost}}{{else $data.budget}}{{html $data.budget}}{{/if}}</span></a><span class=\"b-flatrepost-counter\" title=\"{{html LJ.mltext(\'repost.button.counter\')}}\" >{{html $data.count}}</span></span> ", 'JQuery.stat');
LJ.UI.registerTemplate('templates-CleanHtml-reposted', "{{if $data.content}} {{each ($value.users || $data.users)}}{{if !((!$index) && !($value.dropComma || $data.dropComma))}}, {{/if}}<a href=\"{{html ($value.url || $data.url)}}\">{{html ($value.user || $data.user)}}</a>{{/each}} {{else}} <div class=\"b-reposted-popup\"> <div class=\"b-reposted-popup-header\">{{html LJ.mltext(\'repost.popup.head\')}}</div> <div class=\"b-reposted-popup-content b-reposted-popup-load\"></div> <div class=\"b-reposted-popup-footer\"><a href=\"javascript:void(0);\">{{html LJ.mltext(\'repost.popup.footer\')}}</a></div> </div> {{/if}} ", 'JQuery.stat');
!function(t){return t}(),function(t){"use strict";t.widget("lj.repostbutton",t.lj.basicWidget,{options:{classNames:{active:"repost-button-active",inactive:"repost-button-inactive",popupLoad:"b-reposted-popup-load",popupNomore:"b-reposted-popup-footer-hide",repostError:"repost-error"},selectors:{counterParent:".lj-button-c",button:".lj-button-b",counter:".lj-like-item-count",buttonLink:".lj-button-link",popupContent:".b-reposted-popup-content",popupFooter:".b-reposted-popup-footer",popupMore:".b-reposted-popup-footer > a"},templates:{popup:"templates-CleanHtml-reposted"},url:"",reposted:!1,cost:0,budget:0,paid:!1},_create:function(){this.options.classNames={active:"b-flatrepost-reposted",inactive:"b-flatrepost-disabled",popupLoad:"b-reposted-popup-load",popupNomore:"b-reposted-popup-footer-hide",repostError:"repost-error"},this.options.selectors={counterParent:".b-flatrepost-counter",button:".b-flatrepost-name",counter:".b-flatrepost-counter",buttonLink:".b-flatrepost-name",popupContent:".b-reposted-popup-content",popupFooter:".b-reposted-popup-footer",popupMore:".b-reposted-popup-footer > a"},t.lj.basicWidget.prototype._create.apply(this),this.options.url||console.warn(this.widgetName,": no url in options, initialization won't continue"),this._journal=LJ.get("currentJournal"),this._count=null,this._remote=LJ.get("remoteUser"),this._reposted=this.options.reposted,this._el("buttonLink"),this._href=this.element.find(this._s("button")).data("href"),this._href=LJ.Util.Journal.parseLink(this._href)||{},this._canRepost()||(this.element.addClass(this._cl("inactive")),this._buttonLink.removeAttr("title"),this._lock()),this._popup=null,this._popupContent=null,this._popupLocked=!1,this._lastUser=null,this._el("counterParent"),this._el("counter"),Number(this._counter.html())||this._hideCounter(),this._bindControls()},_hideCounter:function(){this._counterParent.addClass("empty")},_showCounter:function(){this._counterParent.removeClass("empty")},_bindControls:function(){var e=this;this.element.on("click",this._s("button"),this._onUpdateButton.bind(this)),this._counterParent.one("click",function(){Number(e._counter.html())&&(e._popup=e._tmpl("popup"),e._el("popupFooter",e._popup),e._popupContent=e._popup.find(e._s("popupContent")),e._popup.bubble({showOn:"click",align:"side",alwaysShowUnderTarget:!0,target:e._counterParent}).on("bubblehide",function(){e._lastUser=null,e._popupContent.empty(),e._popupFooter.removeClass(e._cl("popupNomore"))}).on("bubbleshow",function(){e._loadRepostedList()}).on("click",e._s("popupMore"),e._loadRepostedList.bind(e)),Function.defer(function(){e._popup.bubble("show")}))}),t.lj.basicWidget.prototype._bindControls.apply(e)},_loadRepostedList:function(t){var e=this;t&&t.preventDefault(),this._popupLocked||(this._popupLocked=!0,this._popupContent.addClass(this._cl("popupLoad")),LJ.Api.call("repost.get_list",{url:this.options.url,last:this._lastUser},function(t){e._popupContent.removeClass(e._cl("popupLoad")),e._popupLocked=!1,t.error?e._handleAnswer(t):(e._render(t.users,t.nomore,t.count),e._lastUser=t.last)}))},_render:function(t,e,o){var s=this;t.length>0&&s._tmpl("popup",{content:!0,dropComma:!!s._lastUser,users:t}).appendTo(s._popupContent),this._updateCounter(o),e&&s._popupFooter.addClass(s._cl("popupNomore"))},_onUpdateButton:function(t){this.locked()||this.toggleRepost(),t.preventDefault()},_handleAnswer:function(t){if(t.hasOwnProperty("delete")&&(t.message&&this._showMessage(t.message),this.paid!==Boolean(t.paid)||this.paid&&this.cost!==t.cost))return void this.element.replaceWith(LJ.Social.renderRepostButton(this.options.url,t));if(t.error){if(t.error.message&&this._showMessage(t.error.message),t.error.data)return void this.element.replaceWith(LJ.Social.renderRepostButton(this.options.url,t.error.data))}else this._updateButton(!this._reposted);!t.hasOwnProperty("count")&&t.hasOwnProperty("delete")&&(t.count=this._count-1),this._updateCounter(t.count),this._unlock()},_showMessage:function(e){var o=t("<div />",{"class":this._cl("repostError"),text:e}).bubble({target:this.element,align:"center",hide:function(){o.remove()}}).bubble("show")},_updateButton:function(t){this._reposted=t,this.element.toggleClass(this._cl("active"),this._reposted)},_updateCounter:function(t){"undefined"!=typeof t&&(this._count=Number(t),this._counter.html(this._count)),Number(this._counter.html())?this._showCounter():this._hideCounter()},_canRepost:function(){return LJ.get("preview")?!1:this._remote?LJ.get("remote_is_identity")?!1:this._remote!==this._href.journal:!1},toggleRepost:function(){var t=this,e={url:this.options.url};this._canRepost()&&(null===this._count&&(this._count=parseInt(this._el("counter").html(),10)||0),this._lock(),this._reposted?LJ.Api.call("repost.delete",e,function(e){e.error||e.reposted||t._journal!==t._remote||location.href.match(/\/(friends|times|feed)\b/)?t._handleAnswer(e):location.reload()}):(e.timezone=LJ.Util.Date.timezone(),this.options.paid&&(e.cost=this.options.cost),LJ.Api.call("repost.create",e,this._handleAnswer.bind(this))))}})}(jQuery);
/* <<< file end: js/jquery/jquery.lj.repostbutton.js */

//# map link was there [jquery.lj.repostbutton.js.map]
/* >>> file start: js/threeposts.js */
!function(t){return t}(),function(t){"use strict";t(function(){function e(){var t=3,e={7:4,8:4,9:3};return t=e[v]>0?e[v]:v}function i(){var t=1;if(M>H)return t=1;if(v>=2){t=Math.floor(H/M),t>v&&(t=v);var e=v%t;if(e>0)if(v%(t-1)===0)t--;else if(v%(t+1)===0)t++;else if(1===e){var i=H/(t+1);i>=E&&t++}}return t}function n(){H=u.width(),b=O>H?i():e(),s(H/b)}function s(t){var e=[150,300,330,400,500,600,800],i=["xxs","xs","s","m","l","xl","xxl"];e.forEach(function(n){t>n&&(F=i[e.indexOf(n)])})}function r(){u.find("."+w).removeClass(w),"xs"===F&&z.each(function(){var e=t(this).find("."+_),i=e.get(0).getClientRects().length;2>i&&t(this).addClass(w)})}function o(t){return p.get(t).scrollHeight}function a(){if(0===C&&g.height()>0){p.height("auto");var t=p.map(o),e=Math.max.apply(Math,t);p.height(e)}}function h(){H=u.width();var t=[400,600,800,1e3,1200,1400],e=["xs","s","m","l","xl","xxl"];t.forEach(function(i){H>i&&(j=e[t.indexOf(i)])}),n(),f()}function f(){var t=c+"--size-"+j,e=c+"--items-in-row-"+b,i=c+"--item-size-"+F,n=l+"\n"+t+"\n"+e+"\n"+i;u.attr("class",n),u.attr("data-item-layout",F),x.hide(),d.show(),a(),r()}var c="threeposts",u=t("."+c),l=u.attr("class"),x=t(".placeholder-threeposts"),d=t(".threeposts__items"),m="threeposts__item",p=t("."+m),g=t(p.get(0)),v=p.length,_="threeposts__title-inner",w="threeposts__item--short-title",y="threeposts__item--pic",z=t("."+y),C=z.length,M=235,E=200,O=1200,b=3,j="xxs",F="xxs",H=u.width();h(),t(window).resize(LJ.Function.debounce(h,50))})}(jQuery);
/* <<< file end: js/threeposts.js */

//# map link was there [threeposts.js.map]
/* >>> file start: js/recommended-entries.js */
!function(t){return t}(),function(t){"use strict";t(function(){function e(){return a=t("."+c),0==a.length?void setTimeout(e,1e3):(u=a.attr("class"),M=a.width(),d=t(".recommended-entries__list"),x=t("."+l),f=t(x.get(0)),m=x.length,void o())}function n(){var t=1;return _>M?t:(m>=2&&(t=Math.floor(M/_),6>t&&(t=Math.floor(M/v)),t>2&&6>t&&(t=3)),t)}function i(){M=a.width(),y>M&&(z=n()),g=M/z,r(g)}function r(){var t=[150,250,330,400,500,600,800],e=["xxs","xs","s","m","l","xl","xxl"];t.forEach(function(n){g>n&&(E=e[t.indexOf(n)])})}function o(){M=a.width();var t=[280,300,400,800,1e3,1200,1400],e=["xxs","xs","s","m","l","xl","xxl"];t.forEach(function(n){M>n&&(p=e[t.indexOf(n)])}),i(),s()}function s(){var t=c+"--size-"+p,e=c+"--items-in-row-"+z,n=c+"--item-size-"+E,i=u+"\n"+t+"\n"+e+"\n"+n;a.attr("class",i),a.attr("data-layout",M+"/"+p+"|"+z),a.attr("data-item-layout",g+"/"+E),d.show()}var c="recommended-entries",a=t("."+c),u=a.attr("class"),d=t(".recommended-entries__list"),l="recommended-entries__item",x=t("."+l),f=t(x.get(0)),m=x.length,h="threeposts__item--pic",w=t("."+h),_=(w.length,220),v=155,g=0,y=1044,z=6,p="xxs",E="xxs",M=a.width();e(),t(window).resize(LJ.Function.debounce(o,50))})}(jQuery);
/* <<< file end: js/recommended-entries.js */

//# map link was there [recommended-entries.js.map]
/* >>> file start: js/discovery/directives.js */
//= require js/core/angular/api.js
Site.page.template['angular/ljImage.ng.tmpl'] = '<a ng-href=\"{{link}}\">\n    <figure class=\"b-journalpicture\">\n        <img\n            class=\"b-journalpicture-image\"\n            title=\"{{textContent}}\"\n            alt=\"{{textContent}}\"\n            ng-src=\"{{source}}\"\n            ng-style=\"dimensions\"\n            >\n        <figcaption class=\"b-journalpicture-caption\" lj-html=\"content\"></figcaption>\n    </figure>\n</a>\n';
Site.page.template['angular/ljGallery.ng.tmpl'] = '<div\n    class=\"b-journalgallery\"\n    ng-style=\"galleryDimensions\"\n    ng-class=\"{\n        \'b-journalgallery-hightpriority\': isTall\n    }\"\n    >\n    <div\n        class=\"b-journalgallery-container\"\n        ng-style=\"containersDimensions\"\n        >\n        <figure\n            class=\"b-journalgallery-picture\"\n            ng-repeat=\"item in items\"\n            ng-style=\"containersDimensions\"\n            ng-if=\"isNearby($index)\"\n            ng-class=\"{\n                \'b-journalgallery-picture-prev\': $index < state.index,\n                \'b-journalgallery-picture-current\': $index === state.index,\n                \'b-journalgallery-picture-next\': $index > state.index\n            }\"\n            >\n            <span\n                class=\"\n                    b-journalgallery-preloader\n                    svgpreloader\n                    svgpreloader-tag\n                    svgpreloader-16\n                    \"\n                    ></span>\n            <div class=\"b-journalgallery-wrapper\"\n                style=\"background-image: url({{item.src}}); max-width: {{item.width}}; max-height: {{item.height}}\">\n                <img\n                    ng-src=\"{{item.src}}\"\n                    class=\"b-journalgallery-image\"\n                    lj-gallery-load\n                    >\n            </div>\n            <figcaption class=\"b-journalgallery-caption\">\n                <span\n                    class=\"b-journalgallery-caption-title\"\n                    lj-html=\"item.content\"></span>\n            </figcaption>\n        </figure>\n    </div>\n    <span\n        class=\"b-journalgallery-counter\"\n        ng-bind=\"(state.index + 1) + \'/\' + (state.total+1)\"\n        ></span>\n    <span\n        class=\"b-journalgallery-nav b-journalgallery-nav-prev\"\n        ng-show=\"state.index !== 0\"\n        ng-click=\"prev()\"\n        ></span>\n    <span\n        class=\"b-journalgallery-nav b-journalgallery-nav-next\"\n        ng-show=\"state.index < state.total\"\n        ng-click=\"next()\"\n        ></span>\n</div>\n';
Site.page.template['angular/discovery/ljSuggest.ng.tmpl'] = '<div\n    class=\"b-mainpage-seealso\"\n    ng-if=\"suggest\"\n    >\n\n    <!-- head -->\n    <h3\n        class=\"b-mainpage-seealso-head\"\n        lj-ml=\"discovery.article.seealso\"\n        ></h3>\n\n    <!-- items -->\n    <ul class=\"b-mainpage-seealso-items\">\n        <li\n            class=\"b-mainpage-seealso-item\"\n            ng-repeat=\"suggested in suggest\"\n            >\n            <a\n                ng-href=\"{{suggested.url}}\"\n                class=\"b-mainpage-seealso-link\"\n                data-track-event=\"LJMag:Post:OpenSeeAlso\"\n                >\n                <span\n                    class=\"b-mainpage-seealso-pic\"\n                    ng-if=\"suggested.image\"\n                    ng-style=\"{ backgroundImage: \'url({{suggested.image}})\' }\"\n                    ></span>\n                <span\n                    class=\"b-mainpage-seealso-title\"\n                    lj-html=\"suggested.subject\"\n                    ></span>\n            </a>\n            <span class=\"b-mainpage-seealso-user\" ng-if=\"suggested.user\">\n                <span\n                    lj-user-dynamic=\"suggested.user.username\"\n                    lj-user-dynamic-options=\"{target: \'_blank\'}\"\n                    ></span>\n            </span>\n        </li>\n    </ul><!-- /items -->\n\n</div>\n';
Site.page.template['angular/widgets/authors/posts.ng.tmpl'] = '<!-- author\'s posts -->\n\n<div\n    class=\"\n        b-authorsposts\n        l-flatslide-aside-block\n        \"\n    ng-class=\"{\n        \'b-authorsposts-loading\': state.isLoading,\n        \'b-authorsposts-empty\': !posts.length\n    }\"\n    >\n\n    <!-- head -->\n    <header class=\"b-authorsposts-head\">\n        <h3\n            class=\"b-authorsposts-title\"\n            lj-ml=\"main.authorsposts.head\"\n            >\n        </h3>\n    </header>\n\n    <!-- body -->\n    <div class=\"b-authorsposts-body\">\n\n        <!-- items -->\n        <ul class=\"b-authorsposts-items\">\n\n            <!-- item -->\n            <li class=\"b-authorsposts-item\"\n                ng-repeat=\"post in posts\">\n\n                <!-- link -->\n                <a\n                    class=\"b-authorsposts-link\"\n                    data-track-event=\"LJMag:Post:OpenAnotherPostByAuthor:{{post.user.username}}\"\n                    ng-href=\"{{ post.url }}\"\n                    >\n                    <!-- pic -->\n                    <span\n                        class=\"b-authorsposts-pic\"\n                        style=\"background-image: url({{post.image}});\"\n                        ng-if=\"post.image\"\n                        ></span>\n                    <!-- subject -->\n                    <span\n                        class=\"b-authorsposts-subject\"\n                        lj-html=\"post.subject\"\n                        ></span>\n                </a>\n\n            </li>\n\n        </ul>\n\n        <!-- dummy loader -->\n        <div class=\"b-authorsposts-dummy\">\n            <div class=\"b-authorsposts-dummy-item\">\n                <span class=\"b-authorsposts-dummy-pic\"></span>\n                <div class=\"b-authorsposts-dummy-caption\">\n                    <span class=\"b-authorsposts-dummy-subject\"></span>\n                </div>\n            </div>\n            <div class=\"b-authorsposts-dummy-item\">\n                <span class=\"b-authorsposts-dummy-pic\"></span>\n                <div class=\"b-authorsposts-dummy-caption\">\n                    <span class=\"b-authorsposts-dummy-subject\"></span>\n                </div>\n            </div>\n            <div class=\"b-authorsposts-dummy-item\">\n                <span class=\"b-authorsposts-dummy-pic\"></span>\n                <div class=\"b-authorsposts-dummy-caption\">\n                    <span class=\"b-authorsposts-dummy-subject\"></span>\n                </div>\n            </div>\n        </div>\n\n    </div><!-- /body -->\n\n</div><!-- /authorsposts -->\n\n\n';
LJ.injectStyle('/* >>> file start: stc/lj_gallery.css */\n.b-journalgallery{overflow:hidden;display:block;position:relative;width:100%;margin:0 auto;padding:0 0 70px;font:600 13px/1.1 ProximaNova,Tahoma,Arial,sans-serif;font:600 .8125rem/1.1 ProximaNova,Tahoma,Arial,sans-serif}.b-journalgallery-container{position:relative;margin:0 auto;background:#FFF}.b-journalgallery-picture{position:absolute;top:0;width:100%;margin:0!important;-webkit-transition:.5s cubic-bezier(.25,.25,.75,.75) all;transition:.5s cubic-bezier(.25,.25,.75,.75) all;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center}.b-journalgallery-picture::after{content:\'\';display:inline-block;height:100%;margin:0 0 0 -.05em;vertical-align:middle}.b-journalgallery-preloader.svgpreloader{position:absolute;top:50%;left:50%;margin:-8px 0 0 -8px}.b-journalgallery-wrapper{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}.b-journalgallery-hightpriority .b-journalgallery-wrapper{display:inline}.b-journalgallery-image{display:none}.b-journalgallery.b-journalgallery-hightpriority .b-journalgallery-picture .b-journalgallery-wrapper .b-journalgallery-image{width:auto;max-height:100%}.b-journalgallery-caption{position:absolute;top:100%;left:0;right:0;height:70px;margin:0;padding:0;border:0;text-align:center;background:#FFF;color:#829399}.b-journalgallery-caption-title{overflow:hidden;position:absolute;top:0;right:40px;left:40px;height:3.3em;margin:0;padding:10px 2px 0;line-height:1.1}.b-journalgallery-picture-loaded{background-image:none}.b-journalgallery-picture-loaded .b-journalgallery-image{opacity:1}.b-journalgallery-picture-prev{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);opacity:0}.b-journalgallery-picture-next{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);opacity:0}.b-journalgallery-picture-current{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.b-journalgallery-counter{position:absolute;bottom:44px;right:0;margin:0;padding:2px;border:0;text-align:right;color:#829399}.b-journalgallery-nav{position:absolute;top:0;bottom:70px;margin:0;padding:0;border:0;cursor:pointer;font:0/0 a}.b-journalgallery-nav:after,.b-journalgallery-nav:before{content:\" \";position:absolute;top:50%;padding:0}.b-journalgallery-nav:before{width:50px;height:50px;margin:-25px 0 0;border:0;border-radius:3px;background:#839399}.b-journalgallery-nav:hover:before{background:#09C}.b-discoveryarticle .b-journalgallery-nav:hover:before{background:#39BF71}.b-journalgallery-nav:after{width:9px;height:16px;margin:-8px 0 0;background:url(/img/icons/journalgallery.png?v=39648) no-repeat}.b-journalgallery-nav-prev{left:0;width:30%}.b-journalgallery-nav-prev::before{left:20px}.b-journalgallery-nav-prev::after{left:40px}.b-journalgallery-nav-next{right:0;width:70%}.b-journalgallery-nav-next::before{right:20px}.b-journalgallery-nav-next::after{right:40px;background-position:0 -17px}@media all and (max-width:480px){.b-journalgallery-nav-prev::before{left:0}.b-journalgallery-nav-prev::after{left:20px}.b-journalgallery-nav-next::before{right:0}.b-journalgallery-nav-next::after{right:20px}}\n/* <<< file end: stc/lj_gallery.css */\n\n/*# sourceMappingURL=lj_gallery.css.map */\n');
angular.module("Discovery.Tags",["LJ.Templates","LJ.Api"]).directive("ljDiscoveryTags",["$compile",function(t){var e=["lj-gallery","[lj-memories]","[lj-lazy]","[lj-share]","[lj-likus]","[lj-cut]","[lj-screenable]","[feed-promo-control]","[feed-promo-click]","[lj-remove-repost]","[lj-quick-comments]","[ng-bind]","[ng-show]","[lj-sticky]"];return{restrict:"A",terminal:!0,link:function(i,n){t(n.find(e.join(",")))(i)}}}]).directive("ljGallery",["$templateCache","$compile",function(t,e){return{restrict:"E",scope:!0,link:function(i,n,l){i.paddingTop=75,i.maxWidth=l.width||2e3,i.maxHeight=l.height||350,i.containersDimensions={paddingTop:i.paddingTop+"%"},i.galleryDimensions={maxWidth:i.maxWidth+"px",maxHeight:i.maxHeight+"px"},i.items=n.find("lj-gallery-item").map(function(){var t=angular.element(this).find("img"),e=angular.element(this).find("a"),n=angular.element(this).find("lj-gallery-item-capture"),a={content:n.html(),src:t.attr("src"),href:e.attr("href")},s=void 0,o=void 0,r=void 0,d=void 0,c=function(){s=t[0].naturalHeight,o=t[0].naturalWidth,r=s/o,d=100*r,d<i.paddingTop&&(i.paddingTop=d,i.containersDimensions.paddingTop=i.paddingTop+"%",!l.width&&o<i.maxWidth&&(i.galleryDimensions.maxWidth=Math.round(i.maxHeight/r)+"px")),a.width=o+"px",a.height=s+"px"};return c(),t[0].addEventListener("load",function(){c()}),a}).toArray(),i.isTall="undefined"!=typeof l.tall,i.next=function(){i.state.index+=1},i.prev=function(){i.state.index-=1},i.state={index:0,total:i.items.length-1},i.isNearby=function(t){return Math.abs(i.state.index-t)<=1},n.html(e(t.get("ljGallery.ng.tmpl"))(i))}}}]).directive("ljSuggest",["Api",function(t){return{templateUrl:"ljSuggest.ng.tmpl",scope:{itemId:"@ljSuggest"},link:function(e){t.call("discovery.suggest",{itemid:e.itemId},{cache:!0}).then(function(t){e.suggest=t.items})}}}]).directive("ljWidgetAuthorsPosts",["Api",function(t){return{templateUrl:"posts.ng.tmpl",scope:{userId:"@ljWidgetAuthorsPosts",itemId:"@ljWidgetAuthorsPostsExclude"},link:function(e){e.state={isLoading:!0},t.call("discovery.author_posts",{itemid:e.itemId,userid:e.userId},{cache:!0}).then(function(t){e.state.isLoading=!1,e.posts=t.items})}}}]);
/* <<< file end: js/discovery/directives.js */

//# map link was there [directives.js.map]
/* >>> file start: js/core/angular/ljMemories.js */
//= require js/core/angular/bubble.js
//= require js/core/angular/api.js
Site.page.template['angular/memories.ng.tmpl'] = '<div ng-controller=\"MemoriesCtrl\">\n\n    <div\n        class=\"b-addtomemories\"\n        ng-class=\"{ \'b-addtomemories-loading\': loading }\"\n        >\n\n        <!-- head -->\n        <h3\n            class=\"b-addtomemories-head\"\n            lj-ml=\"memories.title\"\n            ></h3>\n\n        <!-- intro -->\n        <p class=\"b-addtomemories-intro\">\n            <span\n                ng-show=\"!security\"\n                lj-ml=\"memories.title.add\"\n                ></span>\n            <span\n                ng-show=\"security\"\n                lj-ml=\"memories.title.edit\"\n                ></span>\n        </p>\n\n        <!-- items -->\n        <ul class=\"b-addtomemories-items\">\n\n            <li class=\"b-addtomemories-item\">\n                <label class=\"b-addtomemories-label\">\n                    <input\n                        type=\"radio\"\n                        name=\"security\"\n                        class=\"b-addtomemories-radio\"\n                        value=\"public\"\n                        ng-model=\"security\"\n                        ng-change=\"update()\"\n                        >\n                    <span\n                        class=\"b-addtomemories-title\"\n                        lj-ml=\"memories.security.public\"\n                        ></span>\n                </label>\n            </li>\n\n            <li class=\"b-addtomemories-item\">\n                <label class=\"b-addtomemories-label\">\n                    <input\n                        type=\"radio\"\n                        name=\"security\"\n                        class=\"b-addtomemories-radio\"\n                        value=\"friends\"\n                        ng-model=\"security\"\n                        ng-change=\"update()\"\n                        >\n                    <span\n                        class=\"b-addtomemories-title\"\n                        lj-ml=\"memories.security.friends\"\n                        ></span>\n                </label>\n            </li>\n\n            <li class=\"b-addtomemories-item\">\n                <label class=\"b-addtomemories-label\">\n                    <input\n                        type=\"radio\"\n                        name=\"security\"\n                        class=\"b-addtomemories-radio\"\n                        value=\"private\"\n                        ng-model=\"security\"\n                        ng-change=\"update()\"\n                        >\n                    <span\n                        class=\"b-addtomemories-title\"\n                        lj-ml=\"memories.security.private\"\n                        ></span>\n                </label>\n            </li>\n\n        </ul><!-- /items -->\n\n        <!-- footer -->\n        <div\n            class=\"b-addtomemories-footer\"\n            ng-show=\"removeButton\"\n            >\n            \n            <lj-flatbutton lj-flatbutton=\"[\'button\', \'memories.remove\', \'b-flatbutton b-flatbutton-simple b-flatbutton-red\', \'ng-click\', \'remove()\']\"></lj-flatbutton>\n        </div><!-- /footer -->\n\n        <p class=\"b-addtomemories-options\">\n            <a\n                ng-href=\"{{siteroot}}/tools/memadd.bml?journal={{bubble.options.journal}}&amp;itemid={{bubble.options.ditemid}}\"\n                target=\"_blank\"\n                lj-ml=\"memories.options\"\n                ></a>\n        </p>\n\n    </div><!-- /addtomemories -->\n\n</div>\n';
LJ.injectStyle('/* >>> file start: stc/popup/popup-memories.css */\n.b-addtomemories{width:150px;margin:0;padding:0;text-align:left}.b-addtomemories-head{margin:0 0 .5em;padding:0;font:700 1.13em/1.1 Arial,sans-serif;color:#000}.b-addtomemories-intro{margin:0 0 .3em}.b-addtomemories-items{margin:0;padding:0;list-style:none}.b-addtomemories-item{margin:0;padding:0}.b-addtomemories-label{display:block;margin:0 -5px;padding:5px;cursor:pointer}.b-addtomemories-item:hover .b-addtomemories-label{background:#C8E6FF}.b-addtomemories-footer{margin:1em 0}.b-addtomemories-options{margin:.3em -5px 0;padding:.3em 5px 0;border-top:1px solid #DAE3E6}.b-addtomemories-loading{background:url(/img/preloader/preloader-blue-gray.gif?v=16423) 50% 50% no-repeat}.b-addtomemories-loading .b-addtomemories-footer,.b-addtomemories-loading .b-addtomemories-head,.b-addtomemories-loading .b-addtomemories-intro,.b-addtomemories-loading .b-addtomemories-items,.b-addtomemories-loading .b-addtomemories-options{visibility:hidden}\n/* <<< file end: stc/popup/popup-memories.css */\n\n/*# sourceMappingURL=popup-memories.css.map */\n');
!function(e){angular.module("LJ.Memories",["LJ.Bubble","LJ.Api"]).directive("ljMemories",["$parse","$timeout","Bubble",function(o,t,i){return{scope:{ljMemories:"&"},link:function(o,t){function n(n){n.preventDefault(),i.open("memories",r,e(t)),o.$apply()}var r="function"==typeof o.ljMemories?o.ljMemories({element:t}):o.ljMemories;i.exists("memories")||i.register({name:"memories",template:"memories.ng.tmpl",disableClick:!0,closeOnScroll:r.closeOnScroll}),t.on("click",n),o.$on("$destroy",function(){t.off("click",n)})}}}]).controller("MemoriesCtrl",["$scope","Api",function(o,t){var i=o.bubble;o.security=null,o.$watch("removeButton",function(){e(window).trigger("resize")}),o.$on("bubble:open:memories",function(){t.call("memories.get",i.options,function(e){o.security=e.result?e.result.security:null,o.removeButton=Boolean(o.security)})}),o.$on("bubble:close:memories",function(){o.removeButton=!1}),o.siteroot=LJ.get("siteroot"),o.update=function(){t.call("memories.set",{journal:i.options.journal,ditemid:i.options.ditemid,description:i.options.journal+": "+i.options.title.decodeHTML(),security:o.security},function(e){o.security=e,i.close(),o.removeButton=!0})},o.remove=function(){t.call("memories.remove",{journal:i.options.journal,ditemid:i.options.ditemid},function(){o.security=null,i.close(),o.removeButton=!1})},LJ.Event.on("api:request:change",function(e,t){/^memories/.test(e)&&(o.loading=t)})}])}(jQuery);
/* <<< file end: js/core/angular/ljMemories.js */

//# map link was there [ljMemories.js.map]
/* >>> file start: js/core/angular/ljEmbed.js */
//= require js/core/angular/api.js
Site.page.template['angular/embed.ng.tmpl'] = '<!-- Bubble -->\n<div ng-if=\"embed.show\" class=\"ljembed-bubble\">\n    <button class=\"ljembed-bubble__close\" ng-click=\"embed.close()\" lj-svg-icon=\"flaticon--cross-2\" tabindex=\"1\"></button>\n    <header class=\"ljembed-bubble__header\">\n        <h4 class=\"ljembed-bubble__title\" lj-ml=\"embed.post.title\"></h4>\n        <span class=\"ljembed-bubble__desc\" lj-ml=\"embed.post.desc\"></span>\n        <input\n            class=\"ljembed-bubble__code\"\n            tabindex=\"2\"\n            ng-value=\"embed.code\"\n            onclick=\"this.select()\"\n        />\n        <button class=\"ljembed-bubble-copy\" ng-click=\"embed.copy()\" tabindex=\"3\">\n            <span class=\"ljembed-bubble-copy__icon\" lj-svg-icon=\"flaticon--copy\"></span>\n            <span class=\"ljembed-bubble-copy__text\" lj-ml=\"embed.post.btn.copy\"></span>\n        </button>\n    </header>\n    <div class=\"ljembed-bubble__body\">\n        <div\n            ng-if=\"embed.spinner\"\n            class=\"ljembed-bubble__spinner svgpreloader svgpreloader-pseudo svgpreloader-30\"\n            ng-class=\"{\'ljembed-bubble__spinner--show\': embed.spinner}\">\n        </div>\n        <iframe\n            ng-if=\"!embed.pre\"\n            class=\"ljembed-bubble__preview\"\n            ng-src=\"{{embed.url}}\"\n            width=\"{{embed.width}}\"\n            height=\"{{embed.height}}\"\n            ng-style=\"{ height: embed.height }\"\n        >\n        </iframe>\n    </div>\n</div>\n<!-- /Bubble -->';
//= require_ml embed.post.btn.copy
//= require_ml embed.post.title
//= require_ml embed.post.desc
!function(){function e(){return{scope:!0,templateUrl:"embed.ng.tmpl",controllerAs:"embed",controller:t}}function t(e,t,n,r){function a(t){t.data&&t.data.height&&(i.height=t.data.height,i.spinner=!1,i.code=l(i.plainUrl,i.width,i.height),e.$$phase||e.$apply())}function l(e,t,n){return'<iframe style="max-width: 100%" src="'+e+'" width="'+t+'" height="'+n+'" frameborder="0"></iframe>'}var i=this,o="ljembed-bubble--full",d=angular.element("body");i.show=!1,i.spinner=!0,i.width=502,i.height=252,i.fader=angular.element("[lj-embed-share]"),i.fader.on("click",function(t){return t.target!==t.currentTarget?!1:(i.close(t),void e.$apply())}),i.close=function(e){e&&e.preventDefault(),d.removeClass(o),i.show=!1,i.spinner=!0,i.width=502,i.height=252,n.removeEventListener("message",a)},i.copy=function(e){e&&e.preventDefault();var t=angular.element(".ljembed-bubble__code")[0];t.select();try{return document.execCommand("copy")}catch(n){return console.warn("Copy to clipboard failed.",n),!1}},LJ.Event.on("lj:embed",function(e){d.addClass(o),i.show=!0,i.pre=!0,i.plainUrl=e,i.url=r.trustAsResourceUrl(e),i.code=l(i.plainUrl,i.width,i.height),t(function(){i.pre=!1,n.addEventListener("message",a)},0)})}t.$inject=["$scope","$timeout","$window","$sce"],angular.module("LJ.Embed",["LJ.Directives","LJ.Api"]).run(function(){angular.element("body").addClass("j-p-embed"),angular.element("[ng-app]").append("<div lj-embed-share></div>")}).directive("ljEmbedShare",e)}(jQuery);
/* <<< file end: js/core/angular/ljEmbed.js */

//# map link was there [ljEmbed.js.map]
/* >>> file start: js/core/string.js */
!function(t){return t}(),function(){"use strict";LJ.define("LJ.String"),LJ.String.pad=function(t,n,r){if(t=t.toString(),"undefined"==typeof n)throw new Error("You should provide padding string length");if("undefined"==typeof r)throw new Error("You should provide padding symbol");if(t.length>=n)return t;for(;t.length<n;)t=r+t;return t.length===n?t:t.slice(-n)},LJ.String.capitalize=function(t){var n;if("string"!=typeof t)throw new Error("You should provide string as argument");return n=t.length,0===n?t:1===n?t.toUpperCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},LJ.String.linkify=function(t){var n=new RegExp("^(?:([a-zA-Z]+):)?//"),r=/^[a-zA-Z]+:/,e=/^:\/\//,i=r.test(t)?"":"https://";return n.test(t)?t:i+(e.test(t)?t.replace("://",""):t)},LJ.String.smartSplit=function(t,n){return"undefined"==typeof n&&(n=","),t.split(n).map(function(t){return t.trim()}).filter(Boolean)},LJ.String.encodeHTML=function(t){var n={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return t.replace(/([<>&\"\'])/g,function(t,r){return n[r]?n[r]:r})}}();
/* <<< file end: js/core/string.js */

//# map link was there [string.js.map]
/* >>> file start: js/core/angular/share.js */
//= require js/core/angular/bubble.js
//= require js/core/string.js
Site.page.template['angular/share.ng.tmpl'] = '<p\n        class=\"b-sharethis-head\"\n        lj-ml=\"sharing.popup.title\"\n></p>\n\n<ul\n        ng-controller=\"ShareBubbleCtrl as share\"\n        class=\"\n        b-sharethis-services\n        b-sharethis-services-{{ share.version }}\n        \"\n>\n    <li\n            ng-if=\"share.ljRepostFlag\"\n            ng-repeat=\"service in share.services\"\n            class=\"\n                b-sharethis-services-item\n                b-sharethis-{{ service.name }}\n                \"\n    >\n        <a\n                ng-if=\"service.name !== \'livejournal\'\"\n                class=\"b-sharethis-services-link\"\n                ng-class=\"{\'b-sharethis-services__open\': isAdvState}\"\n                ng-click=\"share.openPopup($event, service.name, bubble.options.params);\"\n                ng-href=\"{{ service.link }}\"\n                ng-bind=\"service.title\"\n        >\n        </a>\n        <a  ng-if=\"service.name == \'livejournal\'\"\n            class=\"b-sharethis-services-link b-sharethis-services-link--adv\"\n            ng-class=\"{\'b-sharethis-services-link--open\': isAdvState}\"\n            ng-click=\"isToogleAdv()\"\n        >\n            <span class=\"b-sharethis-services-link__title\">{{service.title}}</span>\n            <span class=\"b-sharethis-services-link__dropdown\" lj-svg-icon=\"flaticon--arrow-dropdown\"></span>\n        </a>\n        <div class=\"b-sharethis-services-adv\" ng-if=\"service.name == \'livejournal\'\">\n            <div class=\"b-sharethis-services-adv__wrap\">\n                <a class=\"b-sharethis-services-adv__link\" href=\"#\">Поделиться мнгновенно</a>\n                <a class=\"b-sharethis-services-adv__link\" href=\"#\">Поделиться</a>\n            </div>\n        </div>\n    </li>\n\n    <li\n            ng-if=\"!share.ljRepostFlag\"\n            ng-repeat=\"service in share.services\"\n            class=\"\n                b-sharethis-services-item\n                b-sharethis-{{ service.name }}\n                \"\n    >\n        <div\n            ng-if=\"service.name === \'livejournal\'\"\n            lj-share-button=\"{{share.entryUrl}}\"\n            lj-share-button-title=\"{{service.title}}\"\n        ></div>\n        <a\n            target=\"_blank\"\n            class=\"b-sharethis-services-link\"\n            ng-click=\"share.openPopup($event, service.name, bubble.options.params);\"\n            ng-href=\"{{ service.link }}\"\n            ng-if=\"service.name !== \'livejournal\'\"\n        >\n            <span class=\"b-sharethis-services-link__icon-wrap\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"svgicon flaticon flaticon--{{service.name}} b-sharethis-services-link__icon\">\n                    <use ng-href=\"#flaticon--{{service.name}}\" xlink:href=\"\"></use>\n                </svg>\n            </span>\n            <span class=\"b-sharethis-services-link__title\" ng-bind=\"service.title\"></span>\n        </a>\n    </li>\n</ul>';
//= require_ml sharing.popup.title
!function(e){return e}(),function(){"use strict";angular.module("LJ.Share",["LJ.Directives","LJ.Templates","LJ.Bubble"]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|viber):/)}]).directive("ljShare",["Bubble",function(e){return{restrict:"A",scope:!0,link:function(t,r,i){function l(){e.open("share",{params:a,services:n},r),t.$evalAsync()}var a=t.$eval(i.ljShare),n=t.$eval(i.ljShareServices),o=t.$eval(i.ljShareServicesExclude);if(n=n?LJ.String.smartSplit(n):LJ.Social.Share.services(),o=o?LJ.String.smartSplit(o):[],o.length&&(n=n.filter(function(e){return-1===o.indexOf(e)})),n.length){var s=e.register({name:"share",template:"share.ng.tmpl",alwaysBottom:a.alwaysBottom,recalculateOnScroll:i.hasOwnProperty("ljShareScrollable")});r.on("click",l),t.$on("$destroy",function(){r.off("click",l),s()})}}}}]).controller("ShareBubbleCtrl",["$scope","Bubble",function(e,t){var r=this,i=r;this.ljRepostFlag=LJ.Flags.isEnabled("lj_repost"),e.isAdvState=!1,e.$on("bubble:open:share",function(){i.version=LJ.Flags.isEnabled("adaptive_lj_mobile")?"v4":"v3",i.services=e.bubble.options.services.map(function(t){return{name:t,link:LJ.Social.Share.getUrl(t,e.bubble.options.params),title:LJ.Social.Share.getTitle(t)}}),r.entryUrl=e.bubble.options.params.url}),e.isToogleAdv=function(){e.isAdvState=!e.isAdvState},i.openPopup=function(e,r,i){return LJ.Social.Share.isTab(r)?void t.close("share"):(e.preventDefault(),LJ.Social.Share.openPopup(r,i),void t.close("share"))}}])}();
/* <<< file end: js/core/angular/share.js */

//# map link was there [share.js.map]
/* >>> file start: js/core/angular/ljRemoveRepost.js */
//= require js/core/angular/api.js
//= require js/core/angular/bubble.js
Site.page.template['angular/ljRemoveRepost.ng.tmpl'] = '<div ng-controller=\"RemoveRepostCtrl as remove\">\n\n    <div\n        class=\"b-removerepost\"\n        ng-class=\"{ \'b-removerepost-loading\': loading }\"\n        >\n        <!-- intro -->\n        <p class=\"b-removerepost-intro\">\n            <span\n                lj-ml=\"repost.confirm.delete\"\n                ></span>\n        </p>\n\n        <!-- footer -->\n         <div\n            class=\"b-removerepost-footer\"\n            >\n            <div class=\"b-popup-submit-options\">\n                <span class=\"b-popup-preloader\">\n                    <span\n                        class=\"b-popup-preloader-inner\"\n                        >\n                        <button\n                            class=\"\n                                b-flatbutton\n                                b-flatbutton-simple\n                                \"\n                            type=\"button\"\n                            ng-click=\"remove.submit()\"\n                            lj-ml=\"confirm.bubble.yes\"\n                            ></button>\n                        <i class=\"preloader\"></i>\n                    </span>\n                    <button\n                        href=\"\"\n                        class=\"\n                            b-flatbutton\n                            b-flatbutton-simple\n                            b-flatbutton-neutral\n                            \"\n                        ng-click=\"remove.cancel()\"\n                        lj-ml=\"confirm.bubble.no\"\n                        ></button>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n';
//= require_ml repost.confirm.delete
//= require_ml confirm.bubble.yes
//= require_ml confirm.bubble.no
LJ.injectStyle('/* >>> file start: stc/popup/popup-delete-repost.css */\n.b-removerepost{width:200px;margin:0;padding:0;text-align:left}.b-removerepost-head{margin:0 0 .5em;padding:0;font:700 1.13em/1.1 Arial,sans-serif;color:#000}.b-removerepost-intro{margin:0 0 .3em}.b-removerepost-footer{margin:1em 0 0}.b-removerepost-loading{background:url(/img/preloader/preloader-blue-gray.gif?v=16423) 50% 50% no-repeat}.b-removerepost-loading .b-removerepost-footer,.b-removerepost-loading .b-removerepost-head,.b-removerepost-loading .b-removerepost-intro{visibility:hidden}\n/* <<< file end: stc/popup/popup-delete-repost.css */\n\n/*# sourceMappingURL=popup-delete-repost.css.map */\n');
!function(e){return e}(),function(){"use strict";angular.module("LJ.RemoveRepost",["LJ.Bubble","LJ.Api"]).run(["Bubble",function(e){e.register({name:"removeRepost",template:"ljRemoveRepost.ng.tmpl",recalculateOnScroll:!0,alwaysBottom:!0})}]).directive("ljRemoveRepost",["Api","Bubble",function(e,o){return{scope:{post:"=ljRemoveRepost"},link:function(e,t){function n(n){n.preventDefault(),o.open("removeRepost",{post:e.post},t),e.$evalAsync()}t.on("click",n),e.$on("$destroy",function(){t.off("click",n)})}}}]).controller("RemoveRepostCtrl",["$scope","$rootScope","Api","$window",function(e,o,t,n){var l,i=e.bubble;e.$on("bubble:open:removeRepost",function(e,o,t){l=t.post}),this.submit=function(){t.call("repost.delete",{url:l.permalink_url}).then(function(){o.$emit("feed:item:remove",l.itemid),i.close(),LJ.get("journal.id")===LJ.get("remote.id")&&n.location.reload()})},this.cancel=function(){i.close()}}])}(jQuery);
/* <<< file end: js/core/angular/ljRemoveRepost.js */

//# map link was there [ljRemoveRepost.js.map]
/* >>> file start: js/core/angular/ljTour.js */
//= require js/core/angular/bubble.js
//= require js/core/angular/api.js
//= require js/core/angular/ref.js
Site.page.template['angular/bubbletour.ng.tmpl'] = '<div class=\"b-helptour\">\n    <header class=\"b-helptour-header\" ng-hide=\"current.length < 2\">\n        <span class=\"b-helptour-stage\">\n            <span class=\"b-helptour-stage-prev\" ng-bind=\"index\"></span>\n            <span class=\"b-helptour-stage-hr\">/</span>\n            <span class=\"b-helptour-stage-next\" ng-bind=\"current.length\"></span>\n        </span>\n    </header>\n    <div class=\"b-helptour-content b-text\">\n        <span lj-ml=\"{{step.tourText}}\" lj-ml-dynamic=\"index\"></span>\n    </div>\n    <footer class=\"b-helptour-footer\">\n        <ul class=\"b-helptour-controls b-helptour-state\">\n            <li class=\"b-helptour-control b-helptour-control-skip\"\n                ng-hide=\"step.tourNoSkip || index === current.length\">\n                <a class=\"b-helptour-skip-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.skip\"\n                   ng-click=\"end()\"></a>\n            </li>\n        </ul>\n        <ul class=\"b-helptour-controls b-helptour-step\">\n            <li class=\"b-helptour-control b-helptour-control-prev\"\n                ng-hide=\"step.tourNoBack || index === 1\">\n                <a class=\"b-helptour-prev-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.prev\"\n                   ng-click=\"prev()\"></a>\n            </li>\n            <li class=\"b-helptour-control b-helptour-control-next\"\n                ng-hide=\"step.tourNoNext || index === current.length\">\n                <a class=\"b-helptour-next-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.next\"\n                   ng-click=\"next()\"></a>\n            </li>\n            <li class=\"b-helptour-control b-helptour-control-done\"\n                ng-hide=\"index !== current.length\">\n                <a class=\"b-helptour-done-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.done\"\n                   ng-click=\"end()\"></a>\n            </li>\n        </ul>\n    </footer>\n</div>\n';
LJ.injectStyle('/* >>> file start: stc/tour/ljtour.css */\n.b-bubble-tour{z-index:5001}.b-bubble-tour .b-popup-inner{padding:0}.b-helptour{width:350px}.b-helptour-header{margin:0 0 .3em;padding:10px 16px 0}.b-helptour-footer:after,.b-helptour-header:after{display:table;width:100%;clear:both;content:\"\"}.b-helptour-stage-title{margin-right:10px}.b-helptour P:first-child{margin:0 0 .3em}.b-helptour-content{margin:10px 0 .6em;padding:0 16px}.b-helptour-content P{margin:.3em 0}.b-helptour-content LI,.b-helptour-content UL{margin:0;padding:0;list-style:none}.b-helptour-footer{padding:6px 15px;border-radius:0 0 5px 5px;background-color:#DAE3E6}.b-helptour-controls{margin:0;padding:0}.b-helptour-state{float:left}.b-helptour-step{float:right}.b-helptour-control{display:inline;margin-right:4px;cursor:pointer}.b-helptour-control-done:after{display:inline-block;content:\"\";width:14px;height:12px;background-image:url(/img/icons/unit_v3.png?v=42878);background-repeat:no-repeat;background-position:0 -223px}.b-helptour-control-done A{padding-left:8px}.b-helptour-control-done A:link,.b-helptour-control-done A:visited,.b-helptour-control-next A:link,.b-helptour-control-prev A:link{color:#00A3D9}.b-helptour-control-skip A:link,.b-helptour-control-skip A:visited{color:#7A9199}.b-helptour-control A{font-size:13px}.b-helptour-control A:active,.b-helptour-control A:focus,.b-helptour-control A:hover{color:#0086b3}.p-ljtour .b-lenta .l-flatslide-container{position:static}.p-ljtour .l-flatslide-menu-controls{position:absolute;top:auto!important}.p-ljtour.p-openpopup .w-cs{overflow:visible}@media all and (max-width:650px){.p-ljtour.p-openpopup .b-fader{display:none!important}.b-bubble-tour{display:none}}\n/* <<< file end: stc/tour/ljtour.css */\n\n/*# sourceMappingURL=ljtour.css.map */\n');
//= require_ml tour.steps.prev
//= require_ml tour.steps.next
//= require_ml tour.steps.skip
//= require_ml tour.steps.done
!function(e){return e}(),function(e){"use strict";angular.module("LJ.Tour",["LJ.Bubble","LJ.Templates","LJ.Directives","LJ.Api"]).factory("Tour",["Api",function(e){var t={};return t.queue={},t.checkAvailable=function(){var n=Object.keys(t.queue);return e.call("tour.is_available",{tours:n}).then(function(e){n.forEach(function(n){0===e.states[n]&&delete t.queue[n]})})},t.setDone=function(t){return e.call("tour.set_done",{tour:t})},t}]).directive("ljTour",["$timeout","$document","Bubble","Ref","Tour",function(t,n,r,u,o){return{scope:!0,link:function(i){function c(){e("body").find("[data-tour]").each(function(){var t=e(this),n=angular.extend({element:t},t.data());Array.isArray(L[n.tour])||(L[n.tour]=[]),n.tourStepDiscardDuplicates&&L[n.tour].some(function(e){return e.tourStep===n.tourStep})||L[n.tour].push(n)})}function a(){var e=Object.keys(L)[0],t=L[e];i.current=t.filter(function(e){return b(e)&&v(e)}).sort(function(e,t){return e.tourStep>t.tourStep?1:e.tourStep<t.tourStep?-1:0}),i.current.forEach(function(e){u.add(e.tour+e.tourStep,e.element)}),delete L[e],g(i.current[0])?f():l()}function l(){Object.keys(L).length&&a()}function s(){r.close(),O.fadeOut(),angular.element("body").removeClass("p-ljtour").off("ljsale-load",y),o.setDone(i.step.tour),O.off("click",s),i.current=null,i.step=null,l()}function f(){return angular.element("body").addClass("p-ljtour").on("ljsale-load",function(e){e.originalEvent.data.slot&&y()}),O.is(":visible")?void t(f,300):(p(),O.on("click",s).fadeIn(),void(i.current=i.current.filter(function(e){return m(e.element)})))}function p(){var e=i.current.indexOf(i.step);e<i.current.length-1?(i.step=i.current[++e],i.index=++e,h()):s()}function d(){var e=i.current.indexOf(i.step);e>0&&(i.step=i.current[--e],i.index=++e,h())}function b(e){return e.hasOwnProperty("tourOwner")?LJ.get("remote.username")===LJ.get("journal.username"):!0}function v(e){return e.hasOwnProperty("tourSkipIf")?e.tourSkipIf.split(",").every(function(e){return e=e.trim(),"!"===e.charAt(0)?LJ.get(e.slice(1)):!LJ.get(e)}):!0}function m(e){return e.is(":visible")&&0!==e.css("opacity")&&"hidden"!==e.css("visibility")}function g(e){return e?e.hasOwnProperty("tourStartPage")?new RegExp(e.tourStartPage,"i").test(location.pathname):1===e.tourStep:!1}function y(){angular.element(window).trigger("resize"),S()}function h(){if(i.step){if(!i.step.element.is(":visible"))return p();r.current&&r.close(),t(function(){var e=r.options("tour")||{};r.open("tour",angular.extend(e,i.step.tourBubble),i.step.element),S()}),LJ.Event.once("visual_editor_ready",function(){t(y)})}}function S(){u.scrollTo(i.step.tour+i.step.tourStep,{onlyOutOfScreen:!0})}function k(e){if(i.current&&i.current.length){switch(e.which){case 27:s();break;case 37:d();break;case 39:p()}i.$apply()}}var J,L=o.queue,O=angular.element(document.querySelector(".b-fader")),w=!1;J=r.register({name:"tour",template:"bubbletour.ng.tmpl",closeControl:!1},i),!LJ.Flags.isEnabled("friendsfeed_tour")||LJ.Support.isMobile()||w||(w=!0,t(function(){c(),o.checkAvailable().then(l)})),i.next=p,i.prev=d,i.end=s,n.on("keydown",k),i.$on("$destroy",function(){n.off("keydown",k),J()})}}}])}(jQuery);
/* <<< file end: js/core/angular/ljTour.js */

//# map link was there [ljTour.js.map]
/* >>> file start: js/widgets/likus.js */
function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};
//= require js/core/angular/ljUser.js
//= require js/core/angular/api.js
//= require js/core/angular/bubble.js
Site.page.template['angular/widgets/likus/likusMain.ng.tmpl'] = '<a\n    class=\"ljlikus-button ljlikus--like\"\n    ng-class=\"{\'ljlikus--like-active\': likus.liked}\"\n    ng-href=\"#\"\n    ng-click=\"likus.vote($event)\"\n    ng-if=\"likus.show && !likus.link\"\n    ><span class=\"ljlikus-icon\" lj-svg-icon=\"flaticon--like\"></span></a>\n<a\n    class=\"ljlikus-action\"\n    ng-href=\"#\"\n    ng-if=\"likus.show && likus.count && !likus.link\"\n    ng-click=\"likus.countClick($event)\"\n    ng-mouseover=\"likus.countHover($event)\"\n    ><span class=\"ljlikus-counter\">{{likus.count}}</span></a>\n\n<!-- no actions -->\n<a\n    class=\"ljlikus--like ljlikus-no-action\"\n    ng-href=\"{{likus.link}}\"\n    ng-if=\"likus.show && likus.link\"\n    >\n    <span class=\"ljlikus-icon\" lj-svg-icon=\"flaticon--like\"></span>\n    <span\n        class=\"ljlikus-counter\"\n        ng-if=\"likus.show && likus.link && likus.count\"\n        >{{likus.count}}</span>\n</a>\n';
Site.page.template['angular/widgets/likus/likusUsers.ng.tmpl'] = '<ul class=\"ljlikus-list\">\n    <li class=\"ljlikus__item\" ng-repeat=\"user in users.slice(0, 5)\">\n        <span lj-user-by-id=\"user\" lj-user-by-id-options=\"{ noctxpopup: true }\" />\n    </li>\n    <li\n        ng-if=\"count > 5\"\n        class=\"ljlikus__item ljlikus--more\"\n        >\n        <a href=\"#\" class=\"ljlikus__item--more\" ng-click=\"more($event)\">\n            <span lj-ml=\"likus.users.add_more\" lj-ml-resolve=\"{count: count - 5}\" />\n        </a>\n    </li>\n</ul>\n';
Site.page.template['angular/widgets/likus/likusBubble.ng.tmpl'] = '<!-- Bubble -->\n<div class=\"ljlikus-bubble\">\n\n    <!-- header -->\n    <header class=\"ljlikus-bubble__header\">\n        <span class=\"ljlikus-bubble__title\" lj-ml=\"likus.users.title\"></span>\n        <span class=\"ljlikus-counter\">{{likusBubble.count}}</span>\n        <span\n            class=\"ljlikus-bubble__close\"\n            lj-svg-icon=\"flaticon--cross\"\n            ng-click=\"likusBubble.close($event)\"\n        ></span>\n    </header> <!-- /header -->\n\n    <!-- body -->\n    <div class=\"ljlikus-bubble__body\">\n\n        <!-- list -->\n        <ul class=\"ljlikus-list ljlikus-list--full\">\n            <li ng-repeat=\"user in likusBubble.users\" class=\"ljlikus__item\">\n                <span class=\"ljlikus__item-userpic\">\n                    <img ng-src=\"{{likusBubble.getUserImage(user)}}\" alt=\"\" >\n                </span>\n                <div class=\"ljlikus__item-meta\">\n                    <span lj-html=\"user.entry_title\" />\n                    <p class=\"ljlikus__item-usertitle\">{{user.title}}</p>\n                </div>\n                <div class=\"ljlikus__friends-wrap\">\n                    <button class=\"ljlikus__friends\n                                    ljlikus__friends--add\n                                    flatbutton\n                                    flatbutton--small\n                                    flatbutton--neutral\"\n                          ng-class=\"{ \'ljlikus__friends--hide\': user.is_friend }\"\n                          ng-disabled=\"user.updating\"\n                          ng-click=\"likusBubble.toggleFriend(user, true)\"\n                          lj-ml=\"likus.users.add.friends\"\n                    ></button>\n                    <button class=\"ljlikus__friends\n                                    ljlikus__friends--list\n                                    flatbutton\n                                    flatbutton--small\n                                    flatbutton--neutral\"\n                          ng-class=\"{ \'ljlikus__friends--hide\': !user.is_friend }\"\n                          ng-disabled=\"user.updating\"\n                          ng-click=\"likusBubble.toggleFriend(user, false)\">\n                        <span class=\"ljlikus__friends--list-span\"\n                              lj-ml=\"likus.users.friend.list\"\n                        ></span>\n                        <span lj-ml=\"likus.users.friend.remove\"\n                              class=\"ljlikus__friends--remove\"\n                        ></span>\n                    </button>\n                </div>\n            </li>\n            <li\n                class=\"ljlikus__item ljlikus__item--more\"\n                ng-if=\"likusBubble.hasMore\"\n                >\n                <a\n                    class=\"b-flatbutton b-flatbutton-simple\"\n                    href=\"#\"\n                    ng-click=\"likusBubble.loadMore($event)\"\n                    lj-ml=\"likus.users.show.more\"\n                ></a><!--\n            --></li>\n            <li\n                class=\"ljlikus__item ljlikus__item--loading\"\n                ng-if=\"likusBubble.loading\"\n                >\n                <span class=\"svgpreloader-16 svgpreloader-tag\"></span>\n            </li>\n        </ul> <!-- /list -->\n\n    </div> <!-- /body -->\n</div> <!-- /bubble -->\n';
//= require_ml likus.users.add_more
//= require_ml likus.users.sc
//= require_ml likus.users.add.friends
//= require_ml likus.users.friend.list
//= require_ml likus.users.friend.remove
//= require_ml likus.users.title
!function(){"use strict";function e(){return{scope:{noActions:"@ljLikusNoActions",count:"@ljLikusCount",medius:"@ljLikusMedius",journal:"@ljLikusJournal",item:"@ljLikusItem",token:"@ljLikusToken",uri:"@ljLikusUri"},templateUrl:"likusMain.ng.tmpl",controllerAs:"likus",controller:n}}function n(e,n,t,r,i,o,u,s){function l(e){e.preventDefault(),u.close("likus-users"),angular.isFunction(f)&&f(),o.showUsers(_extends({},d),{likes_signature:y})}function a(e){d={journal:e.journal,item:e.item,uniq:e.journal+"-"+e.item},p.count=parseInt(e.count)||0,p.liked=Boolean(e.liked),v||Promise.all(e.users.map(function(e){return s.prepareById(e)})).then(function(n){c=[].concat(e.users)})}var c,d,f,g,p=this,v=e.noActions||!1,m=parseInt(e.count)||0,k=e.medius,h=e.journal,b=e.item,j=e.uri||r.LJ.get("currentEntry"),y=e.token||r.LJ.get("likes_signature"),L=r.LJ.Flags.isEnabled("likes"),w=r.LJ.Flags.isEnabled("medius"),J=r.LJ.Flags.isEnabled("likes_display"),_=r.LJ.Flags.isDisabled("homepage_v3"),$=r.LJ.get("remote");angular.element("body");return L?_?void n.remove():k&&!w&&"/"==location.pathname?void n.remove():(h&&b&&(d={journal:h,item:b,uniq:""+h+"-"+b}),!d&&j&&(d={uri:j,uniq:j}),void(d&&y&&(J&&n.removeClass("lj-likus--hidden"),p.show=J,p.count=m,p.liked=!1,p.link=v,o.getVote(d,{token:y,type:v?"short":"full",count:m&&v?m:!1},a).then(a),p.vote=function(e){return e.preventDefault(),$?g?void i.log("You don't want to vote so quickly!"):(g=!0,void o.setVote(_extends({},d),{mark:+p.liked}).then(a).then(function(){g=!1},function(){g=!1})):void LJ.Util.Action.login(e)},p.users=function(n){var r=t.$new();r.users=c,r.count=this.count,r.more=l,f=u.register({name:"likus-users",template:"likusUsers.ng.tmpl",closeControl:!1,closeOnScroll:!0,autoClose:200,tryAsideIfNoHorizSpace:!0},r),u.open("likus-users",angular.element(n.currentTarget)),e.$on("bubble:close:likus-users",f)},p.countHover=function(e){return r.innerWidth<=650?void e.preventDefault():void p.users(e)},p.countClick=function(e){e.preventDefault(),r.innerWidth>650||p.users(e)}))):void n.remove()}function t(){return{scope:!0,templateUrl:"likusBubble.ng.tmpl",controllerAs:"likusBubble",controller:r}}function r(e,n,t,r){function i(){return t.showUsers()}function o(e){return e?(f.addClass(c),s.count=t.getCached(e),void u(e)):(f.removeClass(c),s.users=[],s.count=0,void(a=null))}function u(e){s.loading=!0,s.hasMore=!1,t.getUsers(e,{limit:l,lastid:a}).then(function(e){var n=e.res,t=e.count;s.count=t,s.loading=!1,a=(n[l-1]||{}).id,s.hasMore=!1,s.users=s.users.concat(s.lastid?n.slice(1):n)})}var s=this,l=100,a=null,c="ljlikus-bubble--full",d=n.LJ.Flags.isEnabled("likes"),f=angular.element("body");d&&(s.loading=!1,s.hasMore=!1,s.users=[],s.count=0,s.fader=angular.element(".b-fader"),s.fader.on("click",function(n){s.close(n),e.$apply()}),s.getUserImage=function(e){return e.userpic||LJ.get("siteroot")+"/img/userpics/userpic-user.png"},s.close=function(e){e&&e.preventDefault(),t.showUsers(!1)},s.loadMore=function(e){e.preventDefault(),u(t.showUsers())},s.toggleFriend=function(e,n){e.updating=!0,r.call(n?"relations.addfriend":"relations.removefriend",{target:e.username},{silent:!0}).then(function(){e.updating=!1,e.is_friend=n})},e.$watch(i,o))}function i(e){function n(n){return i[n]=i[n]||new Promise(function(t){var r=e.document.createElement("iframe");r.style="display: none; width: 0; height: 0; border: 0;",r.frameBorder=0,r.src=LJ.get("statprefix")+"/??plain/storage.html?key="+n+"&v="+LJ.get("v"),e.document.body.appendChild(r),r.onload=function(){t(r)}}),i[n]}function t(e,t){n(e).then(function(e){e.contentWindow.postMessage(angular.toJson(t),"*")})}function r(n,t){e.addEventListener("message",function(e){if(e.origin===LJ.get("statprefix")){var n=void 0;try{n=angular.fromJson(e.data||"{}")||{}}catch(r){n={}}t(n)}})}var i={};return{push:t,listen:r}}function o(e,n,t,r,i,o){function u(t,r,i){var o=n.defer(),u=r.token+"#"+r.type;if(r.count){var s=_extends({},t,{count:r.count,liked:!1,users:[]});return k[t.uniq]=r.count,f(s),g(t.uniq,i),o.resolve(s),o.promise}return m.hasOwnProperty(u)||(m[u]={},e(l.bind(null,u),50)),m[u][t.uniq]?m[u][t.uniq].listeners.push(i):m[u][t.uniq]={entity:t,params:r,listeners:[i],resolve:o.resolve,reject:o.reject},o.promise}function s(e,n){var t=_extends({},e,n);return i.call("likes.vote",t).then(function(e){return e.result?(k[t.uniq]=e.result.count,f([e.result]),e.result):(LJ.Messages.error("An error has occurred."),{})})}function l(e){var n=void 0,r=void 0,o=void 0,u=e.split("#")[0],s=e.split("#")[1];return m.hasOwnProperty(e)?(n=m[e],delete m[e],r=Object.keys(n).map(function(e){return n[e].entity}),o={entities:r,mode:"feed",type:s,likes_signature:u},void i.call("likes.get_votes",o,{silent:!0}).then(function(e){var r=e.result;return angular.isArray(r)?(f(r),void r.map(function(e){var t=n[e.uniq];k[e.uniq]=e.count,t&&g(e.journal+"-"+e.item,t.listeners),t&&t.resolve(e)})):void t.log("Unexpected response [getVotes / ljkus]")})):void t.log("Unhandled error [getVotes / ljkus]")}function a(e){return k[e.uniq]||0}function c(e,n){var t=_extends({},e,n);return i.call("likes.get_users",t).then(function(n){return f([{count:n.count,item:e.item,journal:e.journal}]),{res:n.result,count:n.count}})}function d(e,n){return angular.isDefined(e)&&!e&&(h=!1),angular.isObject(e)&&(h=_extends({},e,n)),h}function f(e){if(!angular.isArray(e))return[];var n=Object.values(j).filter(function(e){return e.expire>(new Date).getTime()}),t=n.concat(e).reduce(function(e,n){var t=n.journal+"-"+n.item;return _extends({},e,_defineProperty({},t,_extends({},e[t],n,{users:n.users&&n.users.length?n.users:e[t]&&e[t].users||[],expire:new Date((new Date).getTime()+864e5).getTime()})))},{});return o.push(v,t),t}function g(e,n){Array.isArray(n)||(n=[n]);var t=n.filter(function(e){return angular.isFunction(e)});t.length&&b.push({uniq:e,callbackFunctions:t})}function p(e){j=_extends({},e),b.forEach(function(n){e.hasOwnProperty(n.uniq)&&n.callbackFunctions.forEach(function(t){return t(e[n.uniq])})})}var v="lj-likus",m={},k={},h=!1,b=[],j={};return o.listen(v,p),{getVote:u,setVote:s,getCached:a,getUsers:c,showUsers:d}}i.$inject=["$window"],o.$inject=["$timeout","$q","$log","$window","Api","SyncService"],angular.module("LJ.Likus",["LJ.Directives","LJ.User","LJ.Bubble","LJ.Api"]).run(function(){LJ.Flags.isEnabled("likes_display")&&(angular.element("body").addClass("j-p-likus"),angular.element("[ng-app]").append("<div lj-likus-bubble></div>"))}).factory("SyncService",i).factory("LikusService",o).directive("ljLikus",e).directive("ljLikusBubble",t),n.$inject=["$scope","$element","$rootScope","$window","$log","LikusService","Bubble","ljUser"],r.$inject=["$scope","$window","LikusService","Api"]}();
/* <<< file end: js/widgets/likus.js */

//# map link was there [likus.js.map]
/* >>> file start: js/core/angular/radioGroup.js */
!function(t){return t}(),function(){"use strict";function t(){function t(){this._models={}}function o(o){return e[o]?e[o]:(e[o]=new t,e[o])}var e={};return t.prototype.models=function(){return this._models},t.prototype.reset=function(){var t,o=this._models;for(t in o)o.hasOwnProperty(t)&&o[t]&&(this._models[t]=!1);return this},t.prototype.set=function(t,o){return o?this.reset()._models[t]=!0:this._models[t]=!1,this},t.prototype.on=function(t){return this.set(t,!0)},t.prototype.off=function(t){return"undefined"==typeof t?this.reset():this.set(t,!1),this},t.prototype.toggle=function(t){this._models[t]?this.off(t):this.on(t)},o}angular.module("LJ.RadioGroup",[]),angular.module("LJ.RadioGroup").factory("radioGroup",t)}();
/* <<< file end: js/core/angular/radioGroup.js */

//# map link was there [radioGroup.js.map]
/* >>> file start: js/node_modules/angular-sanitize/angular-sanitize.js */
!function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?l(i[n]):i[n]]=!0;return r}function r(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),v.innerHTML=t;var r=5;do{if(0===r)throw h("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&g(v),t=v.innerHTML,v.innerHTML=t}while(t!==v.innerHTML);for(var i=v.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),p(i.attributes));break;case 3:n.chars(i.textContent)}var a;if(!(a=i.firstChild)&&(1==i.nodeType&&n.end(i.nodeName.toLowerCase()),a=i.nextSibling,!a))for(;null==a&&(i=i.parentNode,i!==v);)a=i.nextSibling,1==i.nodeType&&n.end(i.nodeName.toLowerCase());i=a}for(;i=v.firstChild;)v.removeChild(i)}function p(e){for(var t={},n=0,r=e.length;r>n;n++){var i=e[n];t[i.name]=i.value}return t}function f(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(k,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=l(e),!n&&D[e]&&(n=e),n||$[e]!==!0||(r("<"),r(e),o(i,function(n,i){var a=l(i),o="img"===e&&"src"===a||"background"===a;M[a]!==!0||N[a]===!0&&!t(n,o)||(r(" "),r(i),r('="'),r(f(n)),r('"'))}),r(">"))},end:function(e){e=l(e),n||$[e]!==!0||x[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(f(e))}}}function g(t){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;i>r;r++){var a=n[r],o=a.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),r--,i--)}var s=t.firstChild;s&&g(s),s=t.nextSibling,s&&g(s)}var b=!1;this.$get=["$$sanitizeUri",function(e){return b&&a($,T),function(t){var n=[];return u(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?(b=e,this):b},i=t.bind,a=t.extend,o=t.forEach,s=t.isDefined,l=t.lowercase,c=t.noop,u=r,d=m;var v,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=/([^\#-~ |!])/g,x=n("area,br,col,hr,img,wbr"),w=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C=n("rp,rt"),E=a({},C,w),z=a({},w,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),L=a({},C,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),T=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),D=n("script,style"),$=a({},x,z,L,E),N=n("background,cite,href,longdesc,src,xlink:href"),S=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),F=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=a({},N,F,S);!function(e){var t;if(!e.document||!e.document.implementation)throw h("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)v=r[0];else{var i=t.createElement("html");v=t.createElement("body"),i.appendChild(v),t.appendChild(i)}}(e)}function r(e){var t=[],n=d(t,c);return n.chars(e),t.join("")}var i,a,o,s,l,c,u,d,h=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isDefined,s=t.isFunction,l=t.isObject,c=t.isString;return function(t,u,d){function h(e){e&&y.push(r(e))}function p(e,t){var n,r=b(e);y.push("<a ");for(n in r)y.push(n+'="'+r[n]+'" ');!o(u)||"target"in r||y.push('target="',u,'" '),y.push('href="',e.replace(/"/g,"&quot;"),'">'),h(t),y.push("</a>")}if(null==t||""===t)return t;if(!c(t))throw a("notstring","Expected string but received: {0}",t);for(var f,m,g,b=s(d)?d:l(d)?function(){return d}:function(){return{}},v=t,y=[];f=v.match(n);)m=f[0],f[2]||f[4]||(m=(f[3]?"http://":"mailto:")+m),g=f.index,h(v.substr(0,g)),p(m,f[0].replace(i,"")),v=v.substring(g+f[0].length);return h(v),e(y.join(""))}}])}(window,window.angular);
/* <<< file end: js/node_modules/angular-sanitize/angular-sanitize.js */

//# map link was there [angular-sanitize.js.map]
/* >>> file start: js/widgets/discoverytimes.js */
//= require js/core/angular/radioGroup.js
//= require js/node_modules/angular-sanitize/angular-sanitize.js
//= require js/core/angular/api.js
//= require js/core/angular/users.js
//= require js/core/angular/ljUser.js
!function(){"use strict";function e(){var e=angular.element(".b-discoverytimes-wrapper[lj-discovery-times]");e.injector()||angular.bootstrap(e,["LJ.DiscoveryTimes"])}function i(){function e(e,i){i.removeAttr("lj-discovery-times")}return{scope:!0,link:e,controller:n,controllerAs:"times"}}function n(e,i,n,t,o,m){function r(){f+=1,f>=d.items.length&&(f=0),l.on(d.items[f].itemid)}function s(){0!==d.items.length&&(r(),c=i(r,a),e.$on("$destroy",i.cancel.bind(i,c)))}var c,d=this,u=LJ.Flags.isEnabled("medius_ui")?m:o,l=n("active"),a=5e3,f=-1;d.items=[],d.active=l.reset().models(),d.isRecommend=!1,d.showRecommend=!1,d.showRandom=!1,d.close=function(){},d.recommend=function(){u.setRecommend().then(function(){d.isRecommend=u.isRecommend})},u.getRecommend().then(function(){d.showRecommend=u.showRecommend,d.showRandom=!d.showRecommend,d.isRecommend=u.isRecommend}),u.getFeed().then(function(e){d.items=e.items.filter(Boolean),t.Cache.add(d.items.map(LJ.Function.get("user")))}).then(s)}function t(e){function i(){return m.limit=m.itemshow,m.is_published=!0,e.call("medius.get_public_items",m).then(n)}function n(e){return e.items=e.items.filter(function(e){return e.author}).map(function(e){return e.itemid=e.jitem_id,e.url=e.link,e.subject=e.title,e}),e}function t(){return s.showRecommend?e.call("discovery.is_recommend",r).then(function(e){"ok"===e.status&&(s.isRecommend=e.is_recommend)}):Promise.resolve()}function o(){return s.showRecommend?e.call("discovery.recommend",r).then(function(e){"ok"===e.status&&(s.isRecommend=!0)}):Promise.resolve()}var m={itemshow:10},r={entry:Boolean(LJ.get("entry")),remoteid:LJ.get("remote.id"),journalid:LJ.get("journal.id"),publicEntry:LJ.get("entry.is_public"),ditemid:LJ.get("entry.ditemid")},s={getFeed:i,isRecomend:!1,getRecommend:t,setRecommend:o,showRecommend:!1};return s}function o(e){function i(){return e.call("discovery.get_feed",o)}function n(){return r.showRecommend?e.call("discovery.is_recommend",m).then(function(e){"ok"===e.status&&(r.isRecommend=e.is_recommend)}):Promise.resolve()}function t(){return r.showRecommend?e.call("discovery.recommend",m).then(function(e){"ok"===e.status&&(r.isRecommend=!0)}):Promise.resolve()}var o={itemshow:10},m={entry:Boolean(LJ.get("entry")),remoteid:LJ.get("remote.id"),journalid:LJ.get("journal.id"),publicEntry:LJ.get("entry.is_public"),ditemid:LJ.get("entry.ditemid")},r={getFeed:i,isRecomend:!1,getRecommend:n,setRecommend:t,showRecommend:m.entry&&m.journalid&&m.remoteid&&m.publicEntry&&m.journalid!==m.remoteid};return r}t.$inject=["Api"],o.$inject=["Api"],n.$inject=["$scope","$interval","radioGroup","Users","DiscoveryTimesService","MediusTimesService"],angular.element("body").ready(e),angular.module("LJ.DiscoveryTimes",["ngSanitize","LJ.Directives","LJ.RadioGroup","LJ.Api","LJ.User","Users"]),angular.module("LJ.DiscoveryTimes").directive("ljDiscoveryTimes",i).factory("MediusTimesService",t).factory("DiscoveryTimesService",o)}();
/* <<< file end: js/widgets/discoverytimes.js */

//# map link was there [discoverytimes.js.map]
/* >>> file start: js/feed/promoControl.js */
//= require js/core/angular/api.js
Site.page.template['angular/widgets/feedPromo/promoControl.ng.tmpl'] = '<span\n    class=\"feedpromo-control\"\n    >\n    <span\n        class=\"feedpromo-control__title\"\n        lj-ml=\"feedpromo.complaint.title\"\n        >\n        </span>\n    <span\n        class=\"feedpromo-control__items\"\n        >\n        <span\n            class=\"\n                feedpromo-control__item\n                feedpromo-control__item--why\n                \"\n            lj-ml=\"feedpromo.complaint.help\"\n            ></span>\n        <span\n            ng-if=\"promoControl.profileInfo\"\n            class=\"\n                feedpromo-control__item\n                feedpromo-control__item--hide\n                \"\n            lj-ml=\"feedpromo.complaint.hide\"\n            ng-click=\"promoControl.showComplaintForm()\"\n            ></span>\n        <span\n            class=\"\n                feedpromo-control__item\n                feedpromo-control__item--buy\n                \"\n            lj-ml=\"feedpromo.complaint.buy\"\n            ></span>\n    </span>\n</span>\n';
Site.page.template['angular/widgets/feedPromo/complaintForm.ng.tmpl'] = '<div\n    class=\"\n        feedpromo-complaint\n        feedpromo-complaint--hidden\n        \"\n    ng-class=\"{\'feedpromo-complaint--hidden\': !complaintForm.shown()}\"\n    >\n    <form class=\"feedpromo-complaint__form\">\n        <span\n            class=\"feedpromo-complaint__close\"\n            ng-click=\"complaintForm.hide()\"\n            ><svg class=\"svgicon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\"><polygon points=\"30,2.728 27.272,0 15,12.273 2.727,0 0,2.728 12.272,15 0,27.273 2.727,30 15,17.728 27.272,30 30,27.273 17.727,15\"></polygon></svg></span>\n        <h3\n            class=\"feedpromo-complaint__title\"\n            lj-ml=\"feedpromo.complaint.popup.title\"\n            ></h3>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-1\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"1\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-1\"\n                    lj-ml=\"feedpromo.complaint.reason.1\"\n                    ></span>\n            </label>\n        </fieldset>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-2\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"2\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-2\"\n                    lj-ml=\"feedpromo.complaint.reason.2\"\n                    ></span>\n            </label>\n        </fieldset>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-3\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"3\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-3\"\n                    lj-ml=\"feedpromo.complaint.reason.3\"\n                    ></span>\n            </label>\n        </fieldset>\n        <button\n            class=\"\n                flatbutton\n                flatbutton--max\n                flatbutton--bold\n                flatbutton--large\n                flatbutton--neutral-blue\n                \"\n            ng-click=\"complaintForm.complain()\"\n            lj-ml=\"feedpromo.complaint.delete\"\n            ></button>\n    </form>\n</div>\n';
Site.page.template['angular/widgets/feedPromo/closedPromo.ng.tmpl'] = '<div\n    class=\"feedpromo-closed\"\n    lj-ml=\"feedpromo.complaint.hidden\"\n    ></div>\n';
//= require_ml feedpromo.complaint.title
//= require_ml feedpromo.complaint.buy
//= require_ml feedpromo.complaint.help
//= require_ml feedpromo.complaint.hide
//= require_ml feedpromo.complaint.popup.title
//= require_ml feedpromo.complaint.delete
//= require_ml feedpromo.complaint.reason.1
//= require_ml feedpromo.complaint.reason.2
//= require_ml feedpromo.complaint.reason.3
//= require_ml feedpromo.complaint.hidden
!function(o){return o}(),function(){"use strict";function o(o){function r(r,e){function t(r,t){if(this.promoId&&this.journalId){var i=this.journalId+"-"+this.promoId;n.hasOwnProperty(i)||(r&&t.preventDefault(),n[i]=!0,LJ.Api.call("friendsfeed.add_promo_stat",{journal:this.journalId,promoid:this.promoId,type:"click"}).done(function(){r&&(o.location.href=e.attr("href"))}))}}e.on("click",function(o){r.noRedirects||o.metaKey||o.ctrlKey?t.call(r):t.call(r,!0,o)}).on("mousedown",function(o){1!==o.which&&t.call(r)}).on("keydown",function(o){13===o.keyCode&&t.call(r,!0,o)})}var n={};return{link:r,scope:{promoId:"=feedPromoClickPromoId",journalId:"=feedPromoClickJournalId",noRedirects:"=feedPromoClickNoRedirects"}}}function r(o){function r(r,n,e,t){t.setParams({promoId:r.promoId,itemId:r.itemId,journalId:r.journalId}),o.addElement(r.promoId,n.closest(r.entrySelector))}return{link:r,scope:{promoId:"=feedPromoControlPromoId",itemId:"=feedPromoControlItemId",journalId:"=feedPromoControlJournalId",entrySelector:"@feedPromoControlEntrySelector"},templateUrl:"promoControl.ng.tmpl",controller:n,controllerAs:"promoControl"}}function n(o,r){var n=this;n.profileInfo=Site.remote,n.showComplaintForm=function(){return o.showForm(n.params)},n.setParams=function(o){n.params=o,n.params.journalId&&n.params.promoId&&r.call("friendsfeed.add_promo_stat",{journal:n.params.journalId,promoid:n.params.promoId,type:"view"},{silent:!0})}}function e(){return{templateUrl:"complaintForm.ng.tmpl",controller:t,controllerAs:"complaintForm"}}function t(o){var r=this;r.reason=1,r.shown=o.formShown,r.complain=function(){return o.complain(r.reason)},r.hide=o.hideForm}function i(o,r,n){function e(o,r){f[o]=r}function t(o){c=o.promoId,a=o.itemId,d=o.journalId,p=!0}function i(){p=!1}function l(o){i(),m(),Promise.all([n.call("friendsfeed.complain_promo",{reason:o,promoid:c}),n.call("friendsfeed.hide_promo",{journal:d,itemid:a,promoid:c})])}function m(){var o=f[c];o.replaceWith(u)}var c=void 0,a=void 0,d=void 0,p=!1,u=o(r.get("closedPromo.ng.tmpl"))({}),f={};return{formShown:function(){return p},showForm:t,hideForm:i,complain:l,addElement:e}}i.$inject=["$compile","$templateCache","Api"],n.$inject=["complaintService","Api"],t.$inject=["complaintService"],r.$inject=["complaintService"],o.$inject=["$window"],angular.module("Feedpromo.Control",["LJ.Api","LJ.Templates"]),angular.module("Feedpromo.Control").run(function(){angular.element("[ng-app]").append("<div promo-complaint-form></div>")}).factory("complaintService",i).controller("promoControlCtrl",n).controller("complaintFormCtrl",t).directive("feedPromoControl",r).directive("feedPromoClick",o).directive("promoComplaintForm",e),function(o){return o}()}();
/* <<< file end: js/feed/promoControl.js */

//# map link was there [promoControl.js.map]
/* >>> file start: js/ljShareButton.js */
Site.page.template['angular/ljShareButton.ng.tmpl'] = '<span\n    target=\"_blank\"\n    class=\"b-sharethis-services-link\"\n    ng-click=\"LJShareButtonCtrl.onClick()\"\n    ng-class=\"{\n      \'b-sharethis-services-link--reposted\': LJShareButtonCtrl.reposted,\n      \'b-sharethis-services-link--disabled\': LJShareButtonCtrl.disabled(),\n      \'b-sharethis-services-link--loading\': LJShareButtonCtrl.loading\n    }\"\n>\n    <span\n      class=\"b-sharethis-services-link__icon-wrap\"\n    >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"svgicon flaticon flaticon--livejournal b-sharethis-services-link__icon\">\n            <use ng-href=\"#flaticon--livejournal\" xlink:href=\"\"></use>\n        </svg>\n    </span>\n    <span\n      class=\"b-sharethis-services-link__title\"\n    >{{title}}</span>\n</span>';
//= require js/core/angular/api.js
function LJShareButtonCtrl(t,e){var r=this;r.reposted=!1,r.loading=!0,e.call("repost.get_status",{url:t.entryUrl},function(t){r.reposted=!!t.reposted,r.loading=!1});var l=(t.entryUrl.match(/https?:\/\/([^\.]+)/)||[])[1],n=5===t.entryUrl.split("/").length;"users"===l&&n&&(l=t.entryUrl.split("/")[3]),l=l.replace("-","_"),r.disabled=function(){return LJ.get("preview")?!0:LJ.get("remoteUser")?LJ.get("remote_is_identity")?!0:LJ.get("remoteUser")===l:!0},r.onClick=function(){if(!r.disabled()){var l={url:t.entryUrl};r.reposted?e.call("repost.delete",l,function(){r.reposted=!1,LJ.Event.trigger("afterRepostDelete",{postURL:t.entryUrl})}):(l.timezone=LJ.Util.Date.timezone(),e.call("repost.create",l,function(){r.reposted=!0}))}}}function ljShareButtonDirective(){return{controller:LJShareButtonCtrl,controllerAs:"LJShareButtonCtrl",restrict:"A",scope:{entryUrl:"@ljShareButton",title:"@ljShareButtonTitle"},templateUrl:"ljShareButton.ng.tmpl",link:function(t,e,r){}}}LJShareButtonCtrl.$inject=["$scope","Api"],angular.module("LJShareButtonModule",["LJ.Api","LJ.Directives","LJ.Templates"]).directive("ljShareButton",ljShareButtonDirective);
/* <<< file end: js/ljShareButton.js */

//# map link was there [ljShareButton.js.map]
/* >>> file start: js/s2.js */
//= require js/jquery/jquery.calendarEvents.js
//= require js/discovery/directives.js
//= require js/core/angular/ljMemories.js
//= require js/core/angular/ljEmbed.js
//= require js/core/angular/share.js
//= require js/core/angular/ljRemoveRepost.js
//= require js/core/angular/ljTour.js
//= require js/widgets/likus.js
//= require js/widgets/discoverytimes.js
//= require js/feed/promoControl.js
//= require js/core/angular/api.js
//= require js/facebookMigration/migration.js
//= require js/ljShareButton.js
!function(e){return e}(),function(e){"use strict";var n=["Discovery.Tags","LJ.Memories","LJ.Share","LJ.RemoveRepost","LJ.Tour","LJ.Likus","LJ.Embed","LJ.DiscoveryTimes","LJ.Sale","Feedpromo.Control","LJ.Api","Migration.Facebook","LJShareButtonModule"],t=LJ.get("remote");LJ.Flags.isEnabled("loginform_v8")&&!t&&n.push("Login"),angular.module("S2Layout",n).value("$anchorScroll",null).run(function(){e("a:not([target])").attr("target","_self")}).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).controller("S2LayoutCtrl",[function(){var e=angular.element("body");this.asideToggle=function(){e.toggleClass("js--sidebar-opened")},e.on("click",function(n){angular.element(n.target).parents(".js-sidebar").length||e.toggleClass("js--sidebar-opened",!1)}),this.isSidebarOpened=!1,this.toggleSidebar=function(){this.isSidebarOpened=!this.isSidebarOpened}}]).directive("sidebarControlsPosition",["$timeout",function(n){return{link:function(t,a){function o(){m&&(i(),r(),l(),LJ.Support.isMobile()&&d())}function i(){0===h&&(h=parseInt(a.css("top"),10),J=f.height(),p=h-J),y=u.offset().top}function r(){if(m!==!1){var n={},a=e(window).scrollTop(),o="vertical",i=y-a,r=e(window).width(),s=e(window).height(),l=i+p;r>1.5*s&&400>s&&(o="horizontal"),0>i?l=30:"horizontal"===o&&(l=i+30),n.top=l,t.controlsTop=n}}function s(){i(),r(),t.$apply()}function l(){b.children().length&&c(b)}function c(){--w<0||(0===b.height()?n(c,C):(i(),r()))}function d(){if(!(--L<0)){var e=angular.element(".b-smartappbanner"),t=e.find(".b-smartappbanner-close");0===e.length?n(d,C):(i(),r(),t.on("click",function(){n(s,C)}))}}var u=angular.element(".js--journal-wrapper"),f=angular.element("#lj_controlstrip_new, .s-header"),h=0,p=0,m=a.is(":visible"),g=m,b=angular.element(".pagewide-wrapper"),v=b.find(".common-banner-close"),w=10,L=10,y=0,J=0,C=1500,S=LJ.Function.throttle(r,30);o(),e(window).on("scroll",S),t.$on("$destroy",function(){e(window).off("scroll",S)}),e(window).on("resize",function(){m=a.is(":visible"),g!==m&&(g=m,m&&(o(),t.$apply()))}),v.on("click",s)}}}]).directive("commentsResizeImages",[function(){return{link:function(n,t){function a(){var n=d.css("top"),t=2*parseFloat(n);v=e(window).width()-t,w=e(window).height()-t}function o(){var n=e(this),t=n[0],a=n.width(),o=t.naturalWidth,r=(t.naturalHeight,n.width()*b),s=n.height()*b;if(o>a&&o>=r&&v>=r&&w>=s){if(n.hasClass(g))return;n.addClass(g);var l=e("<span>").addClass(m);n.wrap(l),n.on("click",function(){i(this)})}else n.hasClass(g)&&(n.off(),n.unwrap(),n.removeClass(g));return n}function i(n){l.attr("src",e(n).attr("src")),e("body").addClass(p);var t=[0,0,l.width(),l.height()].join(" ");u[0].setAttribute("viewBox",t);var a=f[0].width.baseVal.value,o=l.width()-a-h,i=[o,h].join(",");f.attr("transform","translate("+i+")")}var r=t.find(".j-c-resize-images"),s=r.find("img"),l=e(".fullsize-image"),c=e(".fullsize-image-fader"),d=e(".fullsize-image-wrapper"),u=e(".fullsize-image-svg-glass"),f=e(".fullsize-image-close"),h=5,p="js--wrapper-shown",m="scaled-image-wrapper",g="img--scaled",b=1.5,v=e(window).width(),w=e(window).height();s.length>0&&(a(),s.map(o),u.on("click",function(){e("body").removeClass(p)}),c.on("click",function(){e("body").removeClass(p)}),e(window).on("resize",function(){a(),s.map(o)}))}}}]).directive("entryWidth",[function(){return{link:function(n,t){function a(){var n=o[0].clientWidth;r>=n?o.map(function(){e(this)[0].classList.add(i)}):o.map(function(){e(this)[0].classList.remove(i)})}var o=t.find(".post2017"),i="post2017--narrow",r=650;o.length&&(a(),e(window).resize(LJ.Function.debounce(a,50)))}}}]),LJ.Event.on("page_load",function(){var n=e(".sidebar-cal");e.fn.hasOwnProperty("inlineCalendar")&&(n.inlineCalendar({selectors:{month:".sbar-cal-nav-month",year:".sbar-cal-nav-year",prevMonth:".sbar-cal-nav-month .sbar-cal-nav-prev",nextMonth:".sbar-cal-nav-month .sbar-cal-nav-next",prevYear:".sbar-cal-nav-year .sbar-cal-nav-prev",nextYear:".sbar-cal-nav-year .sbar-cal-nav-next",monthLabel:".sbar-cal-nav-month .sbar-cal-month",yearLabel:".sbar-cal-nav-year .sbar-cal-year"},classNames:{current:"today",nextDisabled:"disabled",prevDisabled:"disabled"},dayRef:LJ.get("currentJournalBase")+"/%Y/%M/%D",monthRef:LJ.get("currentJournalBase")+"/%Y/%M",yearRef:LJ.get("currentJournalBase")+"/%Y",endMonth:new Date,startAtSunday:!0}).on("daySelected",function(e){e.preventDefault()}),e.fn.hasOwnProperty("calendarEvents")&&n.calendarEvents({calendarType:"inlineCalendar"}))}),LJ.Event.on("page_load",function(){var n="hover",t=e(".sidebar dl"),a=e(".sidebar dt"),o=!1;0!==e(".sidebar-friendstimes").length&&(LJ.Support.touch?(a.on("touchstart",function(){e(this).parent().toggleClass(n).siblings().removeClass(n)}),t.on("touchstart",function(){o=!0}),e(document).on("touchstart",function(){o?o=!1:t.removeClass(n)})):t.on({mouseenter:function(){e(this).addClass("hover")},mouseleave:function(){e(this).removeClass("hover")}}))}),LJ.Event.on("page_load",function(){LJ.get("LJ_cmtinfo")&&(window.LJ_cmtinfo=LJ.get("LJ_cmtinfo")),e.fn.subjecticons&&e(".b-subjecticons").subjecticons(),e.fn.commentator&&e.fn.authtype&&e.fn.quotescreator&&e("#postform-wrapper").commentator({publicKey:LJ.get("captcha_public"),captchaContainerId:"captcha-container"}).authtype({forceStartupCaptcha:!!Number(LJ.get("need_captcha")),selectors:{authTypeRadios:".b-postform-login-{authType} .b-postform-login-radio"}}).quotescreator(),e.fn.placeholder&&e("#cookieusername").placeholder(),e(document.body).on("click","[data-s2-helper-scrollTop]",function(n){n.preventDefault(),e("body,html").animate({scrollTop:0},500)}),LJ.define("LJ.S2Comments"),LJ.S2Comments=!0}),e(function(){e("body").on("click",".b-lenta-msg-close",function(n){n.preventDefault(),LJ.Api.call("friendsfeed.close_friendsfeed_line",{},function(){e(".b-lenta-msg").remove(),e("body").addClass("b-lenta-msg-hidden")})})})}(jQuery);
/* <<< file end: js/s2.js */

//# map link was there [s2.js.map]
/* >>> file start: js/esn.js */
//= require js/lj_ippu.js
//= require js/deprecated/dom.js
var ESN={};!function(t,e){e.initCheckAllBtns=function(){var e=t("ntypeids"),n=t("catids");e&&n&&(ntidList=e.value,catidList=n.value,ntidList&&catidList&&(e=ntidList.split(","),n=catidList.split(","),n.forEach(function(n){e.forEach(function(e){var r="SubscribeCheckbox-"+n+"-"+e,i=new CheckallButton;i.init({"class":r,button:t("CheckAll-"+n+"-"+e),parent:t("CategoryRow-"+n)})})})))},e.initTrackBtns=function(t){if(LJ.get("remote")){t=t||document;var n=DOM.getElementsByTagAndClassName(t,"img","TrackButton");n.forEach(function(t){t&&t.getAttribute&&(t.getAttribute("lj_subid")||t.getAttribute("lj_journalid"))&&(t.getAttribute("lj_dtalkid")&&!LJ.get("remote_can_track_threads")||DOM.addEventListener(t,"click",e.trackBtnClickHandler.bindEventListener(t)))})}},e.trackBtnClickHandler=function(t){var n=t.target;if(!n||"img"!=n.tagName.toLowerCase())return!0;Event.stop(t);var r={};["arg1","arg2","etypeid","newentry_etypeid","newentry_token","newentry_subid","journalid","subid","auth_token"].forEach(function(t){r[t]=n.getAttribute("lj_"+t)});var i=document.createElement("div"),a=_textDiv("Email me when");DOM.addClassName(a,"track_title"),i.appendChild(a);var o=function(t,e){var n=document.createElement("div"),r=document.createElement("input");r.type="checkbox",r.id="newentrytrack"+Unique.id();var a=document.createElement("label");return a.setAttribute("for",r.id),a.innerHTML=t,n.appendChild(r),n.appendChild(a),i.appendChild(n),r.checked=!!e,r};e.trackPopup&&(e.trackPopup.hide(),e.trackPopup=null);var u=document.createElement("input");u.type="button",u.value="Save Changes",DOM.addClassName(u,"track_savechanges");var s,c,d=Number(r.newentry_subid)?1:0,l=Number(r.subid)?1:0;n.getAttribute("lj_dtalkid")?c=o("someone replies in this comment thread",1):(s=o(n.getAttribute("lj_username")+" posts a new entry",d),c=o("someone comments on this post",l)),DOM.addEventListener(u,"click",function(){e.toggleSubscriptions(r,t,n,{newEntry:s?s.checked:!1,newComments:c.checked}),e.trackPopup&&e.trackPopup.hide()});var b=document.createElement("div");DOM.addClassName(b,"track_btncontainer"),i.appendChild(b),b.appendChild(u);var p=document.createElement("a");return p.href=n.parentNode.href,b.appendChild(p),p.innerHTML="More Options",DOM.addClassName(p,"track_moreopts"),e.trackPopup=new LJ_IPPU.showNoteElement(i,n,0),DOM.addEventListener(p,"click",function(t){return Event.stop(t),document.location.href=n.parentNode.href,e.trackPopup&&e.trackPopup.hide(),!1}),!1},e.toggleSubscriptions=function(t,n,r,i){if(t.subid=Number(t.subid),(t.subid&&!i.newComments||!t.subid&&i.newComments)&&e.toggleSubscription(t,n,r,"newComments"),t.newentry_subid=Number(t.newentry_subid),t.newentry_subid&&!i.newEntry||!t.newentry_subid&&i.newEntry){var a=new Object(t);a.subid=Number(r.getAttribute("lj_newentry_subid")),e.toggleSubscription(a,n,r,"newEntry")}},e.toggleSubscription=function(t,n,r,i){var a="",o={auth_token:"newEntry"==i?t.newentry_token:t.auth_token};if(Number(t.subid))a="delsub",o.subid=t.subid;else{a="addsub";var u;"newEntry"==i?(o.etypeid=t.newentry_etypeid,u=["journalid"]):u=["journalid","arg1","arg2","etypeid"],u.forEach(function(e){Number(t[e])&&(o[e]=parseInt(t[e]))})}o.action=a;var s={method:"POST",url:LiveJournal.getAjaxUrl("esn_subs"),data:HTTPReq.formEncoded(o)},c=function(t){if(!t)return LJ_IPPU.showNote("Error changing subscription",r);if(t.error)return LJ_IPPU.showNote(t.error,r);if(t.success){if(t.msg&&LJ_IPPU.showNote(t.msg,r),t.subscribed){t.subid&&r.setAttribute("lj_subid",t.subid),t.newentry_subid&&r.setAttribute("lj_newentry_subid",t.newentry_subid),r.setAttribute("title","Untrack This");var n=r.getAttribute("lj_dtalkid");n?e.updateThreadIcons(n,"on"):r.src=LJ.get("imgprefix")+"/btn_tracking.gif?v=17312"}else{"LJ::Event::JournalNewComment"==t.event_class?r.setAttribute("lj_subid",0):"LJ::Event::JournalNewEntry"==t.event_class&&r.setAttribute("lj_newentry_subid",0),r.setAttribute("title","Track This");var n=r.getAttribute("lj_dtalkid");if(n){for(var i,a="off",o=n;(i=e.getThreadParentBtn(o))&&(o=i.getAttribute("lj_dtalkid"));)if(Number(i.getAttribute("lj_subid"))){a="parent";break}e.updateThreadIcons(n,a)}else r.src=LJ.get("imgprefix")+"/btn_track.gif?v=17312"}t.auth_token&&r.setAttribute("lj_auth_token",t.auth_token),t.newentry_token&&r.setAttribute("lj_newentry_token",t.newentry_token)}};s.onData=c,s.onError=function(t){LJ_IPPU.showNote("Error: "+t)},HTTPReq.getJSON(s)},e.getThreadParentBtn=function(e){var n=LJ_cmtinfo[e+""];if(!n)return null;var r=n.parent;return r?t("lj_track_btn_"+r):null},e.updateThreadIcons=function(n,r){var i=t("lj_track_btn_"+n);if(i){var a=LJ_cmtinfo[n+""];if(a&&(!Number(i.getAttribute("lj_subid"))||"on"==r)){a.rc&&a.rc.length&&a.rc.forEach(function(t){window.setTimeout(function(){var n;switch(r){case"on":n="parent";break;case"off":n="off";break;case"parent":n="parent";break;default:alert("Unknown tracking state "+r)}e.updateThreadIcons(t,n)},300)});var o;switch(r){case"on":o="/btn_tracking.gif?v=17312";break;case"off":o="/btn_track.gif?v=17312";break;case"parent":o="/btn_tracking_thread.gif?v=17312";break;default:alert("Unknown tracking state "+r)}i.src=LJ.get("imgprefix")+o}}},jQuery(function(t){e.initCheckAllBtns(),e.initTrackBtns(),t("#settings_form").on("click","a.delete-group",function(e){var n=this.search.match(/delete_group=([-\d]+)/),r=n?n[1]:null;e.preventDefault(),r&&(t.post(location.href,{delete_group:r}),t(this).closest("tr").remove())})})}(DOM.getElement,ESN);
/* <<< file end: js/esn.js */

//# map link was there [esn.js.map]
/* >>> file start: js/jquery/jquery.lj.confirmbubble.js */
LJ.UI.registerTemplate('templates-Widgets-popupcontent', "<div class=\" b-popup-content {{if $data.options_centered}} b-popup-options-centered {{/if}} \" > {{if $data.show_header}} <div class=\"b-popup-content-header\"> <span> {{html $data.header_text}} </span> </div> {{/if}} <div class=\"b-popup-content-confirm\"> {{html $data.confirm_text}} </div> {{if $data.show_check}} <div class=\"b-popup-content-inner\"> <input id=\"b-popup-check\" type=\"checkbox\" class=\"b-popup-check\" > <label for=\"b-popup-check\" class=\"b-popup-check-text\" >{{html $data.check_text}}</label> </div> {{/if}} <div class=\"b-popup-submit-options\"> <button type=\"button\" class=\"b-popup-btn b-flatbutton b-flatbutton-simple\" >{{html $data.yes_text}}</button> <button type=\"button\" class=\"b-popup-cancel b-flatbutton b-flatbutton-simple b-flatbutton-neutral\" >{{html $data.no_text}}</button> </div> </div> ", 'JQuery.stat');
!function(t,e){t.widget("lj.confirmbubble",t.lj.basicWidget,{options:{selectors:{ok:".b-popup-btn",cancel:".b-popup-cancel",check:".b-popup-check"},templates:{content:"templates-Widgets-popupcontent"},confirm:jQuery.noop,confirmText:"",yesText:"",noText:"",checkText:"",headerText:"",showCheck:!1,showHeader:!1},_create:function(){t.lj.basicWidget.prototype._create.apply(this),this._content=this._tmpl("content",{confirm_text:this.options.confirmText,yes_text:this.options.confirmYes||LJ.ml("confirm.bubble.yes"),no_text:this.options.confirmNo||LJ.ml("confirm.bubble.no"),show_check:this.options.showCheck,show_header:this.options.showHeader,header_text:this.options.headerText,check_text:this.options.checkText}),this._bindControls(),this._content.bubble({showOn:"click",target:this.element}),this.options.showCheck&&this._content.find(this._s("ok")).attr("disabled",!0),Function.defer(this._content.bubble.bind(this._content,"show"))},_bindControls:function(){var e=this,o=this._content,i=o.find(this._s("ok")),n=this.options;t.lj.basicWidget.prototype._bindControls.apply(this),o.on("click",this._s("ok"),function(t){o.bubble("hide"),n.confirm()}).on("change",this._s("check"),function(e){t(this).attr("checked")?i.removeAttr("disabled"):i.attr("disabled",!0)}).on("click",this._s("cancel"),function(t){o.bubble("hide")}).on("bubblehide",function(t){e._trigger("hide")}).on("bubbleshow",function(t){e._trigger("show")})},show:function(){this._content.bubble("show")},hide:function(){this._content.bubble("hide")}})}(jQuery,this);
/* <<< file end: js/jquery/jquery.lj.confirmbubble.js */

//# map link was there [jquery.lj.confirmbubble.js.map]
/* >>> file start: js/jquery/jquery.lj.ljcut.js */
!function(t){return t}(),function(t){"use strict";var e=[];t.widget("lj.ljcut",t.lj.basicWidget,{options:{journalid:null,ditemid:null,cutid:null,placeholders:0,sticky:!1,selectors:{expand:".ljcut-link-expand",collapse:".ljcut-link-collapse",collapseLink:".ljcut-pseudolink-collapse",stickyLink:".b-sticky-cut-link"},classNames:{preloader:"ljcut-link-expanding",expanded:"ljcut-expanded","sticky-cut-visible":"b-sticky-cut-visible",cut:".b-sticky-cut"}},_create:function(){t.lj.basicWidget.prototype._create.apply(this),this._window=t(window),this.cut=t(this._cl("cut")),this._stickyCollapseHandler=this._collapse.bind(this),this.content=null,this._isMac=/Mac/.test(navigator.userAgent),this._isOpera=/Opera/.test(navigator.userAgent),this._collapseNode=t('<span class="ljcut-pseudolink"><span class="ljcut-decor"><span class="ljcut-pseudolink-collapse">{close}</span></span></span>'.supplant({close:this._ml("collapse")})),this._bindControls(),this._id=e.length,e[this._id]=!1},_bindControls:function(){var e=!1,i=[this._s("expand"),this._s("collapse")].join(", ");t.lj.basicWidget.prototype._bindControls.apply(this),this.element.on("click",this._s("expand"),this._expand.bind(this)),this.element.on("click",this._s("collapse"),this._collapse.bind(this)),this.element.on("touchstart",i,function(){e=!0}),this.element.on("touchmove",i,function(){e=!1}),this.element.on("touchend",i,function(i){e&&(t(i.target).trigger("click"),i.preventDefault())}),t(document).on("keydown",this._shortcuts.bind(this)),this._window.on("scroll",this._scrolling.bind(this))},_shortcuts:function(t){var e=this._isMac&&this._isOpera?t.metaKey:t.ctrlKey,i=t.altKey;if(e&&i){switch(t.which){case 61:case 187:this.expand();break;case 173:case 31:case 109:case 189:this.collapse()}t.preventDefault()}},_togglePreloader:function(t){this.element.toggleClass(this._cl("preloader"),t)},_toggleContent:function(e,i){var s,n=this;!this.locked()&&this.content&&(this._lock(),"function"!=typeof i&&(i=t.noop),this.element.toggleClass(n._cl("expanded"),e),e?this._showContent(i):(s=this.element.offset().top-30,this.element.is(":screenable")?this._hideContent(i):t("body,html").animate({scrollTop:s},300,function(){setTimeout(n._hideContent.bind(n,i),50)})))},_showContent:function(t){var e=this;this.content.show(50,function(){e._trigger("show",null,e),t(),e._unlock()})},_hideContent:function(t){var e=this;this.content.slideUp(50,function(){e._trigger("hide",null,e),t(),e._unlock()})},_requestContent:function(e){var i=this;this._lock(),this._togglePreloader(!0),LJ.Api.call("event.get_lj_cut",e,function(e){i.content=t("<div />",{html:e.text}).hide(),i.content.find("a:not([target])").attr("target","_self"),i.element.after(i.content),setTimeout(function(){LJ.Event.trigger("ljcut:appendContent",{$content:i.content})},0),i._unlock(),i._togglePreloader(!1),i._toggleContent(!0,i._addHandlers.bind(i)),e.counter_image_url&&LJ.Stat.addCounter(e.counter_image_url)})},_addHandlers:function(){this.content.ljLikes(),LJ.Event.trigger("social:widgets:parse"),LJ.Event.trigger("social:newinsta:parse")},expand:function(){this.locked()||(this.content?this._toggleContent(!0):this._requestContent({journalid:this.options.journalid,ditemid:this.options.ditemid,cutid:this.options.cutid,placeholders:this.options.placeholders}))},collapse:function(){this.locked()||(this._toggleContent(!1),this._toggleStickyClass(!1))},_expand:function(t){return t.metaKey||t.ctrlKey?!0:(t.preventDefault(),void this.expand())},_collapse:function(t){return t.metaKey||t.ctrlKey?!0:(t.preventDefault(),e[this._id]=!1,void this.collapse())},_scrolling:function(){this._updateStickyCutState()},_updateStickyCutState:function(){var i,s,n,o,l,c,a;this._isExpanded()&&this.options.sticky&&this.content&&(i=this._window.height(),s=t(document).scrollTop(),n=this.content.height(),o=this.content.offset().top,l=o+n,a=this.element.find(this._s("collapse")),c=s>o&&l-i>s,e[this._id]=c,this._toggleStickyClass(c))},_toggleStickyClass:function(i){this.cut.toggleClass(this._cl("sticky-cut-visible"),e.indexOf(!0)>-1),i?t(document).on("click",this._s("stickyLink"),this._stickyCollapseHandler):t(document).off("click",this._s("stickyLink"),this._stickyCollapseHandler)},_addBottomCollapser:function(){return!this._bottomCloser&&this.options.sticky&&(this._bottomCloser=this._collapseNode.appendTo(this.content),this._bottomCloser.find(this._s("collapseLink")).on("click",this._bottomCloserClickHandler.bind(this))),this._bottomCloser},_bottomCloserClickHandler:function(){event.preventDefault(),this.collapse()},_isExpanded:function(){return this.element.hasClass(this._cl("expanded"))},_isCollapsed:function(){return!this._isExpanded()}})}(jQuery);
/* <<< file end: js/jquery/jquery.lj.ljcut.js */

//# map link was there [jquery.lj.ljcut.js.map]
/* >>> file start: js/fb-select-image.js */
jQuery(function(){function e(e,t){jQuery("<div>"+t+"</div>").find("img").each(function(){e.push(this.src)})}function t(e){g.close()}var i=$("repost_facebook"),s=$("repost_facebook_thumbnail"),a=$("select-fb-thumbnail"),n=$("select-fb-thumbnail-comments"),r=$("userpic_preview_image"),o=$("fbimg_select_window"),p=$("fbimg_select_window_nav"),l=a||n,c="nothumb",h="userpic";if(null!=l){var u={};u=a?{getText:function(){return window.switchedRteOn?CKEDITOR.instances.draft.getData():jQuery("#draft").val()},getUserPic:function(){return r?r.src:""}}:{getText:function(){var e=$("commenttext")||$("body");return e.value},getUserPic:function(){var e=jQuery("#userpics > [name=prop_picture_keyword]");if(0==e.length&&(e=jQuery("#prop_picture_keyword")),0==e.length)return"";var t=e.val();return t in userpicmap?userpicmap[t]:defaultpicurl||""}};var g={init:function(){this.opened=!1,this.page=1,this.totalImages=1,this.pager={prev:jQuery(p).children(".i-repost-nav-prev"),next:jQuery(p).children(".i-repost-nav-next"),counter:jQuery(p).children(".i-repost-nav-counter")},this.listWrapper=jQuery(o).children(".b-repost-pics-wrapper"),this.list=this.listWrapper.children(".b-repost-pics-items"),this.pagerSize=4,this.pagesNum=1,this.cellWidth=0,this.pager.prev.click(function(){g.changePage(-1)}),this.pager.next.click(function(){g.changePage(1)}),this.firstLi=this.list.children("span:first").click(function(){g.setPicture(c)})},setPicture:function(e){s.value=e,this.close()},updatePager:function(){p.style.display=this.totalImages<this.pagerSize?"none":"block",this.pager.prev[1==this.page?"addClass":"removeClass"]("i-repost-nav-prev-dis"),this.pager.next[this.page==this.pagesNum?"addClass":"removeClass"]("i-repost-nav-next-dis"),this.pager.counter.html(this.page+"/"+this.pagesNum)},makeListItem:function(e,t,i){var s=i?"b-repost-pics-active":"";return jQuery("<span>").addClass(s).append(jQuery("<img>").attr("src",e)).click(function(){g.setPicture(t)})},open:function(e){this.list.children("span:gt(0)").remove(),this.totalImages=e.length,this.page=1,0!=e.length&&-1!=jQuery.inArray(s.value,e)||s.value==h||s.value==c||(s.value="");var t=u.getUserPic();if(t.length>0){var i=t;this.makeListItem(i,h,h==s.value).appendTo(this.list),this.totalImages++}this.pagesNum=Math.ceil((this.totalImages+1)/this.pagerSize),this.totalImages>1&&""==s.value&&(s.value=e[0]);for(var a=1,n=0;n<e.length;++n)e[n]==s.value&&(a=Math.floor((n+1+(t.length>0?1:0))/this.pagerSize)+1),this.makeListItem(e[n],e[n],e[n]==s.value).appendTo(this.list);this.firstLi[this.totalImages<=1&&""==s.value||s.value==c?"addClass":"removeClass"]("b-repost-pics-active"),o.style.display="block",this.opened=!0,this.firstLi.each(function(){g.cellWidth=this.offsetWidth+this.offsetLeft});var r=this.pagerSize>this.totalImages?this.cellWidth*(this.totalImages+1)+"px":"";this.listWrapper.css("width",r),this.changePage(a-1)},changePage:function(e){this.page+=e,this.page=this.page<1?1:this.page>this.pagesNum?this.pagesNum:this.page;var t=-this.cellWidth*(this.page-1)*this.pagerSize;this.list.css("left",t+"px"),this.updatePager()},close:function(){o.style.display="none",this.opened=!1}};g.init(),o.onmousedown=function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},l.onmousedown=function(e){e=e||window.event,g.opened&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.onclick=function(s){s=s||window.event;var a=[];null!==i.getAttribute("disabled")&&i.getAttribute("disabled")!==!1||(g.opened?t():(a.length=0,e(a,u.getText()),g.open(a),setTimeout(function(){DOM.addEventListener(document,"mousedown",t,!1)},0))),s.preventDefault?s.preventDefault():s.returnValue=!1}}});
/* <<< file end: js/fb-select-image.js */

//# map link was there [fb-select-image.js.map]
/* >>> file start: js/quickreply.js */
QuickReply={lastDiv:"qrdiv",reply:function(e,r,a){var t="ljqrt"+e,l="ljcmt"+e,u=$("parenttalkid"),i=$("replyto"),d=$("dtid"),o=$("qrdiv"),n=$(t),c=$("qrformdiv"),v=$("qrform"),s=$("subject");if(!(u&&i&&d&&o&&n&&v&&c&&s))return!0;u.value=r,d.value=e,i.value=r,"qrdiv"==QuickReply.lastDiv?o.style.display="block":QuickReply.lastDiv!=e;var p=$("comments"),l=$(l);return p&&-1!==p.className.indexOf("entry-comments-s1")&&l?l.appendChild(o):(n.parentNode.insertBefore(o,n),QuickReply._scrollForm()),QuickReply.lastDiv=t,s.value&&s.value!=s.defaultValue&&"Re: "!=s.value.substr(0,4)||(s.value=a,s.defaultValue=a),c.className=n.className||"",!1},more:function(){var e=$("qrform_hidden"),r=$("basepath"),a=$("dtid"),t=$("parenttalkid");return e&&r&&a&&t?(a.value>0&&t.value>0?e.action=r.value+"replyto="+a.value+"#add_comment":e.action=r.value+"mode=reply#add_comment",e.submit(),!1):!1},submit:function e(){var r=$("submitmoreopts"),e=$("submitpost");if(!r||!e)return!1;e.disabled=!0,r.disabled=!0;var a=$("dtid");Number(a.value)||(a.value=0);var t=$("qrform_hidden");return t.action=Site.siteroot+"/talkpost_do.bml",t.submit(),!1},check:function(){var e=$("qrform_hidden");if(!e)return!0;var r=e.body.value.length;return r>4300?(alert("Sorry, but your comment of "+r+" characters exceeds the maximum character length of 4300. Please try shortening it and then post again."),!1):!0},save:function(){var e=$("qrform_hidden");if(!e)return!1;var r=$("do_spellcheck"),a=$("prop_picture_keyword");return $("saved_body").value=e.body.value,$("saved_subject").value=$("subject").value,$("saved_dtid").value=$("dtid").value,$("saved_ptid").value=$("parenttalkid").value,r&&($("saved_spell").value=r.checked),a&&($("saved_upic").value=a.selectedIndex),!1},restore:function(){setTimeout(function(){var e=$("saved_body"),r=$("saved_dtid"),a=$("saved_subject"),t="",l=$("qrform_hidden");if(e&&""!=e.value&&l&&r){a&&(t=a.value),QuickReply.reply(r.value,parseInt($("saved_ptid").value,10),t),l.body.value=e.value;var u=$("prop_picture_keyword");u&&(u.selectedIndex=$("saved_upic").value)}},100)},cloneForm:function(e){var r=jQuery("#qrform"),a=r.find("input"),t=r.find("textarea, select"),l=jQuery("#qrform_hidden");(l.length?l.empty():jQuery('<form id="qrform_hidden" name="qrform" method="POST">')).hide().append(a.clone()).append(t.clone().each(function(e,r){jQuery(r).val(t.eq(e).val())})).appendTo("body"),QuickReply[e]()&&QuickReply.submit()},userpicSelect:function(){var e=new UserpicSelect;e.init(),e.setPicSelectedCallback(function(e,r){var a=$("prop_picture_keyword");if(a){var t=a.options;r.forEach(function(e){for(var r=0;r<t.length;r++){var l=t[r];if(l.value==e)return void(a.selectedIndex=r)}})}}),e.show()},_scrollForm:function(){var e=jQuery("html, body"),r=jQuery(window).scrollTop(),a=r+jQuery(window).height(),t=jQuery("#qrform"),l=t.offset().top,u=l+t.height();(l>r||a>l||u>r||a>u)&&(e.animate({scrollTop:l},"300"),t.find("textarea").focus())}},jQuery(QuickReply.restore),DOM.addEventListener(window,"unload",QuickReply.save);
/* <<< file end: js/quickreply.js */

//# map link was there [quickreply.js.map]
/* >>> file start: js/md5.js */
function array(t){for(i=0;i<t;i++)this[i]=0;this.length=t}function integer(t){return t%4294967296}function shr(t,e){return t=integer(t),e=integer(e),t-2147483648>=0?(t%=2147483648,t>>=e,t+=1073741824>>e-1):t>>=e,t}function shl1(t){return t%=2147483648,t&!0?(t-=1073741824,t*=2,t+=2147483648):t*=2,t}function shl(t,e){t=integer(t),e=integer(e);for(var n=0;e>n;n++)t=shl1(t);return t}function and(t,e){t=integer(t),e=integer(e);var n=t-2147483648,r=e-2147483648;return n>=0?r>=0?(n&r)+2147483648:n&e:r>=0?t&r:t&e}function or(t,e){t=integer(t),e=integer(e);var n=t-2147483648,r=e-2147483648;return n>=0?r>=0?(n|r)+2147483648:(n|e)+2147483648:r>=0?(t|r)+2147483648:t|e}function xor(t,e){t=integer(t),e=integer(e);var n=t-2147483648,r=e-2147483648;return n>=0?r>=0?n^r:(n^e)+2147483648:r>=0?(t^r)+2147483648:t^e}function not(t){return t=integer(t),4294967295-t}function F(t,e,n){return or(and(t,e),and(not(t),n))}function G(t,e,n){return or(and(t,n),and(e,not(n)))}function H(t,e,n){return xor(xor(t,e),n)}function I(t,e,n){return xor(e,or(t,not(n)))}function rotateLeft(t,e){return or(shl(t,e),shr(t,32-e))}function FF(t,e,n,r,i,o,a){return t=t+F(e,n,r)+i+a,t=rotateLeft(t,o),t+=e}function GG(t,e,n,r,i,o,a){return t=t+G(e,n,r)+i+a,t=rotateLeft(t,o),t+=e}function HH(t,e,n,r,i,o,a){return t=t+H(e,n,r)+i+a,t=rotateLeft(t,o),t+=e}function II(t,e,n,r,i,o,a){return t=t+I(e,n,r)+i+a,t=rotateLeft(t,o),t+=e}function transform(t,e){var n=0,r=0,o=0,a=0,u=transformBuffer;for(n=state[0],r=state[1],o=state[2],a=state[3],i=0;i<16;i++)for(u[i]=and(t[4*i+e],255),j=1;j<4;j++)u[i]+=shl(and(t[4*i+j+e],255),8*j);n=FF(n,r,o,a,u[0],S11,3614090360),a=FF(a,n,r,o,u[1],S12,3905402710),o=FF(o,a,n,r,u[2],S13,606105819),r=FF(r,o,a,n,u[3],S14,3250441966),n=FF(n,r,o,a,u[4],S11,4118548399),a=FF(a,n,r,o,u[5],S12,1200080426),o=FF(o,a,n,r,u[6],S13,2821735955),r=FF(r,o,a,n,u[7],S14,4249261313),n=FF(n,r,o,a,u[8],S11,1770035416),a=FF(a,n,r,o,u[9],S12,2336552879),o=FF(o,a,n,r,u[10],S13,4294925233),r=FF(r,o,a,n,u[11],S14,2304563134),n=FF(n,r,o,a,u[12],S11,1804603682),a=FF(a,n,r,o,u[13],S12,4254626195),o=FF(o,a,n,r,u[14],S13,2792965006),r=FF(r,o,a,n,u[15],S14,1236535329),n=GG(n,r,o,a,u[1],S21,4129170786),a=GG(a,n,r,o,u[6],S22,3225465664),o=GG(o,a,n,r,u[11],S23,643717713),r=GG(r,o,a,n,u[0],S24,3921069994),n=GG(n,r,o,a,u[5],S21,3593408605),a=GG(a,n,r,o,u[10],S22,38016083),o=GG(o,a,n,r,u[15],S23,3634488961),r=GG(r,o,a,n,u[4],S24,3889429448),n=GG(n,r,o,a,u[9],S21,568446438),a=GG(a,n,r,o,u[14],S22,3275163606),o=GG(o,a,n,r,u[3],S23,4107603335),r=GG(r,o,a,n,u[8],S24,1163531501),n=GG(n,r,o,a,u[13],S21,2850285829),a=GG(a,n,r,o,u[2],S22,4243563512),o=GG(o,a,n,r,u[7],S23,1735328473),r=GG(r,o,a,n,u[12],S24,2368359562),n=HH(n,r,o,a,u[5],S31,4294588738),a=HH(a,n,r,o,u[8],S32,2272392833),o=HH(o,a,n,r,u[11],S33,1839030562),r=HH(r,o,a,n,u[14],S34,4259657740),n=HH(n,r,o,a,u[1],S31,2763975236),a=HH(a,n,r,o,u[4],S32,1272893353),o=HH(o,a,n,r,u[7],S33,4139469664),r=HH(r,o,a,n,u[10],S34,3200236656),n=HH(n,r,o,a,u[13],S31,681279174),a=HH(a,n,r,o,u[0],S32,3936430074),o=HH(o,a,n,r,u[3],S33,3572445317),r=HH(r,o,a,n,u[6],S34,76029189),n=HH(n,r,o,a,u[9],S31,3654602809),a=HH(a,n,r,o,u[12],S32,3873151461),o=HH(o,a,n,r,u[15],S33,530742520),r=HH(r,o,a,n,u[2],S34,3299628645),n=II(n,r,o,a,u[0],S41,4096336452),a=II(a,n,r,o,u[7],S42,1126891415),o=II(o,a,n,r,u[14],S43,2878612391),r=II(r,o,a,n,u[5],S44,4237533241),n=II(n,r,o,a,u[12],S41,1700485571),a=II(a,n,r,o,u[3],S42,2399980690),o=II(o,a,n,r,u[10],S43,4293915773),r=II(r,o,a,n,u[1],S44,2240044497),n=II(n,r,o,a,u[8],S41,1873313359),a=II(a,n,r,o,u[15],S42,4264355552),o=II(o,a,n,r,u[6],S43,2734768916),r=II(r,o,a,n,u[13],S44,1309151649),n=II(n,r,o,a,u[4],S41,4149444226),a=II(a,n,r,o,u[11],S42,3174756917),o=II(o,a,n,r,u[2],S43,718787259),r=II(r,o,a,n,u[9],S44,3951481745),state[0]+=n,state[1]+=r,state[2]+=o,state[3]+=a}function init(){for(count[0]=count[1]=0,state[0]=1732584193,state[1]=4023233417,state[2]=2562383102,state[3]=271733878,i=0;i<digestBits.length;i++)digestBits[i]=0}function update(t){var e;e=and(shr(count[0],3),63),count[0]<4294967288?count[0]+=8:(count[1]++,count[0]-=4294967296,count[0]+=8),buffer[e]=and(t,255),e>=63&&transform(buffer,0)}function finish(){var t,e=new array(8),n=0,r=0,i=0;for(n=0;4>n;n++)e[n]=and(shr(count[0],8*n),255);for(n=0;4>n;n++)e[n+4]=and(shr(count[1],8*n),255);for(r=and(shr(count[0],3),63),i=56>r?56-r:120-r,t=new array(64),t[0]=128,n=0;i>n;n++)update(t[n]);for(n=0;8>n;n++)update(e[n]);for(n=0;4>n;n++)for(j=0;j<4;j++)digestBits[4*n+j]=and(shr(state[n],8*j),255)}function hexa(t){var e="0123456789abcdef",n="",r=t;for(hexa_i=0;hexa_i<8;hexa_i++)n=e.charAt(Math.abs(r)%16)+n,r=Math.floor(r/16);return n}function MD5(t){var e,n,r,o,a,u,S;for(init(),r=0;r<t.length;r++)e=t.charAt(r),update(ascii.lastIndexOf(e));for(finish(),o=a=u=S=0,i=0;i<4;i++)o+=shl(digestBits[15-i],8*i);for(i=4;i<8;i++)a+=shl(digestBits[15-i],8*(i-4));for(i=8;i<12;i++)u+=shl(digestBits[15-i],8*(i-8));for(i=12;i<16;i++)S+=shl(digestBits[15-i],8*(i-12));return n=hexa(S)+hexa(u)+hexa(a)+hexa(o)}function teste(){testOk||(document.test.o1.value=MD5(document.test.i1.value),document.test.o2.value=MD5(document.test.i2.value),document.test.o3.value=MD5(document.test.i3.value),document.test.o4.value=MD5(document.test.i4.value),document.test.o5.value=MD5(document.test.i5.value),document.test.o6.value=MD5(document.test.i6.value),document.test.o7.value=MD5(document.test.i7.value),testOk=!0)}var state=new array(4),count=new array(2);count[0]=0,count[1]=0;var buffer=new array(64),transformBuffer=new array(16),digestBits=new array(16),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21,ascii="01234567890123456789012345678901 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",testOk=!1;
/* <<< file end: js/md5.js */

//# map link was there [md5.js.map]
/* >>> file start: js/thread_expander.js */
Expander=function(){this.__caller__,this.url,this.id,this.stored_caller,this.iframe,this.is_S1},Expander.Collection={},Expander.make=function(t,e,n,i){var r=(new Expander).set({__caller__:t,url:e.replace(/#.*$/,""),id:n,is_S1:!!i});r.get()},Expander.prototype.set=function(t){for(var e in t)this[e]=t[e];return this},Expander.prototype.getCanvas=function(t,e){return e.document.getElementById("ljcmt"+t)},Expander.prototype.parseLJ_cmtinfo=function(t,e){var n,i,r={},a=t.LJ_cmtinfo;if(!a)return!1;for(i in a)/^\d*$/.test(i)&&(n=this.getCanvas(i,t))&&(r[i]={info:a[i],canvas:n},"function"==typeof e&&e(i,r[i]));return r},Expander.prototype.loadingStateOn=function(){this.stored_caller=this.__caller__.cloneNode(!0),this.__caller__.setAttribute("already_clicked","already_clicked"),this.__caller__.onclick=function(){return!1},this.__caller__.style.color="#ccc"},Expander.prototype.loadingStateOff=function(){this.__caller__&&(this.__caller__.removeAttribute("already_clicked","already_clicked"),this.__caller__.parentNode&&this.__caller__.parentNode.replaceChild(this.stored_caller,this.__caller__));var t=this;window.setTimeout(function(){t.killFrame()},100)},Expander.prototype.killFrame=function(){document.body.removeChild(this.iframe)},Expander.prototype.isFullComment=function(t){return!!Number(t.info.full)},Expander.prototype.killDuplicate=function(t){var e,n,i,r;for(var a in t)/^\d*$/.test(a)&&(r=t[a].canvas,n=r.id,e=n.replace(/_$/,""),i=document.getElementById(e),null!=i?r.parentNode.removeChild(r):(r.id=e,window.ContextualPopup&&ContextualPopup.searchAndAdd(r),window.setupAjax&&setupAjax(r),window.ESN&&ESN.initTrackBtns(r)))},Expander.prototype.getS1width=function(t){var e,n;n=t.getElementsByTagName("img");for(var i=0;i<n.length;i++)if(e=n[i],/dot\.gif$/.test(e.src)){if(e.width)return Number(e.width);break}return!1},Expander.prototype.setS1width=function(t,e){var n,i;i=t.getElementsByTagName("img");for(var r=0;r<i.length;r++)if(n=i[r],/dot\.gif$/.test(n.src)){n.setAttribute("width",e);break}},Expander.prototype.onLoadHandler=function(t){var e=t.contentDocument||t.contentWindow;e=e.document||e;var n=this,i=e.defaultView||e.parentWindow,r={},a=this.parseLJ_cmtinfo(window);this.parseLJ_cmtinfo(i,function(t,e){if(t in a&&(a[t].canvas.id=a[t].canvas.id+"_",r[t]=a[t],!n.isFullComment(a[t])&&n.isFullComment(e)||t===n.id)){var i;n.is_S1&&(i=n.getS1width(a[t].canvas)),a[t].canvas.innerHTML=e.canvas.innerHTML,n.is_S1&&i!==!1&&n.setS1width(a[t].canvas,i),LJ_cmtinfo[t].full=1,LJ_cmtinfo[t].expanded=1}});return this.killDuplicate(r),this.loadingStateOff(),!0},Expander.prototype.toString=function(){return"__"+this.id+"__"},Expander.prototype.get=function(){if(this.__caller__.getAttribute("already_clicked"))return!1;this.loadingStateOn();var t;return t=document.createElement("iframe"),t.onload=function(e){return function(){e.onLoadHandler(t)}}(this),t.style.height="1px",t.style.width="1px",t.style.display="none",t.src=this.url,t.id=this.id,document.body.appendChild(t),this.iframe=t,!0};
/* <<< file end: js/thread_expander.js */

//# map link was there [thread_expander.js.map]
/* >>> file start: js/thread_expander.ex.js */
ExpanderEx=function(){this.__caller__,this.url,this.id,this.stored_caller,this.is_S1},ExpanderEx.Collection={},ExpanderEx.ReqCache={},ExpanderEx.make=function(e,t,n,r,a){var o=(new ExpanderEx).set({__caller__:t,url:n.replace(/#.*$/,""),id:r,is_S1:!!a});o.get(),jQuery.event.fix(e).preventDefault()},ExpanderEx.collapse=function(e,t,n,r,a){var o=(new ExpanderEx).set({__caller__:t,url:n.replace(/#.*$/,""),id:r,is_S1:!!a});o.collapseThread(),jQuery.event.fix(e).preventDefault()},ExpanderEx.prototype.set=function(e){for(var t in e)this[t]=e[t];return this},ExpanderEx.prototype.getCanvas=function(e,t){return t.document.getElementById("ljcmt"+e)},ExpanderEx.prototype.parseLJ_cmtinfo=function(e,t){var n,r,a={},o=e.LJ_cmtinfo;if(!o)return!1;for(r in o)/^\d*$/.test(r)&&(n=this.getCanvas(r,e))&&(a[r]={info:o[r],canvas:n},"function"==typeof t&&t(r,a[r]));return a},ExpanderEx.preloadImg=function(){(new Image).src=Site.imgprefix+"/preloader-s.gif?v=9673"},ExpanderEx.prototype.addPreloader=function(){this.loader=new Image,this.loader.src=Site.imgprefix+"/preloader-s.gif?v=9673",this.loader.className="i-exp-preloader",this.__caller__.parentNode.appendChild(this.loader)},ExpanderEx.prototype.removePreloader=function(){this.loader&&(this.loader.parentNode&&this.loader.parentNode.removeChild(this.loader),delete this.loader)},ExpanderEx.prototype.loadingStateOn=function(){this.addPreloader(),this.stored_caller=this.__caller__.cloneNode(!0),this.__caller__.setAttribute("already_clicked","already_clicked"),this.__caller__.onclick=function(){return!1},this.__caller__.style.color="#ccc"},ExpanderEx.prototype.loadingStateOff=function(){this.__caller__&&(this.__caller__.removeAttribute("already_clicked","already_clicked"),this.__caller__.parentNode&&this.__caller__.parentNode.replaceChild(this.stored_caller,this.__caller__),this.removePreloader())},ExpanderEx.prototype.killFrame=function(){document.body.removeChild(this.iframe)},ExpanderEx.prototype.isFullComment=function(e){return!!Number(e.info.full)},ExpanderEx.prototype.expandThread=function(e){function t(t){for(var n,r=t+1;r<e.length;++r){if(n=e[r].state,"expanded"===n)return!1;if("collapsed"===n)return!0}return!1}this.loadingStateOff();for(var n,r,a=0;a<e.length;++a)if("deleted"===e[a].state&&(LJ_cmtinfo[e[a].thread].is_deleted=!0),e[a].thread in LJ_cmtinfo&&(!e[a].state||"expanded"===e[a].state)){n=e[a].thread,r=ExpanderEx.prepareCommentBlock(jQuery(e[a].html),n,t(a));var o=LiveJournal.CommentManager.updateCell(n,r);n in ExpanderEx.Collection||(ExpanderEx.Collection[n]=o)}for(var a=0;a<e.length;++a)n=e[a].thread,LJ_cmtinfo[n].parent=this.id,e[a].state&&"expanded"===e[a].state&&this.initCommentBlock(jQuery("#ljcmt"+n)[0],n);return!0},ExpanderEx.prototype.collapseThread=function(e){var t=e||this.id;this.collapseBlock(t);for(var n=LJ_cmtinfo[t].rc,r=0;r<n.length;++r)this.collapseThread(n[r])},ExpanderEx.prototype.collapseBlock=function(e){e in ExpanderEx.Collection&&(LiveJournal.CommentManager.updateCell(e,ExpanderEx.Collection[e]),this.initCommentBlock(LiveJournal.CommentManager.getCell(e)[0],e,!0),delete ExpanderEx.Collection[e])},ExpanderEx.prototype.initCommentBlock=function(e,t,n){n?(LJ_cmtinfo[t].full=LJ_cmtinfo[t].oldvars.full,LJ_cmtinfo[t].expanded=LJ_cmtinfo[t].oldvars.expanded,delete LJ_cmtinfo[t].oldvars):(LJ_cmtinfo[t].oldvars={full:LJ_cmtinfo[t].full||0,expanded:LJ_cmtinfo[t].expanded||0},LJ_cmtinfo[t].full=1,LJ_cmtinfo[t].expanded=1),window.ContextualPopup&&ContextualPopup.searchAndAdd(e),window.ESN&&ESN.initTrackBtns(e)},ExpanderEx.prototype.toString=function(){return"__"+this.id+"__"},ExpanderEx.prototype.get=function(){if(this.__caller__.getAttribute("already_clicked"))return!1;this.loadingStateOn();var e=this;return setTimeout(function(){LiveJournal.CommentManager.getThreadJSON(e.id,function(t){e.expandThread(t),ExpanderEx.ReqCache[e.id]=t},!1,!1,!0)},0),!0},ExpanderEx.prepareCommentBlock=function(e,t,n){return this.showExpandLink(t,e,n),e},ExpanderEx.showExpandLink=function(e,t,n){var r,a,o="#expand_"+e,i="#collapse_"+e;LJ_cmtinfo[e].has_link>0?(n?(r=i,a=o):(r=o,a=i),t.find(a).css("display","")):r=i+","+o,t.find(r).css("display","none")},ExpanderEx.preloadImg();
/* <<< file end: js/thread_expander.ex.js */

//# map link was there [thread_expander.ex.js.map]
/* >>> file start: js/commentmanage.js */
//!= require js/livejournal.js
function setStyle(e,t,n){if(document.getElementById){var o=document.getElementById(e);o&&o.style&&(o.style[t]=n)}}function setInner(e,t){if(document.getElementById){var n=document.getElementById(e);n&&(n.innerHTML=t)}}function hideElement(e){if(document.getElementById){var t=document.getElementById(e);t&&(t.style.display="none")}}function setAttr(e,t,n){if(document.getElementById){var o=document.getElementById(e);o&&o.setAttribute(t,n)}}function multiformSubmit(e,t){var n=e.mode.value;if(!n)return alert(t.no_action),!1;if("all:"!==n.substring(0,4)){for(var o=-1,r=!1;e[++o];)if("selected_"===e[o].name.substring(0,9)&&e[o].checked){r=!0;break}return r?"delete"===n||"deletespam"===n?confirm(t.conf_delete):void 0:(alert(t.no_comments),!1)}}function getLocalizedStr(e,t){return LJ.ml(e,t)}function hsv_to_rgb(e,t,n){if(0===t)return n*=255,[n,n,n];e*=6;var o=Math.floor(e),r=e-o,i=n*(1-t),a=n*(1-t*r),l=n*(1-t*(1-r));return n=Math.floor(255*n+.5),l=Math.floor(255*l+.5),i=Math.floor(255*i+.5),a=Math.floor(255*a+.5),0===o?[n,l,i]:1===o?[a,n,i]:2===o?[i,n,l]:3===o?[i,a,n]:4===o?[l,i,n]:[n,i,a]}function deleteComment(e,t){t=t||"delete";var n,o,r,i,a=""!==Site.currentJournal?Site.currentJournal:window.LJ_cmtinfo.journal,l=$("ljdelopts"+e),d=$("ljcmt"+e),m=0,c=LiveJournal.getAjaxUrl("delcomment")+"?mode=js&journal="+a+"&id="+e,u="confirm=1";l&&"delete"===t?(l.ban&&l.ban.checked&&(u+="&ban=1"),l.spam&&l.spam.checked&&(u+="&spam=1"),l.delthread&&l.delthread.checked&&(u+="&delthread=1",n=!0),l.delauthor&&l.delauthor.checked&&(u+="&delauthor=1",o=!0),l.deleverywhere&&l.deleverywhere.checked&&(u+="&deleverywhere=1")):"markAsSpam"===t&&(o=n=!0,u+="&ban=1&spam=1&delauthor=1"),u+="&lj_form_auth="+decodeURIComponent(window.LJ_cmtinfo.form_auth);var s={url:c,data:u,method:"POST",onData:function(e){r=!!e,i=!r},onError:function(t){t.indexOf("alert")<0&&alert("Error deleting "+e),i=!0}};HTTPReq.getJSON(s);var p=function f(){var t=hsv_to_rgb(0,Math.cos((m+1)/2),1);m+=3.14159/5;var a="rgb("+t[0]+","+t[1]+","+t[2]+")";if(d.style.border="2px solid "+a,i)d.style.border="";else if(r){if(removeComment(e,n),o&&""!==window.LJ_cmtinfo[e].u)for(var l in window.LJ_cmtinfo)window.LJ_cmtinfo[l].u!==window.LJ_cmtinfo[e].u||window.LJ_cmtinfo[l].is_deleted||removeComment(l,!1)}else window.setTimeout(f,50)};window.setTimeout(p,5)}function removeComment(e,t){if("iframe"!==LiveJournal.CommentManager.getState()){var n=e;LiveJournal.CommentManager.getThreadJSON(n,function(e){LiveJournal.CommentManager.processThreadJSON(e,function(e,t,o){window.LJ_cmtinfo[n].u===window.LJ_cmtinfo[e].u&&(t=ExpanderEx.prepareCommentBlock(t,e),LiveJournal.CommentManager.updateCell(e,t),o.is_deleted&&e in ExpanderEx.Collection&&delete ExpanderEx.Collection[e])})},!0)}else{var o=document.getElementById("ljcmt"+e);if(o){o.style.display="none";var r=window.userhook_delete_comment_ARG;r&&r(e)}}if(t)for(var i=window.LJ_cmtinfo[e],a=0;a<i.rc.length;a++)removeComment(i.rc[a],!0)}function createDeleteFunction(e,t,n){return n=n||"delete",function(o){o=jQuery.event.fix(o||window.event),o.stopPropagation(),o.preventDefault();var r=0;if(o.shiftKey)return r=1,deleteComment(t,n),!0;if(!window.LJ_cmtinfo)return!0;var i=window.LJ_cmtinfo[t],a=window.LJ_cmtinfo[t].u,l=window.LJ_cmtinfo.remote;if(!i||!l)return!0;var d=window.LJ_cmtinfo.canAdmin,m=1===Site.remote_is_maintainer&&""!==i.u?"comment.mark.spam.":"comment.mark.spam2.";if("markAsSpam"===n)return window.ctrlPopup||(window.ctrlPopup=jQuery('<div class="b-popup-ctrlcomm" />').delegate("input.spam-comment-button","click",function(){window.ctrlPopup.bubble("hide")})),window.ctrlPopup.html('<div class="b-popup-group"><div class="b-popup-row b-popup-row-head"><strong>'+getLocalizedStr(m+"title",{username:a})+'</strong></div><div class="b-popup-row">'+getLocalizedStr(m+"subject",{username:a})+'</div><div class="b-popup-row"><input type="button" class="spam-comment-button" onclick="deleteComment('+t+", '"+n+'\');" value="'+getLocalizedStr(m+"button",{username:a})+'"></div><div>',e,o,"spamComment"+t).bubble().bubble("show",e),!0;if("delete"===n){var c,u=['<form id="ljdelopts'+t+'"><div class="b-popup-group"><div class="b-popup-row b-popup-row-head"><strong>'+getLocalizedStr("comment.delete.q",{username:a})+"</strong></div>"];""!==i.username&&i.username!==l&&d&&(c="ljpopdel"+t+"ban",u.push('<div class="b-popup-row"><input type="checkbox" name="ban" id="'+c+'"> <label for="'+c+'">'+getLocalizedStr("comment.ban.user",{username:a})+"</label></div>")),i.rc&&i.rc.length&&d&&(c="ljpopdel"+t+"thread",u.push('<div class="b-popup-row"><input type="checkbox" name="delthread" id="'+c+'"> <label for="'+c+'">'+getLocalizedStr("comment.delete.all.sub",{username:a})+"</label></div>")),i.username===l&&(c="ljpopdel"+t+"author",u.push('<div class="b-popup-row"><input type="checkbox" name="delauthor" id="'+c+'"> <label for="'+c+'">'+getLocalizedStr("comment.delete.all.my")+"</label></div>")),""!==i.username&&i.username!==l&&d&&(c="ljpopdel"+t+"author",u.push('<div class="b-popup-row"><input type="checkbox" name="delauthor" id="'+c+'"> <label for="'+c+'">'+getLocalizedStr("comment.delete.all.author",{author:a})+"</label></div>"),c="ljpopdel"+t+"everywhere",LJ.Flags.isEnabled("superban_step2")&&u.push('<div class="b-popup-row"><input type="checkbox" name="deleverywhere" id="'+c+'"> <label for="'+c+'"> '+getLocalizedStr("comment.delete.all.everywhere",{author:a})+"</label></div>")),u.push('<div class="b-popup-row"><input class="delete-comment-button" type="button" value="'+getLocalizedStr("comment.delete",{username:a})+'" onclick="deleteComment('+t+');" /></div></div><div class="b-bubble b-bubble-alert b-bubble-noarrow"><i class="i-bubble-arrow-border"></i><i class="i-bubble-arrow"></i>'+getLocalizedStr("comment.delete.no.options",{username:a})+"</div></form>"),window.delPopup||(window.delPopup=jQuery('<div class="b-popup-delcomm" />').delegate("input.delete-comment-button","click",function(){window.delPopup.bubble("hide")}));var s,p,f=function(e){return e.length>0&&e.attr("checked")};window.delPopup.bind("bubbleshow",function(){s=jQuery("#ljpopdel"+t+"author"),p=jQuery("#ljpopdel"+t+"everywhere")}).delegate("input[type=checkbox]","click",function(){this===p[0]&&f(p)&&s.attr("checked",!0),this!==s[0]||f(s)||p.attr("checked",!1)}),window.delPopup.html(u.join(" ")).bubble().bubble("show",e)}else"unspam"===n&&deleteComment(t,n)}}function poofAt(e){var t=document.createElement("div");t.style.position="absolute",t.style.background="#FFF",t.style.overflow="hidden";var n=1,o=e.y,r=e.x,i=5,a=5;document.body.appendChild(t);var l=function d(){n-=.15,i+=10,a+=10,o-=5,r-=5,.1>=n?t.parentNode.removeChild(t):(t.style.left=r+"px",t.style.top=o+"px",t.style.height=a+"px",t.style.width=i+"px",t.style.filter="alpha(opacity="+Math.floor(100*n)+")",t.style.opacity=n,window.setTimeout(d,20))};l()}function updateLink(e,t,n){e.href=t.newurl;var o=window["userhook_"+t.mode+"_comment_ARG"],r=0;n&&n.src&&n.src===t.oldimage&&(n.src=t.newimage,r=1),o&&(o(t.id),r=1),r||(e&&e.style&&(e.style.display="none"),n&&n.style&&(n.style.dispay="none"))}function createModerationFunction(control,dItemid,action){action=action||"screen";var comUser=window.LJ_cmtinfo[dItemid].u;return function(e){function sendModerateRequest(){var t="unspam"===action?"spamcomment":"talkscreen",n=control.href.replace(new RegExp(".+"+t+".bml"),LiveJournal.getAjaxUrl(t)),o={confirm:"Y",lj_form_auth:decodeURIComponent(window.LJ_cmtinfo.form_auth)};"unspam"===action&&(n+="&jsmode=1"),hourglass=jQuery(e).hourglass()[0],jQuery.post(n,o,function(e){if(tsInProg[dItemid]=0,"unspam"===action){if(e=jQuery.parseJSON(e),e.result)return removeEmptyMarkup(dItemid),hourglass.hide(),!0;alert(e.errormsg)}if("iframe"!==LiveJournal.CommentManager.getState())handleNew();else{var t=checkRcForNoCommentsPage(e);handleIframe(t)}})}function handleNew(){var e,t,n,o=dItemid,r=!(!window.LJ_cmtinfo[o].oldvars||!window.LJ_cmtinfo[o].full),i=function(o){LiveJournal.CommentManager.processThreadJSON(o,function(o,r){if(window.LJ_cmtinfo[o].full){if(e=!("oldvars"in window.LJ_cmtinfo[o]),!e)for(n=window.LJ_cmtinfo[o].rc,t=0;t<n.length;++t)window.LJ_cmtinfo[n[t]].full||window.LJ_cmtinfo[n[t]].is_deleted||(e=!0);r||removeEmptyMarkup(o);var i=ExpanderEx.prepareCommentBlock(r,o,e);LiveJournal.CommentManager.updateCell(o,i)}}),hourglass.hide(),poofAt(pos)};LiveJournal.CommentManager.getThreadJSON(o,function(e){r&&window.LJ_cmtinfo[o].oldvars.full?LiveJournal.CommentManager.getThreadJSON(o,function(t){ExpanderEx.Collection[o]=ExpanderEx.prepareCommentBlock(jQuery("<div>"+t[0].html+"</div>"),o,!0).html(),i(e)},!0,!0):i(e)},!1,!r)}function handleIframe(ids){jQuery.ajax({url:location.href,type:"GET",dataType:"html",complete:function complete(res,status){if("success"===status||"notmodified"===status){var nodes=jQuery("<div/>").append(res.responseText.replace(/<script(.|\s)*?\/script>/gi,"")).find(ids).each(function(){var id=this.id.replace(/[^0-9]/g,"");if(window.LJ_cmtinfo[id].expanded){var expand=this.innerHTML.match(/Expander\.make\(.+?\)/)[0];(function(){eval(expand)}).apply(document.createElement("a"))}else jQuery("#"+this.id).replaceWith(this)});hourglass.hide(),poofAt(pos)}}})}function checkRcForNoCommentsPage(json){function mapComms(e){for(var t,n=-1;t=window.LJ_cmtinfo[e].rc[++n];)window.LJ_cmtinfo[t].full&&(commsArray.push(t),mapComms(String(t)))}var commsArray=[dItemid],ids;if(window.LJ_cmtinfo[dItemid].rc)/mode=(un)?freeze/.test(control.href)&&mapComms(dItemid),ids="#ljcmt"+commsArray.join(",#ljcmt");else{var rpcRes;if(eval(json),updateLink(control,rpcRes,control.getElementsByTagName("img")[0]),!document.getElementById("ljcmtbar"+dItemid))return hourglass.hide(),void poofAt(pos);ids="#ljcmtbar"+dItemid}return ids}e=jQuery.event.fix(e||window.event);var pos={x:e.pageX,y:e.pageY},modeParam=LiveJournal.parseGetArgs(location.href).mode,hourglass;return e.stopPropagation(),e.preventDefault(),sendModerateRequest(),!1}}function removeEmptyMarkup(e){jQuery("#ljcmt"+e).remove()}function LJ_Mul(e,t){return parseInt(e,10)*parseInt(t,10)}function LJ_JoinURL(e){var t=[].slice.call(arguments,1).join("&");return e+=e.indexOf("?")>-1?"&":"?",e+t}function LJ_Concat(){return[].slice.call(arguments,0).join("")}window.getLocalizedStr=getLocalizedStr;var tsInProg={};!function(e,t){t.LiveJournal.CommentManager=function(){this.bindLinks()},LiveJournal.CommentManager.prototype.bindLinks=function(){e("body").delegate("a","click",function(e){var n,o,r=/id=(\d+)/,i=this;if(-1!==i.href.indexOf("talkscreen.bml")){if(n=r.exec(i.href),!n)return;if(o=n[1],!document.getElementById("ljcmt"+o))return;if(t.LJ_cmtinfo&&createModerationFunction(i,o)(e),!LJ.Flags.isEnabled("recent_comments_v5"))return}else if(-1!==i.href.indexOf("delcomment.bml")){if(t.LJ_cmtinfo&&t.LJ_cmtinfo.disableInlineDelete)return;if(n=r.exec(i.href),!n)return;if(o=n[1],!document.getElementById("ljcmt"+o))return;var a=-1!==i.href.indexOf("spam=1")?"markAsSpam":"delete";if(!LJ.Flags.isEnabled("recent_comments_v5"))return;createDeleteFunction(i,o,a)(e)}else{if(-1===i.href.indexOf("spamcomment.bml"))return;if(n=r.exec(i.href),!n)return;if(o=n[1],!document.getElementById("ljcmt"+o))return;createModerationFunction(i,o,"unspam")(e)}e.preventDefault(),e.stopPropagation()})};t.LiveJournal.CommentManager;t.LiveJournal.CommentManager.getState=function(){return t.LJ_cmtinfo.use_old_thread_expander?"iframe":"old"},LiveJournal.CommentManager.updateCell=function(t,n){var o=e("#ljcmt"+t),r=e("<div></div>").append(o.clone());return o.replaceWith(e(n).filter("#ljcmt"+t)),r.html()},LiveJournal.CommentManager.getCell=function(t){return e("#ljcmt"+t)},LiveJournal.CommentManager.getThreadJSON=function(e,n,o){var r=location.href.match(/\/(\d+).html/)[1],i=LiveJournal.parseGetArgs(location.href).mode,a={journal:Site.currentJournal,itemid:r,thread:e,depth:t.LJ_cmtinfo[e].depth};o&&(a.single="1"),i&&(a.mode=i);var l=LiveJournal.parseGetArgs(location.href);l&&l.style&&"mine"===l.style&&(a.style="mine");var d=LiveJournal.getAjaxUrl("get_thread");jQuery.get(LiveJournal.constructUrl(d,a),n,"json")},LiveJournal.CommentManager.processThreadJSON=function(n,o){for(var r,i,a=0;a<n.length;++a)n[a].thread in t.LJ_cmtinfo&&(r={},r.is_deleted="deleted"===n[a].state,r.is_deleted&&(t.LJ_cmtinfo[n[a].thread].is_deleted=!0),i=e(n[a].html).filter("#ljcmt"+n[a].thread),o(n[a].thread,i,r))},e(function(){new LiveJournal.CommentManager})}(jQuery,window);
/* <<< file end: js/commentmanage.js */

//# map link was there [commentmanage.js.map]
